{"version":3,"sources":["util/enum.ts","static/swap_img0.png","static/swap_img1.png","static/swap_img2.png","static/swap_img3.png","static/swap_img4.png","static/swap_img5.png","static/logo.png","util/calculator.ts","components/disclaimer.tsx","components/alert.tsx","util/logger.ts","zilliqa-signer.ts","util/config-json-helper.ts","util/interface.ts","store/userSlice.ts","store/blockchainSlice.ts","store/stakingSlice.ts","saga/selectors.ts","saga/stakingSaga.ts","util/api-randomizer.ts","util/reward-calculator.ts","saga/userSaga.ts","saga/index.ts","store/store.ts","zilliqa-api.ts","util/utils.ts","store/hooks.ts","components/spinner-normal.tsx","components/ssn-table.tsx","components/footer.tsx","components/wallet-keystore.tsx","components/wallet-ledger.tsx","components/wallet-zilpay.tsx","components/icons/keystore-line.tsx","components/icons/ledger-line.tsx","components/icons/zil-pay-line.tsx","components/icons/sun.tsx","components/icons/moon.tsx","components/landing-stats-table.tsx","util/use-local-storage.ts","util/use-dark-mode.ts","components/icons/search.tsx","components/warning-banner.tsx","components/reward-countdown-table.tsx","components/home.tsx","components/delegator-dropdown.tsx","components/staking-portfolio.tsx","components/contract-calls-modal/modal-pending.tsx","components/icons/checkbox-circle.tsx","components/contract-calls-modal/modal-sent.tsx","components/icons/arrow-dropdown-line.tsx","components/icons/arrow-dropup-line.tsx","components/contract-calls/gas-settings.tsx","components/contract-calls/withdraw-comm.tsx","components/contract-calls/update-receiver-address.tsx","components/contract-calls/update-commission-rate.tsx","components/contract-calls/delegate-stake.tsx","components/contract-calls/redeleg.tsx","components/contract-calls/withdraw-stake.tsx","components/contract-calls/withdraw-reward.tsx","components/contract-calls/complete-withdraw.tsx","components/icons/wallet-transfer-long.tsx","components/icons/question-circle.tsx","components/icons/arrow-down.tsx","components/icons/edit-box-line.tsx","components/contract-calls/swap-deleg.tsx","components/delegator-stats-table.tsx","components/operator-stats-table.tsx","components/spinner.tsx","components/complete-withdrawal-table.tsx","components/icons/shuffle.tsx","components/icons/refresh.tsx","components/icons/bell.tsx","components/icons/checkbox-blank-circle.tsx","components/recent-txn.tsx","components/warning-dashboard-banner.tsx","components/dashboard.tsx","components/icons/not-authenticated.tsx","components/error404.tsx","components/explorer-staking-portfolio.tsx","components/explorer-pending-withdrawal-table.tsx","components/explorer.tsx","app.tsx","serviceWorker.ts","index.tsx","ledger-zilliqa.ts","static/zillion.svg","static/light/zillion.svg"],"names":["AccountType","Constants","Environment","Explorer","LedgerIndex","Network","NetworkURL","OperationStatus","PromiseArea","Role","SsnStatus","ProxyCalls","TransactionType","ButtonText","ContractState","module","exports","Zilliqa","require","RewardCalculator","constructor","url","ssnlist","zilliqa","contract","last_reward_cycle_json","this","contracts","at","getSubState","ssnaddr","delegator","last_withdraw_cycle_map","toLowerCase","reward_list","get_reward_cycle_list","delegate_per_cycle","combine_buff_direct","need_list","get_reward_need_cycle_list","calculate_rewards","undefined","last_reward_cycle","Number","parseInt","result_list","i","push","last_withdraw_cycle","filter","c","result_map","Map","direct_deposit_json","buffer_deposit_json","deleg_stake_per_cycle_json","direct_deposit_map","buffer_deposit_map","deleg_stake_per_cycle_map","forEach","cycle","c1","c2","hist_amt","BN","toString","dir_amt","buf_amt","total_amt_tmp","add","last_amt","get","total_amt","set","result_rewards","stake_ssn_per_cycle_map","cycle_info","total_rewards","total_stake","deleg_amt","rewards","mul","div","DisclaimerModal","props","id","className","tabIndex","role","aria-labelledby","aria-hidden","type","data-dismiss","aria-label","ToastMsg","header","advice","Alert","toast","info","error","success","warn","logger","args","process","bytes","chainId","gasPrice","DEFAULT_GAS_PRICE","gasLimit","DEFAULT_GAS_LIMIT","ZilSigner","changeNetwork","async","networkURL","MAINNET","TESTNET","fetchGasPrice","addWalletByKeystore","keystore","passphrase","wallet","addByKeystore","err","console","ERROR","sign","account","txParams","ledgerIndex","result","LEDGER","ledgerSign","ZILPAY","zilPaySign","KEYSTORE","PRIVATEKEY","MNEMONIC","sdkSign","adjustGas","newGasPrice","newGasLimit","getGasFees","getDefaultGasPrice","getDefaultGasLimit","DEFAULT","Error","transport","LedgerZilliqa","getTransport","ledger","getPublicAddress","pubKey","userWalletAddress","pubAddr","validation","isBech32","fromBech32Address","nonce","getNonce","txnParams","version","pack","toAddr","amount","code","data","Long","fromNumber","signature","signTxn","signedTx","log","response","provider","send","RPCMethod","CreateTransaction","message","TranID","JSON","stringify","close","zilPay","window","tx","transactions","new","blockchain","createTransaction","ID","balance","getBalance","address","minimumGasPrice","getMinimumGasPrice","api_max_retry_attempt","blockchain_explorer_config","environment_config","networks_config","refresh_rate_config","getEnvironment","getBlockchainExplorer","getRefreshRate","getApiMaxRetry","getNetworkConfigByEnv","PROD","initialDelegStats","globalAPY","zilRewards","gzilRewards","gzilBalance","totalDeposits","initialOperatorStats","name","stakeAmt","bufferedDeposits","commRate","commReward","delegNum","receiver","initialSwapDelegModalData","swapRecipientAddress","requestorList","initialState","address_bech32","address_base16","account_type","NONE","authenticated","gzil_balance","complete_withdrawal_amt","ledger_index","operator_stats","selected_role","deleg_stats","deleg_staking_portfolio_list","pending_withdraw_list","stake_modal_data","ssnName","ssnAddress","delegAmt","swap_deleg_modal_data","is_deleg_stats_loading","IDLE","is_operator_stats_loading","userSlice","createSlice","reducers","INIT_USER","state","action","payload","UPDATE_ADDRESS","UPDATE_BALANCE","UPDATE_COMPLETE_WITHDRAWAL_AMT","UPDATE_DELEG_STATS","UPDATE_DELEG_PORTFOLIO","portfolio_list","UPDATE_GZIL_BALANCE","UPDATE_LEDGER_INDEX","UPDATE_OPERATOR_STATS","UPDATE_PENDING_WITHDRAWAL_LIST","UPDATE_ROLE","UPDATE_STAKE_MODAL_DATA","stake_modal","UPDATE_SWAP_DELEG_MODAL","swap_deleg_modal","UPDATE_FETCH_DELEG_STATS_STATUS","UPDATE_FETCH_OPERATOR_STATS_STATUS","RESET_USER_STATE","QUERY_AND_UPDATE_BALANCE","QUERY_AND_UPDATE_GZIL_BALANCE","QUERY_AND_UPDATE_ROLE","QUERY_AND_UPDATE_DELEGATOR_STATS","QUERY_AND_UPDATE_OPERATOR_STATS","QUERY_AND_UPDATE_USER_STATS","POLL_USER_DATA_START","POLL_USER_DATA_STOP","actions","blockchainSlice","proxy","impl","staking_viewer","api_list","blockchain_explorer","refresh_rate","UPDATE_CHAIN_INFO","UPDATE_BLOCKCHAIN_EXPLORER","UPDATE_REFRESH_RATE","UPDATE_API_MAX_ATTEMPT","api_max_attempt","RESET_BLOCKCHAIN_STATE","networkConfig","node_status","CONFIG_LOADED","gzil_address","gzil_total_supply","landing_stats","circulatingSupplyStake","nodesNum","gzil","remainingGzil","estRealtimeAPY","min_bnum_req","min_deleg_stake","reward_blk_countdown","total_stake_amount","ssn_dropdown_list","ssn_list","is_landing_stats_loading","is_ssn_stats_loading","stakingSlice","UPDATE_GZIL_ADDRESS","UPDATE_GZIL_TOTAL_SUPPLY","UPDATE_LANDING_STATS","UPDATE_MIN_BNUM_REQ","UPDATE_MIN_DELEG","UPDATE_REWARD_BLK_COUNTDOWN","UPDATE_TOTAL_STAKE_AMOUNT","UPDATE_SSN_DROPDOWN_LIST","dropdown_list","UPDATE_SSN_LIST","UPDATE_FETCH_LANDING_STATS_STATUS","UPDATE_FETCH_SSN_STATS_STATUS","PRELOAD_INFO_READY","POLL_STAKING_DATA_START","POLL_STAKING_DATA_STOP","QUERY_AND_UPDATE_STAKING_STATS","getBlockchain","getUserState","user","getStakingState","staking","MAX_GZIL_SUPPLY","REWARD_ZIL_PER_DAY","REFRESH_INTERVAL","watchInitOnce","put","PENDING","select","checksumImpl","replace","queries","call","ZilSdk","getSmartContractSubStateBatch","mindelegstake","totalstakeamount","bnum_req","gziladdr","total_supply","getSmartContractSubState","last_withdraw_cycle_deleg","isRespOk","comm_for_ssn","Object","keys","length","totalCoinSupply","getTotalCoinSupply","totalCoinSupplyBN","BigNumber","convertZilToQa","dividedBy","times","toFixed","maxGzilSupply","shiftedBy","minus","temp","rewardZilPerDay","landingStats","e","COMPLETE","pollStakingData","ssn_deleg_amt","ssnArgs","status","ACTIVE","INACTIVE","hasOwnProperty","ssnStats","toBech32Address","apiUrl","dropdownOptions","queryAndUpdateStats","delay","pollStakingSaga","watchPollStakingData","take","race","stakingSaga","fork","takeLatest","Random","MersenneTwister19937","randomJS","autoSeed","ApiRandomizer","testnetIndex","mainnetIndex","randTestnetIndexList","randMainnetIndexList","testnetApiList","mainnetApiList","instance","fetchApi","apiList","shuffle","Array","from","maxLen","randomIndex","api","apiRandomizer","getInstance","API_MAX_ATTEMPT","rewardCalculator","computeDelegRewardsExec","ssn","compute_maps","get_rewards","computeDelegRewards","attempt","store","getState","randomAPI","queryAndUpdateBalance","queryAndUpdateRole","isOperator","OPERATOR","DELEGATOR","queryAndUpdateGzil","gzilAddrResolved","populateStakingPortfolio","depositAmtDeleg","staking_portfolio_list","totalRewards","deposit","plus","delegRewards","ssnAddressBech32","stakingStats","find","delegStats","populateSwapRequests","deleg_swap_request","reverseMap","reduce","newMap","k","receipientAddr","swapDelegModal","populatePendingWithdrawal","progress","pendingWithdrawList","totalWithdrawAmt","pendingWithdrawal","numTxBlk","getNumTxBlocks","currBlkNum","blkNum","pendingAmt","blkNumCheck","blkNumCountdown","completed","isLessThanOrEqualTo","processed","populateRewardBlkCountdown","rewardBlkCountdown","calculateBlockRewardCountdown","pollDelegatorData","populateOperatorStats","delegQuery","operatorStats","pollOperatorData","all","pollUserSaga","watchPollUserData","userSaga","sagaMiddleware","createSagaMiddleware","middlewares","getDefaultMiddleware","configureStore","reducer","userReducer","blockchainReducer","stakingReducer","devTools","middleware","run","API_RANDOMIZER","getActualSmartContractSubStateBatch","queryList","batch_result","sort","a","b","indices","getActualSmartContractSubState","getActualBalance","getActualNumTxBlocks","getActualTotalCoinSupply","getBlockChainInfo","NumTxBlocks","units","bech32ToChecksum","isAddress","convertBase16ToBech32","toQa","Units","Zil","convertToProperCommRate","rate","isDigits","input","test","computeGasFees","convertQaToCommaStr","inputVal","zil","fromQa","splitAmt","split","convertQaToZilFull","convertGzilToCommaStr","convertNetworkUrlToLabel","label","getTxnLink","txnId","link","VIEWBLOCK","getAddressLink","getZillionExplorerLink","location","origin","getTruncatedAddress","addressLen","front","substring","end","concat","showWalletsPrompt","accountType","validateBalance","gasFees","gte","blockNum","currentNetworkURL","sampleRewardBlockNum","rewardBlockCount","SAMPLE_REWARD_BLOCK_MAINNET","REWARD_BLOCK_COUNT_MAINNET","SAMPLE_REWARD_BLOCK_TESTNET","REWARD_BLOCK_COUNT_TESTNET","obj","useAppDispatch","useDispatch","useAppSelector","useSelector","SpinnerNormal","class","Table","columns","tableId","hiddenColumns","showStakeBtn","tempInitialState","pageIndex","sortBy","desc","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","useTable","useSortBy","map","headerGroup","getHeaderGroupProps","headers","column","index","scope","getHeaderProps","render","data-for","data-tip","row","getRowProps","cells","cell","getCellProps","place","effect","SsnTable","dispatch","loading","ssnList","totalStakeAmt","ssnstats","computeTotalStakeAmt","useMemo","Header","accessor","tipText","Cell","original","inputStake","totalStake","inputStakeBN","totalStakeBN","computeStakeAmtPercent","data-toggle","data-target","data-keyboard","data-backdrop","onClick","handleStake","disabled","IS_PAUSED","getHiddenColumns","Footer","WalletKeystore","filename","setFilename","useState","setPassphrase","setKeystore","htmlFor","onChange","keystoreFile","target","files","placeholder","value","reader","FileReader","readAsText","onload","onWalletLoadingCallback","keystoreJSON","bech32Address","onSuccessCallback","onerror","onReturnCallback","LedgerWallet","setLedgerIndex","ledgerAccounts","setLedgerAccounts","handleClose","getLedgerAccounts","currAddress","currentLedgerIndex","currLedgerAccount","hwIndex","tempLedgerAccounts","slice","unlockWallet","selectedLedgerAddress","$","modal","base16Address","item","key","WalletZilPay","env","isEnable","connect","base16","defaultAccount","IconKeystoreLine","xmlns","viewBox","width","height","data-name","d","IconLedgerLine","IconZilPayLine","IconSun","fill","IconMoon","LandingStatsTable","isStorageAvailable","storage","x","setItem","removeItem","useDarkMode","initialValue","darkMode","setDarkMode","localStorage","getItem","currTheme","document","documentElement","getAttribute","localStorageTheme","parse","setAttribute","setTheme","useEffect","enable","useCallback","disable","IconSearch","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","x1","y1","x2","y2","WarningBanner","RewardCountdownTable","mountedRef","useRef","currentBlockNum","setCurrentBlockNum","expectedBlockNum","setExpectedBlockNum","blockCountToReward","setBlockCountToReward","tempCurrentBlockNum","tempBlockRewardCount","tempExpectedBlockNum","trackPromise","then","blockCountdown","catch","finally","current","fontStyle","fontFamily","fontSize","fontWeight","animateToNumber","config","tension","friction","withRouter","chainInfo","isDirectDashboard","setIsDirectDashboard","isShowAccessMethod","setShowAccessMethod","explorerSearchAddress","setExplorerSearchAddress","setRole","accessMethod","setAccessMethod","selectedNetwork","setSelectedNetwork","resetWalletsClicked","redirectToDashboard","addressBase16","addressBech32","Promise","res","setTimeout","history","handleAccessMethod","access","handleShowAccessMethod","selectedRole","toggleDirectToDashboard","explorerCheckRewards","zillionExplorerUrl","onbeforeunload","STAGE","src","ZillionLogo","alt","ZillionLightLogo","DisplayAccessMethod","href","style","backgroundColor","color","onKeyDown","keyCode","maxLength","rel","hideProgressBar","networkLabel","DelegatorDropdown","data-display","aria-haspopup","aria-expanded","NOT_AVAILABLE","StakingPortfolio","ModalPending","IconCheckboxCircle","ModalSent","IconArrowDropdownLine","IconArrowDropupLine","GasSettings","gasOption","onBlurGasPrice","onGasPriceChange","onBlurGasLimit","onGasLimitChange","setGasOption","onBlur","multipliedBy","WithdrawCommModal","commRewards","defaultGasPrice","defaultGasLimit","setGasPrice","setGasLimit","updateData","updateRecentTransactions","setTxnId","isPending","setIsPending","WITHDRAW_COMM","dismiss","lt","_tag","params","UpdateReceiverAddress","newAddress","setNewAddress","UPDATE_RECV_ADDR","proxyChecksum","newReceivingAddress","vname","UpdateCommRateModal","newRate","setNewRate","UPDATE_COMM_RATE","match","contractCommRate","userInputRate","percentToContractCommRate","UPDATE_COMM","DelegateStakeModal","minDelegStake","minDelegStakeDisplay","stakeModalData","setDelegAmt","setDefaultStakeAmt","DELEGATE_STAKE","delegAmtQa","isLessThan","gasFeesQa","combinedFees","combinedFeesZil","remaningBalance","isGreaterThan","ssnChecksumAddress","senderAddress","handleNodeSelect","ReDelegateStakeModal","userBase16Address","nodeSelectorOptions","fromSsn","toSsn","setToSsn","toSsnName","setToSsnName","showNodeSelector","setShowNodeSelector","setDefaultDelegAmt","tempDelegAmt","TRANSFER_STAKE","toggleNodeSelector","last_buf_deposit_cycle_deleg_json","gt","last_buf_deposit_cycle_deleg","lastDepositCycleDeleg","lastrewardcycle","hasRewardToWithdraw","fromSsnChecksumAddress","toSsnChecksumAddress","currentAmtQa","leftOverQa","sub","isZero","REDELEGATE_STAKE","WithdrawStakeModal","withdrawAmt","setWithdrawAmt","setDefaultWithdrawAmt","INITIATE_STAKE_WITHDRAW","withdrawAmtQa","WITHDRAW_STAKE_AMT","WithdrawRewardModal","CLAIM_REWARDS","isGreaterThanOrEqualTo","WITHDRAW_STAKE_REWARDS","CompleteWithdrawModal","COMPLETE_STAKE_WITHDRAW","COMPLETE_WITHDRAWAL","IconWalletTransferLong","fillRule","clipRule","IconQuestionCircle","IconArrowDown","IconEditBox","SwapDelegModal","swapDelegModalData","userAddress","ssnstatsList","newDelegAddr","setNewDelegAddr","selectedDelegAddr","setSelectedDelegAddr","txnType","setTxnType","setTabIndex","isEdit","setIsEdit","showHelpBox","setShowHelpBox","showConfirmSendRequestBox","setShowConfirmSendRequestBox","showConfirmRevokeBox","setShowConfirmRevokeBox","showConfirmSwapBox","setShowConfirmSwapBox","showConfirmRejectBox","setShowConfirmRejectBox","tutorialStep","setTutorialStep","validateAddress","decreaseTutorialStep","incrementTutorialStep","toggleConfirmSendRequestBox","convertedTxnType","REQUEST_DELEG_SWAP","REVOKE_DELEG_SWAP","CONFIRM_DELEG_SWAP","REJECT_DELEG_SWAP","handleCloseTutorial","sendTxn","hasBufferedOrRewards","invokerMethod","displayAddr","targetName","lrc","lbdc","deposit_amt_deleg_map","buff_deposit_deleg_map","lrc_o","lrc_o_minus","SwapImg","SwapImg1","SwapImg2","SwapImg3","SwapImg4","SwapImg5","swapAddr","byStr20SwapAddr","includes","msg","isValidSwap","userHasStaked","hasStaked","userHasPendingWithdrawal","pending_withdrawal_map","hasPendingWithdrawal","requestorAddr","rejectDelegSwap","confirmDelegSwap","selectedIndex","onSelect","onSelectTabs","isSsnAddress","DelegatorStatsTable","OperatorStatsTable","Spinner","promiseInProgress","usePromiseTracker","area","CompleteWithdrawalTable","completeWithdrawAmt","PROMISE_GET_DELEG_STATS","aria-controls","data-parent","IconShuffle","IconRefresh","opacity","IconBell","IconCheckboxBlankCircle","RecentTxnDropdown","network","getTransactionText","WarningDashboardBanner","Dashboard","userState","isDelegStatsLoading","blockchainState","networks","walletAddress","setWalletAddress","setBlockchain","isRefreshDisabled","setIsRefreshDisabled","isTxnNotify","setIsTxnNotify","ariaExpanded","setAriaExpanded","recentTransactions","setRecentTransactions","pop","reverse","storedValue","currStorageMap","accessKey","localStorageMap","storeLocalItem","txns","defaultValue","getLocalItem","pollData","MANUAL_REFRESH_DELAY","networkChanger","net","NetworkLabel","ISOLATED_SERVER","PRIVATE","accountStreamChanged","observableAccount","subscribe","bech32","networkStreamChanged","observableNetwork","unsubscribe","DEV","preventDefault","returnValue","logo","badge","content","animation","trigger","arrow","interactive","placement","appendTo","onMount","onHide","autoClose","pauseOnHover","IconNotAuthenticated","Error404","ExplorerStakingPortfolio","PROMISE_GET_EXPLORER_STATS","ExplorerPendingWithdrawalTable","PROMISE_GET_EXPLORER_PENDING_WITHDRAWAL","walletBase16Address","setWalletBase16Address","setDelegStats","stakedNodeList","setStakedNodeList","pendingWithdrawalList","setPendingWithdrawlList","setTotalWithdrawAmt","getWalletAddress","stakedNodesList","contractState","depositDelegList","ssnContractState","delegAmtQaBN","blkNumPendingWithdrawal","blkNumReq","App","exact","path","to","Boolean","hostname","network_config","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","encodeTransactionProto","INS","Bech32AddrLen","isWebHIDSupported","TransportWebHID","isSupported","isWebUSBSupported","TransportWebUSB","list","opened","vendorId","LEDGER_VENDOR_ID","existing","openConnected","request","create","TransportU2F","scrambleKey","decorateAppAPIMethods","getVersion","getPublicKey","Buffer","alloc","writeInt32LE","publicKey","PubKeyByteLen","keyIndex","indexBytes","txnBytes","txn1Bytes","txn1SizeBytes","hostBytesLeftBytes","cb","txnNBytes","txnNSizeBytes","SigByteLen"],"mappings":"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","file":"static/js/main.4828bd5b.chunk.js","sourcesContent":["export enum AccountType {\n    PRIVATEKEY = \"PRIVATEKEY\",\n    KEYSTORE = \"KEYSTORE\",\n    MNEMONIC = \"MNEMONIC\",\n    ZILPAY = \"ZILPAY\",\n    MOONLET = \"MOONLET\",\n    LEDGER = \"LEDGER\",\n    NONE = \"\"\n}\n\n\n// all other constants\nexport enum Constants {\n    MANUAL_REFRESH_DELAY=5000,\n    REFRESH_RATE = 30000,\n    DEFAULT_GAS_PRICE = 2000000000,\n    DEFAULT_GAS_LIMIT = 30000,\n    MAX_GZIL_SUPPLY = 722700,\n    REWARD_BLOCK_COUNT_MAINNET = 2200,\n    REWARD_DS_BLOCK_COUNT_MAINNET = 22,         // NOT IN USE\n    REWARD_BLOCK_COUNT_TESTNET = 200,\n    REWARD_DS_BLOCK_COUNT_TESTNET = 2,          // NOT IN USE\n    REWARD_ZIL_PER_DAY = 2071384,               // ZIL\n    SAMPLE_REWARD_BLOCK_MAINNET = 1166800,\n    SAMPLE_REWARD_BLOCK_TESTNET = 2041000,\n    FINAL_GZIL_REWARD_BLOCK_MAINNET = 1483713,\n    LEDGER_VENDOR_ID = 11415\n}\n\nexport enum Environment {\n    DEV = \"dev\",\n    PROD = \"prod\",\n    STAGE = \"stage\"\n}\n\nexport enum Explorer {\n    DEVEX = \"devex\",\n    VIEWBLOCK = \"viewblock\"\n}\n\nexport enum LedgerIndex {\n    DEFAULT = -1,\n}\n\nexport enum Network {\n    TESTNET = \"testnet\",\n    MAINNET = \"mainnet\",\n    ISOLATED_SERVER = \"isolated_server\",\n    PRIVATE = \"private\"\n}\n\nexport enum NetworkURL {\n    TESTNET = \"https://dev-api.zilliqa.com\",\n    MAINNET = \"https://api.zilliqa.com\",\n    ISOLATED_SERVER = \"https://zilliqa-isolated-server.zilliqa.com\"\n}\n\nexport enum OperationStatus {\n    ERROR = \"ERROR\",\n    COMPLETE = \"COMPLETE\",\n    PENDING = \"PENDING\",\n    IDLE = \"IDLE\",\n}\n\nexport enum PromiseArea {\n    PROMISE_GET_BALANCE = \"PROMISE_GET_BALANCE\",\n    PROMISE_GET_CONTRACT = \"PROMISE_GET_CONTRACT\",\n    PROMISE_GET_DELEG_STATS = \"PROMISE_GET_DELEG_STATS\",\n    PROMISE_GET_DELEG_SWAP_REQUESTS = \"PROMISE_GET_DELEG_SWAP_REQUESTS\",\n    PROMISE_GET_EXPLORER_STATS = \"PROMISE_GET_EXPLORER_STATS\",\n    PROMISE_GET_EXPLORER_PENDING_WITHDRAWAL = \"PROMISE_GET_EXPLORER_PENDING_WITHDRAWAL\",\n    PROMISE_GET_OPERATOR_STATS = \"PROMISE_GET_OPERATOR_STATS\",\n    PROMISE_GET_PENDING_WITHDRAWAL = \"PROMISE_GET_PENDING_WITHDRAWAL\",\n    PROMISE_GET_STAKE_PORTFOLIO = 'PROMISE_GET_STAKE_PORTFOLIO',\n    PROMISE_GET_SSN_STATS = \"PROMISE_GET_SSN_STATS\",\n    PROMISE_WITHDRAW_COMM = \"PROMISE_WITHDRAW_COMM\",\n    PROMISE_LANDING_STATS = \"PROMISE_LANDING_STATS\",\n}\n\nexport enum Role {\n    DELEGATOR = \"DELEGATOR\",\n    OPERATOR = \"OPERATOR\",\n    NONE = \"\",\n}\n\nexport enum SsnStatus {\n    ACTIVE = \"Active\",\n    INACTIVE = \"Below Min. Stake\"\n}\n\nexport enum ProxyCalls {\n    COMPLETE_WITHDRAWAL = \"CompleteWithdrawal\",\n    DELEGATE_STAKE = \"DelegateStake\",\n    REDELEGATE_STAKE = \"ReDelegateStake\",\n    CONFIRM_DELEG_SWAP = \"ConfirmDelegatorSwap\",\n    REJECT_DELEG_SWAP = \"RejectDelegatorSwap\",\n    REQUEST_DELEG_SWAP = \"RequestDelegatorSwap\",\n    REVOKE_DELEG_SWAP = \"RevokeDelegatorSwap\",\n    UPDATE_COMM = \"UpdateComm\",\n    UPDATE_RECV_ADDR = \"UpdateReceivingAddr\",\n    WITHDRAW_COMM = \"WithdrawComm\",\n    WITHDRAW_STAKE_AMT = \"WithdrawStakeAmt\",\n    WITHDRAW_STAKE_REWARDS = \"WithdrawStakeRewards\",\n}\n\nexport enum TransactionType {\n    CLAIM_REWARDS = 1,\n    COMPLETE_STAKE_WITHDRAW = 2,\n    DELEGATE_STAKE = 3,\n    INITIATE_STAKE_WITHDRAW = 4,\n    TRANSFER_STAKE = 5,\n    UPDATE_COMM_RATE = 6,\n    UPDATE_RECV_ADDR = 7,\n    WITHDRAW_COMM = 8,\n    REQUEST_DELEG_SWAP = 9,\n    REVOKE_DELEG_SWAP = 10,\n    CONFIRM_DELEG_SWAP = 11,\n    REJECT_DELEG_SWAP = 12,\n}\n\nexport enum ButtonText {\n    NOT_AVAILABLE = \"Not Available\"\n}\n\n// 'true': disabled all contract call buttons, add banner to dashboard and main page\nexport enum ContractState {\n    IS_PAUSED = \"false\"\n}\n","module.exports = __webpack_public_path__ + \"static/media/swap_img0.4ae3ba02.png\";","module.exports = __webpack_public_path__ + \"static/media/swap_img1.61ffbf7a.png\";","module.exports = __webpack_public_path__ + \"static/media/swap_img2.67cf2790.png\";","module.exports = __webpack_public_path__ + \"static/media/swap_img3.40c58efc.png\";","module.exports = __webpack_public_path__ + \"static/media/swap_img4.a17cd78f.png\";","module.exports = __webpack_public_path__ + \"static/media/swap_img5.44035661.png\";","module.exports = \"data:image/png;base64,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\"","import BN from \"bn.js\";\n\nconst { Zilliqa } = require('@zilliqa-js/zilliqa');\n\nconst KEY_LAST_REWARD_CYCLE = 'lastrewardcycle';\nconst KEY_DIRECT_DEPOSIT_DELEG = 'direct_deposit_deleg';\nconst KEY_BUFF_DEPOSIT_DELEG = 'buff_deposit_deleg';\nconst KEY_STAKE_SSN_PER_CYCLE = 'stake_ssn_per_cycle';\nconst KEY_LAST_WITHDRAW_CYCLE = 'last_withdraw_cycle_deleg'\nconst KEY_DELEG_PER_CYCLE = 'deleg_stake_per_cycle'\n\nexport class RewardCalculator {\n    zilliqa: any;\n    contract: any;\n    last_reward_cycle_json: any;\n\n    constructor(url: String, ssnlist: String) {\n         this.zilliqa = new Zilliqa(url);\n         this.contract = this.zilliqa.contracts.at(ssnlist);\n    }\n\n    // store the required maps first\n    async compute_maps() {\n        this.last_reward_cycle_json = await this.contract.getSubState(KEY_LAST_REWARD_CYCLE);\n    }\n\n    async get_rewards(ssnaddr: string, delegator: string) {\n        const last_withdraw_cycle_map = await this.contract.getSubState(KEY_LAST_WITHDRAW_CYCLE, [delegator.toLowerCase()]);\n        const reward_list = await this.get_reward_cycle_list(last_withdraw_cycle_map, this.last_reward_cycle_json, ssnaddr, delegator);\n        const delegate_per_cycle = await this.combine_buff_direct(ssnaddr,delegator,reward_list);\n        const need_list = await this.get_reward_need_cycle_list(last_withdraw_cycle_map, this.last_reward_cycle_json, ssnaddr, delegator);\n        const rewards = await this.calculate_rewards(ssnaddr,delegate_per_cycle,need_list);\n        return rewards;\n    }\n\n\n    // get reward cycle list\n    async get_reward_cycle_list(last_withdraw_cycle_map: any, last_reward_cycle_json: any, ssnaddr: string, delegator: string) {\n        // remove this\n        // console.log(last_withdraw_cycle_map);\n        \n        if (last_withdraw_cycle_map !== null \n            && last_withdraw_cycle_map[KEY_LAST_WITHDRAW_CYCLE][delegator][ssnaddr] !== undefined) {\n            const last_reward_cycle = Number.parseInt(last_reward_cycle_json[KEY_LAST_REWARD_CYCLE]);\n            let result_list = [];\n            let i =  1;\n            for (i; i <= last_reward_cycle; i++) {\n                result_list.push(i)\n            }\n\n            return result_list;\n\n        } else {\n            return [];\n        }\n    }\n\n    // to get those cycles need to calculte rewards\n    async get_reward_need_cycle_list(last_withdraw_cycle_map: any, last_reward_cycle_json: any, ssnaddr: string, delegator: string) {\n         // get last_reward_cycle;\n        const last_reward_cycle = last_reward_cycle_json[KEY_LAST_REWARD_CYCLE];\n\n        // get last_withdraw_cycle_deleg\n        if (last_withdraw_cycle_map === null) {\n            return [];\n        }\n        const last_withdraw_cycle = last_withdraw_cycle_map[KEY_LAST_WITHDRAW_CYCLE][delegator][ssnaddr];\n\n        // to filter those elements that meet\n        // last_withdraw_cycle < elements <= last_reward_cycle\n        const reward_cycle_list_reverse = await this.get_reward_cycle_list(last_withdraw_cycle_map, last_reward_cycle_json, ssnaddr, delegator);\n        const cycle_need_to_calculate = reward_cycle_list_reverse.filter(c => c > Number.parseInt(last_withdraw_cycle) && c <= Number.parseInt(last_reward_cycle));\n        return cycle_need_to_calculate;\n    }\n\n    // to combine buffered deposit map and direct deposit map\n    // eventually get the actual delegate amount of every cycle for this particular ssn operator\n    async combine_buff_direct(ssnaddr: string, delegator: string, reward_list: number[]) {\n        const result_map = new Map <number, BN>();\n\n        const direct_deposit_json = await this.contract.getSubState(KEY_DIRECT_DEPOSIT_DELEG, [delegator.toLowerCase(), ssnaddr]);\n        const buffer_deposit_json = await this.contract.getSubState(KEY_BUFF_DEPOSIT_DELEG, [delegator.toLowerCase(), ssnaddr]);\n        const deleg_stake_per_cycle_json = await this.contract.getSubState(KEY_DELEG_PER_CYCLE, [delegator.toLowerCase(), ssnaddr]);\n\n        let direct_deposit_map: any = null;\n        let buffer_deposit_map: any = null;\n        let deleg_stake_per_cycle_map: any = null;\n\n        if (direct_deposit_json !== null) {\n            direct_deposit_map = direct_deposit_json[KEY_DIRECT_DEPOSIT_DELEG][delegator.toLowerCase()][ssnaddr];\n        }\n\n        if (buffer_deposit_json !== null) {\n            buffer_deposit_map = buffer_deposit_json[KEY_BUFF_DEPOSIT_DELEG][delegator.toLowerCase()][ssnaddr];\n        }\n\n        if (deleg_stake_per_cycle_json !== null) {\n            deleg_stake_per_cycle_map = deleg_stake_per_cycle_json[KEY_DELEG_PER_CYCLE][delegator.toLowerCase()][ssnaddr];\n        }\n\n        reward_list.forEach((cycle: number) => {\n            // for every reward cycle, we need to get\n            // 1. cycle - 1 in direct deposit\n            // 2. cycle - 2 in buffered deposit\n            // 3. accumulate last result to get total amount for this cycle\n            const c1 = cycle - 1;\n            const c2 = cycle - 2;\n            let hist_amt = new BN(0);\n            if (deleg_stake_per_cycle_map !== null \n                && deleg_stake_per_cycle_map[c1.toString()] !== undefined) {\n                    hist_amt = new BN(deleg_stake_per_cycle_map[c1.toString()]);\n            }\n\n            let dir_amt = new BN(0);\n            if (direct_deposit_map !== null \n                && direct_deposit_map[c1.toString()] !== undefined) {\n                dir_amt = new BN(direct_deposit_map[c1.toString()]);\n            }\n\n            let buf_amt = new BN(0);\n            if (buffer_deposit_map !== null \n                && buffer_deposit_map[c2.toString()] !== undefined) {\n                    buf_amt = new BN(buffer_deposit_map[c2.toString()]);\n            }\n\n            let total_amt_tmp = dir_amt.add(buf_amt);\n            total_amt_tmp = total_amt_tmp.add(hist_amt);\n            const last_amt = result_map.get(c1);\n            if (last_amt !== undefined) {\n                const total_amt = total_amt_tmp.add(last_amt);\n                result_map.set(cycle, total_amt);\n            } else {\n                result_map.set(cycle, total_amt_tmp);\n            }\n        });\n        return result_map;\n    }\n\n\n    async calculate_rewards(ssnaddr: string, delegate_per_cycle: Map<number, BN>, need_list: number[]) {\n        var result_rewards = new BN(0);\n\n        const stake_ssn_per_cycle_map = await this.contract.getSubState(KEY_STAKE_SSN_PER_CYCLE, [ssnaddr]);\n\n        if (stake_ssn_per_cycle_map === null) {\n            return result_rewards;\n        }\n        need_list.forEach((cycle: number) => {\n            const cycle_info = stake_ssn_per_cycle_map[KEY_STAKE_SSN_PER_CYCLE][ssnaddr][cycle];\n            if (cycle_info === undefined) {\n                // no rewards for this cycle, just skip\n            } else {\n                const total_rewards = new BN(cycle_info['arguments'][1]);\n                const total_stake = new BN(cycle_info['arguments'][0]);\n\n                let deleg_amt: any = delegate_per_cycle.get(cycle);\n\n                if (deleg_amt !== undefined) {\n                    const rewards_tmp = deleg_amt.mul(total_rewards);\n                    const rewards = rewards_tmp.div(total_stake);\n                    result_rewards = result_rewards.add(rewards);\n                }\n            }\n        });\n\n        return result_rewards;\n    }\n}","import React from 'react';\n\nfunction DisclaimerModal(props: any) {\n    return (\n        <div id=\"disclaimer-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"disclaimerModalLabel\" aria-hidden=\"true\">\n            <div className=\"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg\" role=\"document\">\n                <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\" id=\"disclaimerModalLabel\">Disclaimer</h5>\n                        <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <p>By participating in the staking of ZILs (Staking Program), each participating individual and organization (\"Participant\") accepts and agrees that, to the extent permitted by law, [Zilliqa] disclaims all liability, damages, cost, loss or expense (including, without limitation, legal fees, costs and expenses) to it in respect of its involvement in the Staking Program. Each Participant should carefully consider all factors involved in participating in the Staking Program, including, but not limited to, those listed below and, to the extent necessary, consult an appropriate professional or other expert (including an expert in cryptographic tokens or blockchain-based software systems). If any of the following considerations are unacceptable to a Participant, that Participant should not be involved in the Staking Program. These considerations are not intended to be exhaustive and should be used as guidance only.</p>\n                        <ul>\n                            <li><p>The Staking Program is an open source protocol made available to the public, and Zilliqa expressly disclaims any liability in respect of any actions, programs, applications, developments, and operations of the Staking Program.</p></li>\n                            <li><p>Hackers, individuals, other malicious groups or organisations may attempt to interfere with the Zilliqa Blockchain System, the ZILs and the Staking Program in a variety of ways such as cryptographic attacks, malware attacks, denial of service attacks, consensus-based attacks, Sybil attacks, smurfing and spoofing.</p></li>\n                            <li><p>The regulatory status of cryptographic tokens, blockchain and distributed ledger technology as well as its applications are unclear or unsettled in many jurisdictions and it is difficult to predict how or whether governments or regulatory agencies may implement changes to law or apply existing regulation with respect to such technology and its applications, including the Zilliqa Blockchain System, the ZILs and the Staking Program.</p></li>\n                            <li><p>The ZILs are not intended to represent any formal or legally binding investment. Cryptographic tokens that possess value in public markets, such as Ether and Bitcoin, have demonstrated extreme fluctuations in price over short periods of time on a regular basis. Participants should be prepared to expect similar fluctuations in the price of the ZILs and Participants may experience a complete and permanent loss of their initial purchase.</p></li>\n                        </ul>\n                        <p>The ZILs are not intended to be securities (or any other regulated instrument) under the laws of any jurisdiction where they are intended to be, or will be, purchased or sold and no action has been or will be taken in any jurisdiction by Zilliqa Research or any of its affiliates that would permit a public offering, or any other offering under circumstances not permitted by applicable law of the ZILs, in any country or jurisdiction where action for that purpose is required. Accordingly, the ZILs may not be offered or sold, directly or indirectly, by any holder, in or from any country or jurisdiction, except in circumstances which will result in compliance with all applicable rules and regulations of any such country or jurisdiction.</p>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-user-action mx-auto d-block shadow-none\" data-dismiss=\"modal\">Okay</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default DisclaimerModal;","import React from 'react'\nimport { toast } from 'react-toastify';\n\nimport 'react-toastify/dist/ReactToastify.css';\n\n// header: short heading desc of the message, e.g. wallet locked\n// advice: action on what to do, e.g. please unlock your wallet\nfunction ToastMsg({header, advice}: any) {\n    return (\n        <div id=\"toast-msg-container\">\n            <span className=\"toast-msg-header\"><strong>{header}</strong></span>\n            <br/>\n            <span className=\"toast-msg-advice\">{advice}</span>\n        </div>\n    );\n}\n\n// type is not used currently\n// prepare for future use cases\nfunction Alert(type: string, header: string, advice: string) {\n    switch (type) {\n        case 'info':\n            return toast.info(<ToastMsg header={header} advice={advice} />);\n        case 'error':\n            return toast.error(<ToastMsg header={header} advice={advice} />);\n        case 'success':\n            return toast.success(<ToastMsg header={header} advice={advice} />);\n        case 'warn':\n            return toast.warn(<ToastMsg header={header} advice={advice} />);\n        default:\n            return toast(<ToastMsg header={header} advice={advice} />);\n    }\n    \n}\n\nexport default Alert;","const IS_DEV_ENV = !process.env.NODE_ENV || process.env.NODE_ENV === \"development\"\n\nexport const logger = function (...args: any) {\n    if (IS_DEV_ENV) {\n        console.log.apply(console, args);\n    }\n}","import { fromBech32Address, validation, Zilliqa } from \"@zilliqa-js/zilliqa\";\nimport { BN, Long } from '@zilliqa-js/util'\nimport { RPCMethod } from \"@zilliqa-js/core\"\nimport { LedgerZilliqa } from \"./ledger-zilliqa\";\nimport { AccountType, Constants, LedgerIndex, NetworkURL, OperationStatus } from \"./util/enum\";\nimport { logger } from \"./util/logger\";\n\nconst { bytes } = require('@zilliqa-js/util');\n\n\nlet zilliqa: Zilliqa = new Zilliqa(\"https://dev-api.zilliqa.com\"); // defaults to testnet, would be updated during login\nlet chainId = 333;\nlet msgVersion = 1;\nlet gasPrice = `${Constants.DEFAULT_GAS_PRICE}` || '2000000000';\nlet gasLimit = `${Constants.DEFAULT_GAS_LIMIT}` || '30000';\n\n\nexport class ZilSigner {\n\n    /**\n     * change the network properties in the zilliqa obj and adjust the gas price accordingly\n     * @param networkURL api url\n     */\n    static changeNetwork = async (networkURL: string): Promise<void> => {\n        // zilliqa.setProvider(new HTTPProvider(networkURL));\n        zilliqa = new Zilliqa(networkURL);\n\n        switch (networkURL) {\n            case NetworkURL.MAINNET: {\n                chainId = 1;\n                break;\n            }\n            case NetworkURL.TESTNET: {\n                chainId = 333;\n                break;\n            }\n            default: {\n                chainId = 333;\n                break;\n            }\n        }\n        await ZilSigner.fetchGasPrice();\n    }\n\n    /**\n     * add a wallet account into the zilliqa obj via keystore\n     * @param keystore      keystore json file\n     * @param passphrase    passphrase to unlock the keystore json if any\n     * @returns wallet address if sucessful, otherwise return error\n     */\n    static addWalletByKeystore = async (keystore: string, passphrase: string) => {\n        try {\n            const address =  await zilliqa.wallet.addByKeystore(keystore, passphrase);\n            return address;\n        } catch (err) {\n            console.error(\"error: add wallet by keystore - \", err);\n            return OperationStatus.ERROR;\n        }\n    }\n\n    /**\n     * create and sign a transaction\n     * @param account   type of account being connected, e.g. zilpay or ledger\n     * @param txParams  txn parameters to be created and signed\n     * @param ledgerIndex ledger index, if using ledger (optional)\n     * @returns the transaction id, otherwise returns error\n     */\n    static sign = async (account: AccountType, txParams: any, ledgerIndex?: number) => {\n        let result = \"\";\n        switch (account) {\n            case AccountType.LEDGER:\n                result = await ZilSigner.ledgerSign(txParams, ledgerIndex!);\n                break;\n            case AccountType.ZILPAY:\n                result = await ZilSigner.zilPaySign(txParams);\n                break;\n            case AccountType.KEYSTORE:\n            case AccountType.PRIVATEKEY:\n            case AccountType.MNEMONIC:\n                result = await ZilSigner.sdkSign(txParams);\n                break;\n            default:\n                console.error(\"error: no such account type - \", account);\n                result = OperationStatus.ERROR;\n                break;\n        }\n        return result;\n    }\n\n    /**\n     * let user adjust the gas price and gas limit for all transactions\n     * @param newGasPrice new gas price to be set in Qa\n     * @param newGasLimit new gas limit to be set\n     */\n    static adjustGas = (newGasPrice: string, newGasLimit: string) => {\n        gasPrice = newGasPrice;\n        gasLimit = newGasLimit;\n    }\n\n    /**\n     * returns the gas fee in Qa\n     */\n    static getGasFees = (): BN => {\n        return new BN(gasLimit.toString()).mul(new BN(gasPrice.toString()));\n    }\n\n    static getDefaultGasPrice = (): string => {\n        return gasPrice;\n    }\n\n    static getDefaultGasLimit = (): string => {\n        return gasLimit;\n    }\n\n    /**\n     * create and sign txn with ledger\n     */\n    private static ledgerSign = async (txParams: any, ledgerIndex: number) => {\n        logger(\"activate ledger signer\");\n        if (ledgerIndex === null || ledgerIndex === LedgerIndex.DEFAULT) {\n            throw new Error(\"no ledger index found\");\n        }\n        const transport = await LedgerZilliqa.getTransport();\n        const ledger = new LedgerZilliqa(transport);\n        const result = await ledger.getPublicAddress(ledgerIndex);\n\n        // get public key\n        let pubKey = result.pubKey;\n\n        // get user base 16 address\n        let userWalletAddress = result.pubAddr;\n        if (validation.isBech32(userWalletAddress)) {\n            userWalletAddress = fromBech32Address(userWalletAddress);\n        }\n\n        logger(\"wallet: \", userWalletAddress);\n\n        // get nonce\n        let nonce = await ZilSigner.getNonce(userWalletAddress);\n\n        try {\n            const txnParams = {\n                version: bytes.pack(chainId, msgVersion),\n                toAddr: txParams.toAddr,\n                amount: `${txParams.amount}`,\n                code: txParams.code,\n                data: txParams.data,\n                gasPrice: new BN(txParams.gasPrice || gasPrice),\n                gasLimit: Long.fromNumber(Number(txParams.gasLimit || gasLimit)),\n                nonce: nonce,\n                pubKey: pubKey,\n                signature: \"\",\n            }\n\n            const signature = await ledger.signTxn(ledgerIndex, txnParams);\n            const signedTx = {\n                ...txnParams,\n                amount: `${txParams.amount}`,\n                gasPrice: `${txParams.gasPrice || gasPrice}`,\n                gasLimit: `${txParams.gasLimit || gasLimit}`,\n                signature\n            }\n            console.log(\"signed tx: \", signedTx);\n\n            // send the signed transaction\n            try {\n                const response = await zilliqa.provider.send(RPCMethod.CreateTransaction, { ...signedTx });\n                if (response.error !== undefined) {\n                    throw new Error(response.error.message)\n                }\n                return response.result.TranID\n            } catch (err) {\n                console.error(\"something is wrong with broadcasting the transaction :%o\", JSON.stringify(err));\n                return OperationStatus.ERROR;\n            }\n\n        } catch (err) {\n            console.error(\"error ledger sign - something is wrong with signing the transaction: %o\", JSON.stringify(err));\n            return OperationStatus.ERROR;\n        \n        } finally {\n            transport.close();\n        }\n    }\n\n    /**\n     * create and sign txn with zilpay\n     */\n    private static zilPaySign = async (txParams: any) => {\n        const zilPay = (window as any).zilPay;\n        const tx = zilliqa.transactions.new(\n            {\n                toAddr: txParams.toAddr,\n                amount: txParams.amount,\n                data: txParams.data,\n                gasPrice: new BN(txParams.gasPrice || gasPrice),\n                gasLimit: Long.fromNumber(Number(txParams.gasLimit || gasLimit)),\n                version: bytes.pack(chainId, msgVersion),\n            },\n            true\n        );\n        console.log(tx);\n\n        try {\n            const txn = await zilPay.blockchain.createTransaction(tx);\n            return txn.ID;\n        } catch (err) {\n            console.error(\"error zilpay sign - something is wrong with broadcasting the transaction: %o\", JSON.stringify(err));\n            return OperationStatus.ERROR;\n        }\n    }\n\n    /**\n     * create and sign txn via vanilla zilliqaJS\n     */\n    private static sdkSign = async (txParams: any) => {\n        const tx = zilliqa.transactions.new(\n            {\n                toAddr: txParams.toAddr,\n                amount: txParams.amount,\n                data: txParams.data,\n                gasPrice: new BN(txParams.gasPrice || gasPrice),\n                gasLimit: Long.fromNumber(Number(txParams.gasLimit || gasLimit)),\n                version: bytes.pack(chainId, msgVersion),\n            },\n            true\n        );\n        console.log(tx);\n\n        try {\n            const txn = await zilliqa.blockchain.createTransaction(tx);\n            return txn.id || '';\n        } catch (err) {\n            console.error(\"error sdk sign - something is wrong with broadcasting the transaction: \", JSON.stringify(err));\n            console.error(err);\n            return OperationStatus.ERROR;\n        }\n    }\n\n    private static getNonce = async (address: string) => {\n        try {\n            const balance = await zilliqa.blockchain.getBalance(address);\n            if (balance.error && balance.error.code === -5) {\n                console.error(\"account has no balance\");\n                return -1;\n            }\n            return parseInt(balance.result.nonce) + 1;\n        } catch (err) {\n            console.error(\"error get nonce from ledger\");\n            console.error(err);\n            return -1;\n        }\n    }\n\n    private static fetchGasPrice = async () => {\n        const minimumGasPrice = await zilliqa.blockchain.getMinimumGasPrice();\n        if (minimumGasPrice.result === undefined) {\n            // something might be wrong with api\n            gasPrice = `${Constants.DEFAULT_GAS_PRICE}`;\n        } else {\n            console.log(\"min gas price from api: \", minimumGasPrice.result);\n            gasPrice = minimumGasPrice.result;\n        }\n        return gasPrice;\n    }\n}","/**\n * helper file to extract info from public/config.js\n */\n\nimport { Environment, Network } from \"./enum\";\n\nconst {\n    api_max_retry_attempt,\n    blockchain_explorer_config, \n    environment_config, \n    networks_config,\n    refresh_rate_config\n} = (window as { [key: string]: any })['config'];\n\n\nexport interface NetworkConfig {\n    proxy: string\n    impl: string\n    blockchain: string\n    node_status: string\n    api_list: []\n}\n\nexport interface Networks {\n    [Network.TESTNET]: NetworkConfig\n    [Network.MAINNET]: NetworkConfig\n    [Network.ISOLATED_SERVER]: NetworkConfig\n    [Network.PRIVATE]: NetworkConfig          // not in used in config.json\n}\n\nexport const getEnvironment = () => {\n    return environment_config;\n}\n\nexport const getBlockchainExplorer = () => {\n    return blockchain_explorer_config;\n}\n\nexport const getRefreshRate = (): number => {\n    return refresh_rate_config;\n}\n\nexport const getApiMaxRetry = () => {\n    return api_max_retry_attempt || 10;\n}\n\n// returns entire networks_config json\n// e.g. networks_config : { testnet: { ... } , mainnet: { ... } }\nexport const getNetworks = (): Networks => {\n    return networks_config;\n}\n\n// return only specfic networks_config section\n// according to environment_config\n// e.g. mainnet : { proxy: \"\", impl: \"\" }\nexport const getNetworkConfigByEnv = (): NetworkConfig => {\n    if (environment_config === Environment.PROD) {\n        return networks_config[Network.MAINNET]\n    }\n    // defaults to testnet\n    return networks_config[Network.TESTNET]\n}","interface DelegStats {\n    globalAPY: string,\n    zilRewards: string,\n    gzilRewards: string,\n    gzilBalance: string,\n    totalDeposits: string,\n}\n\ninterface DelegStakingPortfolioStats {\n    ssnName: string,\n    ssnAddress: string,\n    delegAmt: string,\n    rewards: string,\n}\n\ninterface OperatorStats {\n    name: string\n    stakeAmt: string,\n    bufferedDeposits: string,\n    commRate: string,\n    commReward: string,\n    delegNum: string,\n    receiver: string,\n}\n\ninterface PendingWithdrawStats {\n    amount: string,\n    blkNumCountdown: string,\n    blkNumCheck: string,\n    progress: string,\n}\n\ninterface SsnStats {\n    address: string,\n    name: string,\n    apiUrl: string,\n    stakeAmt: string,\n    bufferedDeposits: string,\n    commRate: string,\n    commReward: string,\n    delegNum: string,\n    status: string,\n}\n\ninterface NodeOptions {\n    address: string,\n    name: string,\n    stakeAmt: string,\n    delegNum: string,\n    commRate: string,\n}\n\ninterface LandingStats {\n    circulatingSupplyStake: string,\n    nodesNum: string,\n    delegNum: string,\n    gzil: string,\n    remainingGzil: string,\n    totalDeposits: string,\n    estRealtimeAPY: string,\n}\n\n// unified interface to hold all staking information\n// that a delegator has selected from dropdown\ninterface StakeModalData {\n    ssnName: string,\n    ssnAddress: string,\n    commRate: string,\n    rewards: string,\n    delegAmt: string,\n}\n\ninterface SwapDelegModalData {\n    swapRecipientAddress: string,\n    requestorList: string[],\n}\n\nexport const initialDelegStats: DelegStats = {\n    globalAPY: '0',\n    zilRewards: '0',\n    gzilRewards: '0',\n    gzilBalance: '0',\n    totalDeposits: '0',\n}\n\nexport const initialLandingStats: LandingStats = {\n    circulatingSupplyStake: '0',\n    nodesNum: '0',\n    delegNum: '0',\n    gzil: '0',\n    remainingGzil: '0',\n    totalDeposits: '0',\n    estRealtimeAPY: '0',\n}\n\nexport const initialOperatorStats: OperatorStats = {\n    name: '',\n    stakeAmt: '0',\n    bufferedDeposits: '0',\n    commRate: '0',\n    commReward: '0',\n    delegNum: '0',\n    receiver: '0',\n}\n\nexport const initialSwapDelegModalData: SwapDelegModalData = {\n    swapRecipientAddress: '',\n    requestorList: []\n}\n\nexport const initialStakeModalData: StakeModalData = {\n    ssnName: '',\n    ssnAddress: '',\n    commRate: '0',\n    rewards: '0',\n    delegAmt: '0',\n}\n\nexport type {\n    DelegStats,\n    DelegStakingPortfolioStats,\n    LandingStats,\n    NodeOptions,\n    OperatorStats,\n    PendingWithdrawStats,\n    SsnStats,\n    StakeModalData,\n    SwapDelegModalData,\n}","import { createSlice } from '@reduxjs/toolkit'\nimport { AccountType, LedgerIndex, OperationStatus, Role } from '../util/enum'\nimport { DelegStakingPortfolioStats, DelegStats, initialDelegStats, initialOperatorStats, initialStakeModalData, initialSwapDelegModalData, OperatorStats, PendingWithdrawStats, StakeModalData, SwapDelegModalData } from '../util/interface';\n\ninterface UserState {\n    address_bech32: string,\n    address_base16: string,\n    account_type: AccountType,\n    authenticated: boolean,\n    balance: string,                                    // zils in Qa\n    gzil_balance: string,\n    complete_withdrawal_amt: string,                    // amount that is allowed to complete withdraw\n    ledger_index: number,\n    role: Role,                                         // actual role\n    selected_role: Role,                                // role that the user selects when signing in\n    deleg_stats: DelegStats,                            // track the delegator stats, i fuser is a delegator\n    deleg_staking_portfolio_list: DelegStakingPortfolioStats[],     // list of ssn info that a delegator has staked with\n    operator_stats: OperatorStats                       // track the operator stats, if user is an operator\n    pending_withdraw_list: PendingWithdrawStats[]       // track pending withdrawals\n    stake_modal_data: StakeModalData                    // hold info about a selected ssn; for dropdown selection use when choosing whether to stake, transfer, claim etc \n    swap_deleg_modal_data: SwapDelegModalData,          // hold delegator swap request\n    is_deleg_stats_loading: OperationStatus,            // delegator stats and staking portfolio status indicator\n    is_operator_stats_loading: OperationStatus          // status indicator for loading operator stats\n}\n\nconst initialState: UserState = {\n    address_bech32: '',\n    address_base16: '',\n    account_type: AccountType.NONE,\n    authenticated: false,\n    balance: '0',\n    gzil_balance: '0',\n    complete_withdrawal_amt: '0',\n    ledger_index: LedgerIndex.DEFAULT,\n    role: Role.NONE,\n    operator_stats: initialOperatorStats,\n    selected_role: Role.NONE,\n    deleg_stats: initialDelegStats,\n    deleg_staking_portfolio_list: [],\n    pending_withdraw_list: [],\n    stake_modal_data: initialStakeModalData,\n    swap_deleg_modal_data: initialSwapDelegModalData,\n    is_deleg_stats_loading: OperationStatus.IDLE,\n    is_operator_stats_loading: OperationStatus.IDLE,\n}\n\n\n/**\n * stores user's wallet information\n */\nconst userSlice = createSlice({\n    name: 'user',\n    initialState: initialState,\n    reducers: {\n        INIT_USER(state, action) {\n            const { address_base16, address_bech32, account_type, authenticated, selected_role } = action.payload\n            state.address_base16 = address_base16.toLowerCase()\n            state.address_bech32 = address_bech32.toLowerCase()\n            state.account_type = account_type\n            state.authenticated = authenticated\n            state.selected_role = selected_role\n        },\n        UPDATE_ADDRESS(state, action) {\n            const { address_base16, address_bech32 } = action.payload\n            state.address_base16 = address_base16.toLowerCase()\n            state.address_bech32 = address_bech32.toLowerCase()\n        },\n        UPDATE_BALANCE(state, action) {\n            const { balance } = action.payload\n            state.balance = balance\n        },\n        UPDATE_COMPLETE_WITHDRAWAL_AMT(state, action) {\n            const { complete_withdrawal_amt } = action.payload\n            state.complete_withdrawal_amt = complete_withdrawal_amt\n        },\n        UPDATE_DELEG_STATS(state, action) {\n            const { deleg_stats } = action.payload\n            state.deleg_stats = deleg_stats\n        },\n        UPDATE_DELEG_PORTFOLIO(state, action) {\n            const { portfolio_list } = action.payload\n            state.deleg_staking_portfolio_list = portfolio_list\n        },\n        UPDATE_GZIL_BALANCE(state, action) {\n            const { gzil_balance } = action.payload\n            state.gzil_balance = gzil_balance\n        },\n        UPDATE_LEDGER_INDEX(state, action) {\n            const { ledger_index } = action.payload\n            state.ledger_index = ledger_index\n        },\n        UPDATE_OPERATOR_STATS(state, action) {\n            const { operator_stats } = action.payload\n            state.operator_stats = operator_stats\n        },\n        UPDATE_PENDING_WITHDRAWAL_LIST(state, action) {\n            const { pending_withdraw_list } = action.payload\n            state.pending_withdraw_list = pending_withdraw_list\n        },\n        UPDATE_ROLE(state, action) {\n            const { role } = action.payload\n            state.role = role\n        },\n        UPDATE_STAKE_MODAL_DATA(state, action) {\n            const { stake_modal } = action.payload\n            state.stake_modal_data = {...stake_modal}\n        },\n        UPDATE_SWAP_DELEG_MODAL(state, action) {\n            const { swap_deleg_modal } = action.payload\n            state.swap_deleg_modal_data = swap_deleg_modal\n        },\n        UPDATE_FETCH_DELEG_STATS_STATUS(state, action) {\n            state.is_deleg_stats_loading = action.payload\n        },\n        UPDATE_FETCH_OPERATOR_STATS_STATUS(state, action) {\n            state.is_operator_stats_loading = action.payload\n        },\n        RESET_USER_STATE(state) {\n            state.address_bech32 = initialState.address_bech32\n            state.address_base16 = initialState.address_base16\n            state.account_type = initialState.account_type\n            state.authenticated = initialState.authenticated\n            state.balance = initialState.balance\n            state.gzil_balance = initialState.gzil_balance\n            state.complete_withdrawal_amt = initialState.complete_withdrawal_amt\n            state.ledger_index = initialState.ledger_index\n            state.role = initialState.role\n            state.deleg_stats = initialState.deleg_stats\n            state.deleg_staking_portfolio_list = initialState.deleg_staking_portfolio_list\n            state.operator_stats = initialState.operator_stats\n            state.pending_withdraw_list = initialState.pending_withdraw_list\n            state.stake_modal_data = initialState.stake_modal_data\n            state.swap_deleg_modal_data = initialState.swap_deleg_modal_data\n            state.is_deleg_stats_loading = initialState.is_deleg_stats_loading\n            state.is_operator_stats_loading = initialState.is_operator_stats_loading\n        },\n        QUERY_AND_UPDATE_BALANCE() {},\n        QUERY_AND_UPDATE_GZIL_BALANCE() {},\n        QUERY_AND_UPDATE_ROLE() {},\n        QUERY_AND_UPDATE_DELEGATOR_STATS() {},\n        QUERY_AND_UPDATE_OPERATOR_STATS() {}, \n        QUERY_AND_UPDATE_USER_STATS() {},\n        POLL_USER_DATA_START() {},\n        POLL_USER_DATA_STOP() {},\n    },\n})\n\nexport const {\n    INIT_USER,\n    QUERY_AND_UPDATE_BALANCE,\n    QUERY_AND_UPDATE_GZIL_BALANCE,\n    QUERY_AND_UPDATE_ROLE,\n    QUERY_AND_UPDATE_DELEGATOR_STATS,\n    QUERY_AND_UPDATE_OPERATOR_STATS,\n    QUERY_AND_UPDATE_USER_STATS,\n    POLL_USER_DATA_START,\n    POLL_USER_DATA_STOP,\n    UPDATE_ADDRESS,\n    UPDATE_BALANCE,\n    UPDATE_COMPLETE_WITHDRAWAL_AMT,\n    UPDATE_DELEG_STATS,\n    UPDATE_DELEG_PORTFOLIO,\n    UPDATE_GZIL_BALANCE,\n    UPDATE_LEDGER_INDEX,\n    UPDATE_OPERATOR_STATS,\n    UPDATE_PENDING_WITHDRAWAL_LIST,\n    UPDATE_ROLE,\n    UPDATE_STAKE_MODAL_DATA,\n    UPDATE_SWAP_DELEG_MODAL,\n    UPDATE_FETCH_DELEG_STATS_STATUS,\n    UPDATE_FETCH_OPERATOR_STATS_STATUS,\n    RESET_USER_STATE,\n} = userSlice.actions\n\nexport default userSlice.reducer;","import { createSlice } from '@reduxjs/toolkit'\nimport { getNetworkConfigByEnv } from '../util/config-json-helper'\n\nexport interface BlockchainState {\n    proxy: string,\n    impl: string,\n    blockchain: string,\n    staking_viewer: string,\n    api_list: [],\n    blockchain_explorer: string,\n    refresh_rate: number,\n    api_max_retry_attempt: number,\n}\n\nconst initialState: BlockchainState = {\n    proxy: '',\n    impl: '',\n    blockchain: '',\n    staking_viewer: '',\n    api_list: [],\n    blockchain_explorer: '',\n    refresh_rate: 300000,\n    api_max_retry_attempt: 10,\n}\n\nconst blockchainSlice = createSlice({\n    name: 'blockchain',\n    initialState: initialState,\n    reducers: {\n        UPDATE_CHAIN_INFO(state, action) {\n            const { proxy, impl, blockchain, staking_viewer, api_list } = action.payload\n            state.proxy = proxy\n            state.impl = impl\n            state.blockchain = blockchain\n            state.staking_viewer = staking_viewer\n            state.api_list = api_list\n        },\n        UPDATE_BLOCKCHAIN_EXPLORER(state, action) {\n            const { blockchain_explorer } = action.payload\n            state.blockchain_explorer = blockchain_explorer\n        },\n        UPDATE_REFRESH_RATE(state, action) {\n            const { refresh_rate } = action.payload\n            state.refresh_rate = refresh_rate\n        },\n        UPDATE_API_MAX_ATTEMPT(state, action) {\n            const { api_max_attempt } = action.payload\n            state.api_max_retry_attempt = api_max_attempt\n        },\n        RESET_BLOCKCHAIN_STATE(state) {\n            // reset config on logout\n            const networkConfig = getNetworkConfigByEnv()\n            state.proxy = networkConfig.proxy\n            state.impl = networkConfig.impl\n            state.blockchain = networkConfig.blockchain\n            state.staking_viewer = networkConfig.node_status\n            state.api_list = networkConfig.api_list\n        },\n        CONFIG_LOADED() {},\n    },\n})\n\nexport const {\n    UPDATE_API_MAX_ATTEMPT,\n    UPDATE_BLOCKCHAIN_EXPLORER,\n    UPDATE_CHAIN_INFO,\n    UPDATE_REFRESH_RATE,\n    RESET_BLOCKCHAIN_STATE,\n    CONFIG_LOADED\n} = blockchainSlice.actions\n\nexport default blockchainSlice.reducer;","/**\n * stores info related to staking, e.g. contract states, staked amount\n */\n\nimport { createSlice } from '@reduxjs/toolkit'\nimport { OperationStatus } from '../util/enum'\nimport { initialLandingStats, LandingStats, NodeOptions, SsnStats } from '../util/interface'\n\n\nexport interface StakingState {\n    gzil_address: string,\n    gzil_total_supply: string,                                  // number of gzils currently minted,\n    min_deleg_stake: string,                                    // min amount to deleg in Qa\n    min_bnum_req: string,                                       // min required block number to allow users to perform complete withdrawal\n    reward_blk_countdown: string,                               // number of blocks before rewards are issued\n    total_stake_amount: string                                  // sum of all stakes in contract Qa\n    ssn_dropdown_list: NodeOptions[]                            // to display ssn list as dropdown options in redeleg modal\n    \n    landing_stats: LandingStats,                                // data for landing stats page \n    ssn_list: SsnStats[],                                       // hold all the list of ssn info\n    \n    is_landing_stats_loading: OperationStatus,                  // landing stats status indicator\n    is_ssn_stats_loading: OperationStatus                       // ssn table status indicator\n}\n\nconst initialState: StakingState = {\n    gzil_address: '',\n    gzil_total_supply: '0',\n    landing_stats: initialLandingStats,\n    min_bnum_req: '0',\n    min_deleg_stake: '0',\n    reward_blk_countdown: '0',\n    total_stake_amount: '0',\n    ssn_dropdown_list: [],\n    ssn_list: [],\n    is_landing_stats_loading: OperationStatus.IDLE,\n    is_ssn_stats_loading: OperationStatus.IDLE,\n}\n\nconst stakingSlice = createSlice({\n    name: 'staking',\n    initialState: initialState,\n    reducers: {\n        UPDATE_GZIL_ADDRESS(state, action) {\n            const { gzil_address } = action.payload\n            state.gzil_address = gzil_address\n        },\n        UPDATE_GZIL_TOTAL_SUPPLY(state, action) {\n            const { gzil_total_supply } = action.payload\n            state.gzil_total_supply = gzil_total_supply\n        },\n        UPDATE_LANDING_STATS(state, action) {\n            const { landing_stats } = action.payload\n            state.landing_stats = landing_stats;\n        },\n        UPDATE_MIN_BNUM_REQ(state, action) {\n            const { min_bnum_req } = action.payload\n            state.min_bnum_req = min_bnum_req\n        },\n        UPDATE_MIN_DELEG(state, action) {\n            const { min_deleg_stake } = action.payload\n            state.min_deleg_stake = min_deleg_stake\n        },\n        UPDATE_REWARD_BLK_COUNTDOWN(state, action) {\n            const { reward_blk_countdown } = action.payload\n            state.reward_blk_countdown = reward_blk_countdown\n        },\n        UPDATE_TOTAL_STAKE_AMOUNT(state, action) {\n            const { total_stake_amount } = action.payload\n            state.total_stake_amount = total_stake_amount\n        },\n        UPDATE_SSN_DROPDOWN_LIST(state, action) {\n            const { dropdown_list } = action.payload\n            state.ssn_dropdown_list = dropdown_list\n        },\n        UPDATE_SSN_LIST(state, action) {\n            const { ssn_list } = action.payload\n            state.ssn_list = ssn_list\n        },\n        UPDATE_FETCH_LANDING_STATS_STATUS(state, action) {\n            state.is_landing_stats_loading = action.payload\n        },\n        UPDATE_FETCH_SSN_STATS_STATUS(state, action) {\n            state.is_ssn_stats_loading = action.payload\n        },\n        PRELOAD_INFO_READY() {},\n        POLL_STAKING_DATA_START() {},\n        POLL_STAKING_DATA_STOP() {},\n        QUERY_AND_UPDATE_STAKING_STATS() {},\n    },\n})\n\nexport const {\n    PRELOAD_INFO_READY,\n    POLL_STAKING_DATA_START,\n    POLL_STAKING_DATA_STOP,\n    QUERY_AND_UPDATE_STAKING_STATS,\n    UPDATE_GZIL_ADDRESS,\n    UPDATE_GZIL_TOTAL_SUPPLY,\n    UPDATE_LANDING_STATS,\n    UPDATE_MIN_BNUM_REQ,\n    UPDATE_MIN_DELEG,\n    UPDATE_REWARD_BLK_COUNTDOWN,\n    UPDATE_TOTAL_STAKE_AMOUNT,\n    UPDATE_SSN_DROPDOWN_LIST,\n    UPDATE_SSN_LIST,\n    UPDATE_FETCH_LANDING_STATS_STATUS,\n    UPDATE_FETCH_SSN_STATS_STATUS\n} = stakingSlice.actions\n\nexport default stakingSlice.reducer;","import { RootState } from \"../store/store\"\n\n// for saga to read from store\nexport const getBlockchain = (state: RootState) => state.blockchain\nexport const getUserState = (state: RootState) => state.user\nexport const getStakingState = (state: RootState) => state.staking","import { call, delay, fork, put, race, select, take, takeLatest } from 'redux-saga/effects';\nimport { logger } from '../util/logger';\nimport { getBlockchain } from './selectors';\nimport { CONFIG_LOADED } from '../store/blockchainSlice';\nimport { POLL_STAKING_DATA_START, POLL_STAKING_DATA_STOP, PRELOAD_INFO_READY, QUERY_AND_UPDATE_STAKING_STATS, UPDATE_FETCH_LANDING_STATS_STATUS, UPDATE_FETCH_SSN_STATS_STATUS, UPDATE_GZIL_ADDRESS, UPDATE_GZIL_TOTAL_SUPPLY, UPDATE_LANDING_STATS, UPDATE_MIN_BNUM_REQ, UPDATE_MIN_DELEG, UPDATE_SSN_DROPDOWN_LIST, UPDATE_SSN_LIST, UPDATE_TOTAL_STAKE_AMOUNT } from '../store/stakingSlice';\nimport { Constants, OperationStatus, SsnStatus } from '../util/enum';\nimport { LandingStats, NodeOptions, SsnStats } from '../util/interface';\nimport { toBech32Address } from '@zilliqa-js/crypto';\nimport { ZilSdk } from '../zilliqa-api';\nimport { convertZilToQa, isRespOk } from '../util/utils';\nimport BigNumber from 'bignumber.js';\nimport { getRefreshRate } from '../util/config-json-helper';\n\nconst MAX_GZIL_SUPPLY = Constants.MAX_GZIL_SUPPLY.toString();\nconst REWARD_ZIL_PER_DAY = Constants.REWARD_ZIL_PER_DAY.toString();\nconst REFRESH_INTERVAL = getRefreshRate();\n\n/**\n * fetch these data only once\n */\nfunction* watchInitOnce() {\n    try {\n        yield put(UPDATE_FETCH_LANDING_STATS_STATUS(OperationStatus.PENDING));\n        console.log(\"fetching preload...\");\n        const { impl } = yield select(getBlockchain);\n\n        const checksumImpl = impl.replace(\"0x\", '')\n        let queries = [\n            [checksumImpl, 'mindelegstake', []],\n            [checksumImpl, 'totalstakeamount', []],\n            [checksumImpl, 'bnum_req', []],\n            [checksumImpl, 'gziladdr', []],\n        ];\n\n        const response: Object = yield call(ZilSdk.getSmartContractSubStateBatch, queries);\n        const mindelegstake = (response as any)[0][\"result\"]['mindelegstake'];\n        const totalstakeamount = (response as any)[1][\"result\"]['totalstakeamount'];\n        const bnum_req = (response as any)[2][\"result\"]['bnum_req'];\n        const gziladdr = (response as any)[3][\"result\"]['gziladdr'];\n\n        logger(\"mindelegstake: %o\", mindelegstake);\n\n        logger(\"totalstakeamount: %o\", totalstakeamount);\n\n        logger(\"bnum req: \", bnum_req);\n\n        const { total_supply } = yield call(ZilSdk.getSmartContractSubState, gziladdr, 'total_supply');\n        logger(\"gziladdr: \", gziladdr);\n        logger(\"gzil minted: \", total_supply);\n\n        // populate landing stats data\n        const { last_withdraw_cycle_deleg } = yield call(ZilSdk.getSmartContractSubState, impl, 'last_withdraw_cycle_deleg');\n        \n        if (isRespOk(last_withdraw_cycle_deleg)) {\n            const { comm_for_ssn } = yield call(ZilSdk.getSmartContractSubState, impl, 'comm_for_ssn');\n            const nodesNum = isRespOk(comm_for_ssn) ? Object.keys(comm_for_ssn).length.toString() : '0';\n            const delegNum = Object.keys(last_withdraw_cycle_deleg).length.toString();\n            \n            let circulatingSupplyStake = '0';\n            const totalCoinSupply: string = yield call(ZilSdk.getTotalCoinSupply);\n            if (isRespOk(totalCoinSupply)) {\n                const totalCoinSupplyBN = new BigNumber(convertZilToQa(totalCoinSupply));\n                circulatingSupplyStake = (new BigNumber(totalstakeamount).dividedBy(totalCoinSupplyBN)).times(100).toFixed(5);\n            }\n\n            // compute remaining gzil percentage\n            const maxGzilSupply = new BigNumber(MAX_GZIL_SUPPLY).shiftedBy(15);\n            const remainGzil = maxGzilSupply.minus(new BigNumber(total_supply));\n            const remainingGzil = (remainGzil.dividedBy(maxGzilSupply)).times(100).toFixed(2);\n            \n            // compute est. APY\n            const temp = new BigNumber(totalstakeamount);\n            const rewardZilPerDay = new BigNumber(convertZilToQa(REWARD_ZIL_PER_DAY));\n            const estAPY = rewardZilPerDay.dividedBy(temp).times(36500).toFixed(2);\n\n            const landingStats: LandingStats = {\n                circulatingSupplyStake: circulatingSupplyStake,\n                nodesNum: nodesNum,\n                delegNum: delegNum,\n                gzil: total_supply,\n                remainingGzil: remainingGzil,\n                totalDeposits: totalstakeamount,\n                estRealtimeAPY: estAPY,\n            }\n            logger(\"landing stats: \", landingStats);\n            yield put(UPDATE_LANDING_STATS({ landing_stats: landingStats }));\n        }\n\n        yield put(UPDATE_MIN_BNUM_REQ({ min_bnum_req: bnum_req }));\n        yield put(UPDATE_MIN_DELEG({ min_deleg_stake: mindelegstake }));\n        yield put(UPDATE_TOTAL_STAKE_AMOUNT({ total_stake_amount: totalstakeamount }));\n        yield put(UPDATE_GZIL_ADDRESS({ gzil_address: gziladdr }));\n        yield put(UPDATE_GZIL_TOTAL_SUPPLY({ gzil_total_supply: total_supply }));\n\n    } catch (e) {\n        console.warn(\"fetch home data failed\");\n        console.warn(e);\n    } finally {\n        yield put(UPDATE_FETCH_LANDING_STATS_STATUS(OperationStatus.COMPLETE));\n        yield put(PRELOAD_INFO_READY()); // inform other saga that preloaded info is in store\n    }\n}\n\nfunction* pollStakingData() {\n    try {\n        yield put(UPDATE_FETCH_SSN_STATS_STATUS(OperationStatus.PENDING));\n        logger(\"fetching ssn data...\");\n        const { impl } = yield select(getBlockchain);\n\n        const checksumImpl = impl.replace(\"0x\", '')\n        let queries = [\n            [checksumImpl, 'ssnlist', []],\n            [checksumImpl, 'ssn_deleg_amt', []],\n        ];\n\n        const response: Object = yield call(ZilSdk.getSmartContractSubStateBatch, queries);\n        const ssnlist = (response as any)[0][\"result\"][\"ssnlist\"];\n        const ssn_deleg_amt = (response as any)[1][\"result\"][\"ssn_deleg_amt\"];\n\n        logger(\"ssnlist: \", ssnlist);\n        logger(\"ssn_deleg_amt: \", ssn_deleg_amt);\n\n        let dropdown_list: NodeOptions[] = [];\n        let ssn_list: SsnStats[] = [];\n        for (const ssnAddress in ssnlist) {\n            const ssnArgs = ssnlist[ssnAddress]['arguments'];\n            const status = (ssnArgs[0]['constructor'] === 'True') ? SsnStatus.ACTIVE : SsnStatus.INACTIVE;\n            let delegNum = '0';\n\n            if (ssn_deleg_amt.hasOwnProperty(ssnAddress)) {\n                delegNum = Object.keys(ssn_deleg_amt[ssnAddress]).length.toString();\n            }\n\n            // for ssn table\n            const ssnStats: SsnStats = {\n                address: toBech32Address(ssnAddress),\n                name: ssnArgs[3],\n                apiUrl: ssnArgs[5],\n                stakeAmt: ssnArgs[1],\n                bufferedDeposits: ssnArgs[6],\n                commRate: ssnArgs[7],\n                commReward: ssnArgs[8],\n                delegNum: delegNum,\n                status: status,\n            }\n\n            // for use as dropdown options in the modals\n            const dropdownOptions: NodeOptions = {\n                address: toBech32Address(ssnAddress),\n                name: ssnArgs[3],\n                stakeAmt: ssnArgs[1],\n                delegNum: delegNum,\n                commRate: ssnArgs[7],\n            }\n\n            ssn_list.push(ssnStats);\n            dropdown_list.push(dropdownOptions);\n        }\n\n        yield put(UPDATE_SSN_DROPDOWN_LIST({ dropdown_list: dropdown_list }));\n        yield put(UPDATE_SSN_LIST({ ssn_list: ssn_list }));\n    } catch (e) {\n        console.warn(\"fetch failed\");\n        yield put(UPDATE_SSN_DROPDOWN_LIST({ dropdown_list: [] }));\n        yield put(UPDATE_SSN_LIST({ ssn_list: [] }));\n    } finally {\n        yield put(UPDATE_FETCH_SSN_STATS_STATUS(OperationStatus.COMPLETE));\n    }\n}\n\n/**\n * reload user data when zilpay change network\n * stop the current poll and resume later\n */\nfunction* queryAndUpdateStats() {\n    yield put(POLL_STAKING_DATA_STOP());\n    yield call(pollStakingData);\n\n    // delay before start to poll again\n    yield delay(REFRESH_INTERVAL);\n    yield put(POLL_STAKING_DATA_START());\n}\n\nfunction* pollStakingSaga() {\n    while (true) {\n        try {\n            yield call(pollStakingData);\n        } catch (e) {\n            console.warn(\"poll staking data failed\");\n            console.warn(e);\n        } finally {\n            yield delay(REFRESH_INTERVAL);\n        }\n    }\n}\n\nfunction* watchPollStakingData() {\n    while (true) {\n        yield take(POLL_STAKING_DATA_START);\n        yield race([\n            call(pollStakingSaga),\n            take(POLL_STAKING_DATA_STOP),\n        ])\n    }\n}\n\nfunction* stakingSaga() {\n    yield take(CONFIG_LOADED) // wait for app to load details from config\n    yield fork(watchInitOnce)\n    \n    yield fork(watchPollStakingData)\n    yield takeLatest(QUERY_AND_UPDATE_STAKING_STATS, queryAndUpdateStats)\n}\n\nexport default stakingSaga;","import { NetworkURL } from \"./enum\";\n\nconst { Random, MersenneTwister19937 } = require(\"random-js\");\nconst randomJS = new Random(MersenneTwister19937.autoSeed());\n\n/**\n * Randomize the API\n * Generate an array of random index of 1...LIST_SIZE from the api list\n * Shuffle the array and retrieve the current index\n */\nexport class ApiRandomizer {\n    private static instance: ApiRandomizer;\n\n    testnetIndex: number;\n    mainnetIndex: number;\n    randTestnetIndexList: number[];\n    randMainnetIndexList: number[];\n    testnetApiList: string[];\n    mainnetApiList: string[];\n\n    private constructor() {\n        this.testnetIndex = 0;\n        this.mainnetIndex = 0;\n        this.testnetApiList = [];\n        this.mainnetApiList = [];\n        this.randTestnetIndexList = [];\n        this.randMainnetIndexList = [];\n    }\n\n    public static getInstance(): ApiRandomizer {\n        if (!ApiRandomizer.instance) {\n            ApiRandomizer.instance = new ApiRandomizer()\n        }\n        return ApiRandomizer.instance;\n    }\n\n    /**\n     * sets the correct api list and fetch a random one according to the network\n     * @param url       blockchan api url to determine which network; url is from config.json => store.blockchain\n     * @param apiList   list of api urls for the specific network for retry purposes; list is from config.json => store.blockchain\n     * @returns         a random api from the apiList\n     */\n    public fetchApi(url: NetworkURL, apiList: string[]) {\n        if (url === NetworkURL.MAINNET && this.mainnetApiList.length === 0) {\n            this.mainnetApiList = (apiList.length > 0) ? [...apiList] : [\"https://api.zilliqa.com\"];\n            this.randMainnetIndexList = randomJS.shuffle(Array.from(Array(this.mainnetApiList.length).keys()));\n        } else if (url === NetworkURL.TESTNET && this.testnetApiList.length === 0) {\n            this.testnetApiList = (apiList.length > 0) ? [...apiList] : [\"https://dev-api.zilliqa.com\"];\n            this.randTestnetIndexList = randomJS.shuffle(Array.from(Array(this.testnetApiList.length).keys()));\n        }\n\n        let maxLen = 0;\n        let randomIndex = 0;\n        let api = \"\";\n\n        if (url === NetworkURL.MAINNET) {\n            randomIndex = this.randMainnetIndexList[this.mainnetIndex];\n            api = this.mainnetApiList[randomIndex];\n            maxLen = this.mainnetApiList.length;\n\n            // prepare the index for the next try\n            this.mainnetIndex = this.mainnetIndex + 1;\n            if (this.mainnetIndex >= maxLen) {\n                this.mainnetIndex = 0;\n            }\n        } else {\n            randomIndex = this.randTestnetIndexList[this.testnetIndex];\n            api = this.testnetApiList[randomIndex];\n            maxLen = this.testnetApiList.length;\n\n            // prepare the index for the next try\n            this.testnetIndex = this.testnetIndex + 1;\n            if (this.testnetIndex >= maxLen) {\n                this.testnetIndex = 0;\n            }\n        }\n\n        return api;\n    }\n}","import store from \"../store/store\";\nimport { ApiRandomizer } from \"./api-randomizer\";\nimport { getApiMaxRetry } from \"./config-json-helper\";\nimport { NetworkURL } from \"./enum\";\n\nconst apiRandomizer = ApiRandomizer.getInstance();\nconst { RewardCalculator } = require('./calculator');\n\n// config.js from public folder\nconst API_MAX_ATTEMPT = getApiMaxRetry();\n\nlet rewardCalculator: typeof RewardCalculator;\n\nexport const computeDelegRewardsExec = async (impl: string, networkURL: string, ssn: string, delegator: string) => {\n    if (!rewardCalculator) {\n        rewardCalculator = new RewardCalculator(networkURL, impl);\n        try {\n            await rewardCalculator.compute_maps();\n        } catch (err) {\n            // error with fetching; api error\n            // set to null to re-declare a new object with a new api\n            rewardCalculator = null;\n            throw err;\n        }\n    }\n\n    return await rewardCalculator.get_rewards(ssn, delegator);\n};\n\nexport const computeDelegRewards = async (impl: string, ssn: string, delegator: string) => {\n    let result;\n\n    for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = apiRandomizer.fetchApi(blockchain as NetworkURL, api_list);\n            result = await computeDelegRewardsExec(impl, randomAPI, ssn, delegator);\n            break;\n        } catch (err) {\n            // error with querying api\n            // retry\n            continue;\n        }\n    }\n    return result;\n};","import { toBech32Address } from '@zilliqa-js/zilliqa';\nimport { BigNumber } from 'bignumber.js';\nimport { all, call, delay, fork, put, race, select, take, takeLatest } from 'redux-saga/effects';\nimport { PRELOAD_INFO_READY, UPDATE_REWARD_BLK_COUNTDOWN } from '../store/stakingSlice';\nimport { INIT_USER, UPDATE_ROLE, UPDATE_BALANCE, UPDATE_GZIL_BALANCE, UPDATE_SWAP_DELEG_MODAL, UPDATE_PENDING_WITHDRAWAL_LIST, UPDATE_COMPLETE_WITHDRAWAL_AMT, UPDATE_OPERATOR_STATS, UPDATE_FETCH_OPERATOR_STATS_STATUS, POLL_USER_DATA_START, POLL_USER_DATA_STOP, QUERY_AND_UPDATE_USER_STATS, UPDATE_DELEG_STATS, UPDATE_DELEG_PORTFOLIO, UPDATE_FETCH_DELEG_STATS_STATUS } from '../store/userSlice';\nimport { getRefreshRate } from '../util/config-json-helper';\nimport { OperationStatus, Role } from '../util/enum';\nimport { DelegStakingPortfolioStats, DelegStats, initialDelegStats, initialOperatorStats, initialSwapDelegModalData, LandingStats, OperatorStats, PendingWithdrawStats, SsnStats, SwapDelegModalData } from '../util/interface';\nimport { logger } from '../util/logger';\nimport { computeDelegRewards } from '../util/reward-calculator';\nimport { calculateBlockRewardCountdown, isRespOk } from '../util/utils';\nimport { ZilSdk } from '../zilliqa-api';\nimport { getUserState, getBlockchain, getStakingState } from './selectors';\n\nconst REFRESH_INTERVAL = getRefreshRate();\n\n/**\n * query the connected wallet's balance and update the balance in the store\n */\nfunction* queryAndUpdateBalance() {\n    logger(\"check balance\");\n    try {\n        const { address_base16 } = yield select(getUserState);\n        const balance: string = yield call(ZilSdk.getBalance, address_base16);\n        logger(\"user balance: \", balance);\n        yield put(UPDATE_BALANCE({ balance: balance }));\n    } catch (e) {\n        console.warn(\"query and update balance failed\");\n        yield put(UPDATE_BALANCE({ balance: \"0\" }));\n    }\n}\n\n/**\n * checks if the connected wallet is an operator or delegator and update the role in the store accordingly\n */\n function* queryAndUpdateRole() {\n    logger(\"check role\");\n    try {\n        const { address_base16, selected_role } = yield select(getUserState);\n        const { impl } = yield select(getBlockchain);\n        const isOperator: boolean = yield call(ZilSdk.isOperator, impl, address_base16);\n\n        let role;\n        if (selected_role === Role.OPERATOR && !isOperator) {\n            console.error(\"user is not operator\");\n            role = Role.DELEGATOR;\n        } else if (selected_role === Role.OPERATOR && isOperator) {\n            role = Role.OPERATOR;\n        } else {\n            // defaults to delegator\n            role = Role.DELEGATOR;\n        }\n        yield put(UPDATE_ROLE({ role: role }));\n    } catch (e) {\n        console.warn(\"query and update role failed\");\n        console.warn(e);\n    }\n}\n\n/**\n * fetch gzil balance\n */\nfunction* queryAndUpdateGzil() {\n    logger(\"check gzil\");\n    try {\n        const { impl } = yield select(getBlockchain);\n        const { address_base16 } = yield select(getUserState);\n        \n        let gzilAddrResolved;\n        const { gzil_address } = yield select(getStakingState);\n        if (gzil_address && gzil_address !== null) {\n            gzilAddrResolved = gzil_address;\n        } else {\n            // gzil_address param might be empty because the store is not updated yet\n            const { gziladdr } = yield call(ZilSdk.getSmartContractSubState, impl, 'gziladdr');\n            gzilAddrResolved = gziladdr;\n        }\n        \n        const response: Object = yield call(ZilSdk.getSmartContractSubState, gzilAddrResolved, 'balances', [address_base16]);\n        logger(\"gzil response: \", response);\n\n        if (!isRespOk(response)) {\n            yield put(UPDATE_GZIL_BALANCE({ gzil_balance: \"0\" }));\n        } else {\n            yield put(UPDATE_GZIL_BALANCE({ gzil_balance: (response as any)['balances'][address_base16] }));\n        }\n    } catch (e) {\n        console.warn(\"query and update gzil failed\");\n        console.warn(e);\n        yield put(UPDATE_GZIL_BALANCE({ gzil_balance: \"0\" }));\n    }\n}\n\n/**\n * populate delegator staking portfolio and delegator stats\n */\nfunction* populateStakingPortfolio() {\n    console.log(\"populate staking portfolio\");\n    try {\n        const { address_base16, gzil_balance } = yield select(getUserState);\n        const { impl } = yield select(getBlockchain);\n        const response: Object = yield call(ZilSdk.getSmartContractSubState, impl, 'deposit_amt_deleg', [address_base16]);\n        logger(\"deposit deleg list: \", response);\n\n        const { landing_stats, ssn_list } = yield select(getStakingState);\n        const depositAmtDeleg = (isRespOk(response) === true) ? (response as any)['deposit_amt_deleg'][address_base16] : null;\n        let staking_portfolio_list: DelegStakingPortfolioStats[] = [];\n        let totalDeposits = new BigNumber(0);\n        let totalRewards = new BigNumber(0);\n        \n        for (const ssnAddress in depositAmtDeleg) {\n            // compute total deposits\n            const deposit = new BigNumber(depositAmtDeleg[ssnAddress]);\n            totalDeposits = totalDeposits.plus(deposit);\n\n            // compute zil rewards\n            const delegRewards: string = yield call(computeDelegRewards, impl, ssnAddress, address_base16)\n            const rewards = new BigNumber(delegRewards);\n            totalRewards = totalRewards.plus(rewards);\n\n            const ssnAddressBech32 = toBech32Address(ssnAddress);\n            const stakingStats: DelegStakingPortfolioStats = {\n                ssnName: (ssn_list as SsnStats[]).find(ssn => ssn.address === ssnAddressBech32)?.name || '',\n                ssnAddress: ssnAddressBech32,\n                delegAmt: `${deposit}`,\n                rewards: `${rewards}`,\n            }\n            staking_portfolio_list.push(stakingStats);\n        }\n\n        logger(\"staking portfolio: \", staking_portfolio_list);\n\n        const delegStats: DelegStats = {\n            globalAPY: (landing_stats as LandingStats).estRealtimeAPY,\n            gzilBalance: gzil_balance,\n            gzilRewards: `${totalRewards}`,\n            zilRewards: `${totalRewards}`,\n            totalDeposits: `${totalDeposits}`\n        }\n\n        yield put(UPDATE_DELEG_STATS({ deleg_stats: delegStats }));\n        yield put(UPDATE_DELEG_PORTFOLIO({ portfolio_list: staking_portfolio_list }));\n    } catch (e) {\n        console.warn(\"populate staking portfolio failed\");\n        console.warn(e);\n        yield put(UPDATE_DELEG_STATS({ deleg_stats: initialDelegStats }));\n        yield put(UPDATE_DELEG_PORTFOLIO({ portfolio_list: [] }));\n    }\n}\n\n/**\n * popoulate swap deleg requests\n */\nfunction* populateSwapRequests() {\n    console.log(\"populate swap requests\");\n    try {\n        const { address_base16 } = yield select(getUserState);\n        const { impl } = yield select(getBlockchain);\n        const { deleg_swap_request } = yield call(ZilSdk.getSmartContractSubState, impl, 'deleg_swap_request');\n\n        let swapRecipientAddress = '';\n        let requestorList: any = [];\n        \n        if (address_base16 in deleg_swap_request) {\n            swapRecipientAddress = deleg_swap_request[address_base16];\n        }\n\n        // get the list of requestors that is pending for this wallet to accept\n        // reverse the mapping\n        let reverseMap = Object.keys(deleg_swap_request).reduce((newMap: any, k) => {\n            let receipientAddr = deleg_swap_request[k];\n            newMap[receipientAddr] = newMap[receipientAddr] || [];\n            newMap[receipientAddr].push(k)\n            return newMap;\n        }, {});\n\n        if (address_base16 in reverseMap) {\n            requestorList = reverseMap[address_base16];\n        }\n\n        const swapDelegModal : SwapDelegModalData = {\n            swapRecipientAddress: swapRecipientAddress,\n            requestorList: requestorList\n        }\n\n        yield put(UPDATE_SWAP_DELEG_MODAL({ swap_deleg_modal: swapDelegModal }));\n    } catch (e) {\n        console.warn(\"populate swap requests failed\");\n        console.warn(e);\n        yield put(UPDATE_SWAP_DELEG_MODAL({ swap_deleg_modal: initialSwapDelegModalData }));\n    }\n}\n\n/**\n * populate pending withdrawal\n */\nfunction* populatePendingWithdrawal() {\n    console.log(\"populate pending withdrawal\");\n    try {\n        const { address_base16 } = yield select(getUserState);\n        const { impl } = yield select(getBlockchain);\n        const response: Object = yield call(ZilSdk.getSmartContractSubState, impl, 'withdrawal_pending', [address_base16]);\n\n        logger(\"pending withdrawal: \", response);\n\n        if (!isRespOk(response)) {\n            throw new Error(\"no pending withdrawal for address\");\n        }\n\n        let progress = '0';\n        let pendingWithdrawList: PendingWithdrawStats[] = [];\n        let totalWithdrawAmt = new BigNumber(0);\n        const pendingWithdrawal = (response as any)['withdrawal_pending'][address_base16];\n        const { min_bnum_req } = yield select(getStakingState);\n        const numTxBlk: string = yield call(ZilSdk.getNumTxBlocks);\n        const currBlkNum = isRespOk(numTxBlk) === true ? new BigNumber(numTxBlk).minus(1) : new BigNumber(0);\n\n        for (const blkNum in pendingWithdrawal) {\n            // compute each pending stake withdrawal progress\n            let pendingAmt = new BigNumber(pendingWithdrawal[blkNum]);\n            let blkNumCheck = new BigNumber(blkNum).plus(min_bnum_req);\n            let blkNumCountdown = blkNumCheck.minus(currBlkNum); // may be negative\n            let completed = new BigNumber(0);\n\n            // compute progress using blk num countdown ratio\n            if (blkNumCountdown.isLessThanOrEqualTo(0)) {\n                // can withdraw\n                totalWithdrawAmt = totalWithdrawAmt.plus(pendingAmt)\n                blkNumCountdown = new BigNumber(0);\n                completed = new BigNumber(1);\n            } else {\n                // still have pending blks\n                // 1 - (countdown/blk_req)\n                const processed = blkNumCountdown.dividedBy(min_bnum_req);\n                completed = new BigNumber(1).minus(processed);\n            }\n\n            // convert progress to percentage\n            progress = completed.times(100).toFixed(2);\n\n            pendingWithdrawList.push({\n                amount: `${pendingAmt}`,\n                blkNumCountdown: `${blkNumCountdown}`,\n                blkNumCheck: `${blkNumCheck}`,\n                progress: `${progress}`\n            } as PendingWithdrawStats)\n        }\n        logger(pendingWithdrawList);\n        \n        yield put(UPDATE_PENDING_WITHDRAWAL_LIST({ pending_withdraw_list: pendingWithdrawList }));\n        yield put(UPDATE_COMPLETE_WITHDRAWAL_AMT({ complete_withdrawal_amt: `${totalWithdrawAmt}` }));\n    } catch (e) {\n        console.warn(\"populate pending withdrawal failed\");\n        yield put(UPDATE_PENDING_WITHDRAWAL_LIST({ pending_withdraw_list: [] }));\n        yield put(UPDATE_COMPLETE_WITHDRAWAL_AMT({ complete_withdrawal_amt: \"0\" }));\n    }\n}\n\n/**\n * populate number of blocks before rewards are issued\n * for deleg stats\n */\nfunction* populateRewardBlkCountdown() {\n    try {\n        const { blockchain } = yield select(getBlockchain);\n        let rewardBlkCountdown = 0;\n        const numTxBlk: string = yield call(ZilSdk.getNumTxBlocks);\n\n        if (isRespOk(numTxBlk)) {\n            const currBlkNum = parseInt(numTxBlk) - 1;\n            rewardBlkCountdown = yield call(calculateBlockRewardCountdown, currBlkNum, blockchain)\n        }\n        yield put(UPDATE_REWARD_BLK_COUNTDOWN({ reward_blk_countdown: `${rewardBlkCountdown}` }))\n    } catch (e) {\n        console.warn(\"populate reward blk countdown failed\");\n        yield put(UPDATE_REWARD_BLK_COUNTDOWN({ reward_blk_countdown: \"0\" }))\n    }\n}\n\nfunction* pollDelegatorData() {\n    yield fork(populateStakingPortfolio)\n    yield fork(populateSwapRequests)\n    yield fork(populatePendingWithdrawal)\n    yield fork(populateRewardBlkCountdown)\n}\n\nfunction* populateOperatorStats() {\n    console.log(\"populate operator stats\");\n    try {\n        yield put(UPDATE_FETCH_OPERATOR_STATS_STATUS(OperationStatus.PENDING));\n\n        const { impl } = yield select(getBlockchain);\n        const { address_base16 } = yield select(getUserState);\n        const response: Object = yield call(ZilSdk.getSmartContractSubState, impl, 'ssnlist', [address_base16]);\n\n        if (!isRespOk(response)) {\n            throw new Error(\"no such operator\");\n        }\n\n        const ssnInfo = (response as any)['ssnlist'][address_base16];\n        const ssnArgs = ssnInfo['arguments'];\n        \n        // get number of deleg\n        const delegQuery: Object = yield call(ZilSdk.getSmartContractSubState, impl, 'ssn_deleg_amt', [address_base16]);\n        const delegNum = isRespOk(delegQuery) === true ? Object.keys((delegQuery as any)['ssn_deleg_amt'][address_base16]).length : 0;\n\n        const operatorStats: OperatorStats = {\n            name: ssnArgs[3],\n            stakeAmt: ssnArgs[1],\n            bufferedDeposits: ssnArgs[6],\n            commRate: ssnArgs[7],\n            commReward: ssnArgs[8],\n            delegNum: `${delegNum}`,\n            receiver: toBech32Address(ssnArgs[9]),\n        }\n\n        yield put(UPDATE_OPERATOR_STATS({ operator_stats: operatorStats }));\n    } catch (e) {\n        console.warn(\"populate operator stats failed\");\n        yield put(UPDATE_OPERATOR_STATS({ operator_stats: initialOperatorStats }));\n    } finally {\n        yield put(UPDATE_FETCH_OPERATOR_STATS_STATUS(OperationStatus.COMPLETE));\n    }\n}\n\nfunction* pollOperatorData() {\n    yield fork(populateOperatorStats)\n}\n\n/**\n * reload user data when zilpay change account\n * stop the current poll and resume back later\n */\nfunction* queryAndUpdateStats() {\n    yield put(POLL_USER_DATA_STOP());\n    yield put(UPDATE_FETCH_DELEG_STATS_STATUS(OperationStatus.PENDING));\n    \n    yield all([\n        call(queryAndUpdateRole),\n        call(queryAndUpdateBalance),\n        call(queryAndUpdateGzil),\n    ]);\n\n    const { role } = yield select(getUserState);\n    if (role === Role.OPERATOR) {\n        yield call(pollOperatorData)\n    } else {\n        yield call(pollDelegatorData)\n    }\n\n    yield put(UPDATE_FETCH_DELEG_STATS_STATUS(OperationStatus.COMPLETE));\n    // delay before start to poll again\n    yield delay(REFRESH_INTERVAL);\n    yield put(POLL_USER_DATA_START());\n}\n\nfunction* pollUserSaga() {\n    while (true) {\n        try {\n            yield put(UPDATE_FETCH_DELEG_STATS_STATUS(OperationStatus.PENDING));\n\n            const { role } = yield select(getUserState);\n            if (role === Role.OPERATOR) {\n                yield call(pollOperatorData)\n            } else {\n                yield call(pollDelegatorData)\n            }\n        } catch (e) {\n            console.warn(\"poll user data failed\");\n        } finally {\n            yield put(UPDATE_FETCH_DELEG_STATS_STATUS(OperationStatus.COMPLETE));\n            yield delay(REFRESH_INTERVAL);\n        }\n    }\n}\n\nfunction* watchPollUserData() {\n    while (true) {\n        yield take(POLL_USER_DATA_START);\n        yield race([\n            call(pollUserSaga),\n            take(POLL_USER_DATA_STOP),\n        ]);\n    }\n}\n\nfunction* userSaga() {\n    yield take(INIT_USER)\n    yield takeLatest(QUERY_AND_UPDATE_USER_STATS, queryAndUpdateStats)\n\n    yield take([PRELOAD_INFO_READY, UPDATE_ROLE])\n    yield fork(watchPollUserData)\n}\n\nexport default userSaga;","import createSagaMiddleware from 'redux-saga';\nimport stakingSaga from './stakingSaga';\nimport userSaga from './userSaga';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport function startSagas() {\n    sagaMiddleware.run(stakingSaga);\n    sagaMiddleware.run(userSaga);\n    // sagaMiddleware.run(preloadSaga);\n    // sagaMiddleware.run(otherSaga)\n}\n\nexport default sagaMiddleware;","import { configureStore, getDefaultMiddleware, Middleware } from '@reduxjs/toolkit'\n\nimport userReducer from '../store/userSlice'\nimport blockchainReducer from '../store/blockchainSlice'\nimport stakingReducer from '../store/stakingSlice'\nimport sagaMiddleware, { startSagas } from '../saga'\n\nconst IS_DEV_ENV = !process.env.NODE_ENV || process.env.NODE_ENV === \"development\"\nconst middlewares: Middleware[] = [...getDefaultMiddleware(), sagaMiddleware]\n\nconst store = configureStore({\n    reducer: {\n        user: userReducer,\n        blockchain: blockchainReducer,\n        staking: stakingReducer,\n    },\n    devTools: IS_DEV_ENV,\n    middleware: middlewares\n})\n\nstartSagas()\n\nexport default store\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch","import { Zilliqa } from \"@zilliqa-js/zilliqa\";\nimport store from \"./store/store\";\nimport { ApiRandomizer } from \"./util/api-randomizer\";\nimport { getApiMaxRetry } from \"./util/config-json-helper\";\nimport { NetworkURL, OperationStatus } from \"./util/enum\";\nimport { logger } from \"./util/logger\";\n\nconst API_MAX_ATTEMPT = getApiMaxRetry();\nconst API_RANDOMIZER = ApiRandomizer.getInstance();\n\nexport class ZilSdk {\n\n    /**\n     * query the contract state using random api via batch JSON-RPC\n     * @param queryList an array of array in the form [ [impl_address, contract_field, [indices], [impl_address, contract_field2, [indices]] ] ]\n     */\n    static getSmartContractSubStateBatch = async (queryList: any[]): Promise<any> => {\n        let result;\n        for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n            result = await ZilSdk.getActualSmartContractSubStateBatch(queryList);\n            if (result !== OperationStatus.ERROR) {\n                break;\n            }\n        }\n        return result;\n    }\n\n    private static getActualSmartContractSubStateBatch = async (queryList: any[]): Promise<any> => {\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = API_RANDOMIZER.fetchApi(blockchain as NetworkURL, api_list);\n            const zilliqa = new Zilliqa(randomAPI);\n\n            let response: any = await zilliqa.blockchain.getSmartContractSubStateBatch(queryList);\n\n            if (!response.hasOwnProperty(\"batch_result\") || response.batch_result === undefined) {\n                return OperationStatus.ERROR;\n            }\n\n            // sort response by id in ascending order\n            return response.batch_result.sort(function (a: any, b: any) {\n                return (a.id - b.id);\n            });\n\n        } catch (err) {\n            console.error(err);\n            return OperationStatus.ERROR;\n        }\n    }\n\n    /**\n     * query the contract state using random api\n     * retry if there is an error in the response\n     */\n    static getSmartContractSubState = async (impl: string, state: string, indices?: any): Promise<any> => {\n        let result;\n        for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n            result = await ZilSdk.getActualSmartContractSubState(impl, state, indices);\n            if (result !== OperationStatus.ERROR) {\n                break;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * query the wallet balance\n     * \n     * @param address wallet address in base16 or bech32 format\n     * @returns amount in zils, returns '0' if the balance cannot be found after max attempt\n     */\n    static getBalance = async (address: string): Promise<string> => {\n        let result;\n        for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n            result = await ZilSdk.getActualBalance(address);\n            if (result !== OperationStatus.ERROR) {\n                break;\n            }\n        }\n        if (result === OperationStatus.ERROR) {\n            // still fail after max attempt\n            return \"0\";\n        }\n        return result;\n    }\n\n    /**\n     * query the current number of tx blocks\n     */\n    static getNumTxBlocks = async () => {\n        let result;\n        for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n            result = await ZilSdk.getActualNumTxBlocks();\n            if (result !== OperationStatus.ERROR) {\n                break;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * fetch the total zil coin supply\n     */\n    static getTotalCoinSupply = async (): Promise<any> => {\n        let result;\n        for (let attempt = 0; attempt < API_MAX_ATTEMPT; attempt++) {\n            result = await ZilSdk.getActualTotalCoinSupply();\n            if (result !== OperationStatus.ERROR) {\n                break;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * checks if the connected wallet is a node operator\n     * \n     * @param impl      contract implementation address\n     * @param address   base16 wallet address to check\n     * @returns true if the connected wallet is a node operator, false otherwise\n     */\n    static isOperator = async (impl: string, address: string): Promise<any> => {\n        if (!impl || !address) {\n            return false;\n        }\n        logger(\"check is operator: \", address);\n        const response = await ZilSdk.getSmartContractSubState(impl, \"ssnlist\", [address]);\n\n        if (!response || response === null || response === OperationStatus.ERROR) {\n            return false;\n        }\n        return true;\n    }\n\n    private static getActualNumTxBlocks = async () => {\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = API_RANDOMIZER.fetchApi(blockchain as NetworkURL, api_list);\n            const zilliqa = new Zilliqa(randomAPI);\n            const response =  await zilliqa.blockchain.getBlockChainInfo();\n\n            if (!response.hasOwnProperty(\"result\") || response.result === undefined) {\n                return OperationStatus.ERROR;\n            }\n            return response.result.NumTxBlocks;\n        } catch (err) {\n            return OperationStatus.ERROR;\n        }\n    }\n\n    private static getActualTotalCoinSupply = async () => {\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = API_RANDOMIZER.fetchApi(blockchain as NetworkURL, api_list);\n            const zilliqa = new Zilliqa(randomAPI);\n            const response =  await zilliqa.blockchain.getTotalCoinSupply();\n\n            if (!response.hasOwnProperty(\"result\") || response.result === undefined) {\n                return OperationStatus.ERROR;\n            }\n            return response.result;\n        } catch (err) {\n            return OperationStatus.ERROR;\n        }\n    }\n\n    private static getActualBalance = async (address: string) => {\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = API_RANDOMIZER.fetchApi(blockchain as NetworkURL, api_list);\n            const zilliqa = new Zilliqa(randomAPI);\n            const response =  await zilliqa.blockchain.getBalance(address);\n\n            if (!response.hasOwnProperty(\"result\") || response.result.balance === undefined) {\n                return \"0\";\n            }\n            return response.result.balance;\n        } catch (err) {\n            return OperationStatus.ERROR;\n        }\n    }\n    \n    /**\n     * Get smart contract sub state with a new zilliqa object\n     * sets the network but doesn't affect the rest of the zilliqa calls such as sending transaction\n     * which depends on the main zilliqa object\n     * \n     * @param impl      implementation contract in checksum format\n     * @param state     name of the variable in the contract\n     * @param indices   JSOn array to specify the indices if the variable is a map type\n     */\n    private static getActualSmartContractSubState = async (impl: string, state: string, indices?: any) => {\n        if (!impl) {\n            console.error(\"error: get contract sub state - no implementation contract found\");\n            return OperationStatus.ERROR;\n        }\n\n        try {\n            const { blockchain, api_list }  = store.getState().blockchain\n            const randomAPI = API_RANDOMIZER.fetchApi(blockchain as NetworkURL, api_list);\n            const zilliqa = new Zilliqa(randomAPI);\n\n            let response: any = null;\n            if (indices !== null) {\n                response = await zilliqa.blockchain.getSmartContractSubState(impl, state, indices);\n            } else {\n                response = await zilliqa.blockchain.getSmartContractSubState(impl, state);\n            }\n\n            if (!response.hasOwnProperty(\"result\") || response.result === undefined) {\n                return OperationStatus.ERROR;\n            }\n            return response.result;\n            \n        } catch (err) {\n            console.error(err);\n            return OperationStatus.ERROR;\n        }\n    }\n}","import { toBech32Address, fromBech32Address } from '@zilliqa-js/crypto';\nimport { Explorer, NetworkURL, Network, TransactionType, AccountType, Constants, OperationStatus } from './enum';\nimport Alert from '../components/alert';\nimport { ZilSigner } from '../zilliqa-signer';\nimport { getBlockchainExplorer } from './config-json-helper';\nimport { SsnStats } from './interface';\nimport { ZilSdk } from '../zilliqa-api';\nconst { BN, validation, units } = require('@zilliqa-js/util');\nconst BigNumber = require('bignumber.js');\n\n\n// config.js from public folder\nconst blockchain_explorer_config = getBlockchainExplorer();\n\nexport const bech32ToChecksum = (address: string) => {\n    if (validation.isAddress(address)) {\n        // convert to checksum format\n        return fromBech32Address(toBech32Address(address))\n    }\n\n    if (validation.isBech32(address)) {\n        return fromBech32Address(address);\n    }\n    return address;\n};\n\nexport const convertBase16ToBech32 = (address: string) => {\n    if (validation.isAddress(address)) {\n        return toBech32Address(address);\n    }\n    return address;\n}\n\nexport const convertZilToQa = (amount: string) => {\n    return units.toQa(amount, units.Units.Zil);\n};\n\n// convert from sdk \"float\" representation to percentage\n// sdk \"float\" is represented in 1e7 format\nexport const convertToProperCommRate = (rate: string) => {\n    if (!rate) {\n        return 0;\n    }\n    let commRate = new BigNumber(rate).dividedBy(10**7);\n    return commRate;\n};\n\n// compute the total stake amount using the list of ssnlist stake\n// used for ssn-table because if we depend on the totalstakeamount fetch from the saga\n// the update would delay, causing a issue where totalstakeamount is 0\nexport const computeTotalStakeAmt = (ssnlist: SsnStats[]) => {\n    let totalStakeAmt = new BigNumber(0);\n    for (const ssnstats of ssnlist) {\n        totalStakeAmt = totalStakeAmt.plus(new BigNumber(ssnstats.stakeAmt));\n    }\n    return totalStakeAmt;\n}\n\n// compute the stake amount as a percentage of total stake amount\n// returns a BigNumber\nexport const computeStakeAmtPercent = (inputStake: string, totalStake: string) => {\n    if (!inputStake || !totalStake || totalStake === '0') {\n        return 0;\n    }\n    const inputStakeBN = new BigNumber(inputStake);\n    const totalStakeBN = new BigNumber(totalStake);\n    const stakePercentage = inputStakeBN.dividedBy(totalStakeBN).times(100);\n    return stakePercentage;\n}\n\n// checks if input contains only postive numbers\n// returns true if so, otherwise returns false\nexport const isDigits = (input: string) => {\n    return /^\\d+$/.test(input);\n}\n\nexport const computeGasFees = (gasPrice: string, gasLimit: string) => {\n    // console.log(\"compute gas fees util: \", gasPrice);\n    // console.log(\"compute gas limit util: \", gasLimit);\n    return new BN(gasPrice.toString()).mul(new BN(gasLimit.toString()));\n}\n\n// convert commission rate from percentage to contract comm rate\n// userInputRate is a float\n// returns a big number\nexport const percentToContractCommRate = (userInputRate: string) => {\n    if (!userInputRate) {\n        return 0;\n    }\n    let scillaFloat = new BigNumber(userInputRate).times(10**7);\n    return scillaFloat;\n};\n\n// convert balances and other numbers into string\n// with commas as thousand separators and decimals places\nexport const convertQaToCommaStr = (inputVal: string) => {\n    let zil = units.fromQa(new BN(inputVal), units.Units.Zil);\n    let zilProperDecimalStr = new BigNumber(zil).toFixed(3);\n    const splitAmt = zilProperDecimalStr.split('.');\n    \n    // add comma separator to front part\n    let frontAmt = splitAmt[0].replace(/(.)(?=(\\d{3})+$)/g,'$1,')\n    let backAmt = splitAmt[1];\n    return frontAmt + \".\" + backAmt;\n}\n\n// show the full zil amount\nexport const convertQaToZilFull = (amount: string) => {\n    let result = \"0.00\";\n    try {\n        result = units.fromQa(new BN(amount), units.Units.Zil);\n    } catch (err) {\n        result = \"0.00\";\n    }\n    return result;\n}\n\n// convert gzil amount in 15 decimal places to a comma represented string\nexport const convertGzilToCommaStr = (inputVal: string) => {\n    const gzil = new BigNumber(inputVal).shiftedBy(-15).toFixed(3);\n    const splitAmt = gzil.split('.');\n\n    // add comma separator to front part\n    let frontAmt = splitAmt[0].replace(/(.)(?=(\\d{3})+$)/g,'$1,')\n    let backAmt = splitAmt[1];\n    return frontAmt + \".\" + backAmt;\n}\n\nexport const convertNetworkUrlToLabel = (url: string) => {\n    let label = '';\n    switch (url) {\n        case NetworkURL.MAINNET:\n            label = Network.MAINNET;        \n            break;\n        case NetworkURL.TESTNET:\n            label = Network.TESTNET;\n            break;\n        default:\n            label = Network.TESTNET;\n            break;\n    }\n    return label;\n}\n\nexport const getTxnLink = (txnId: string, networkURL: string) => {\n    let link = \"\";\n\n    if (blockchain_explorer_config === Explorer.VIEWBLOCK) {\n        if (networkURL === NetworkURL.MAINNET) {\n            link = \"https://viewblock.io/zilliqa/tx/0x\" + txnId\n        } else {\n            link = \"https://viewblock.io/zilliqa/tx/0x\" + txnId  + \"?network=testnet\"\n        }\n    } else {\n        // devex\n        link = \"https://devex.zilliqa.com/tx/0x\" + txnId + \"?network=\" + networkURL;\n    }\n\n    return link;\n}\n\nexport const getAddressLink = (address: string, networkURL: string) => {\n    let link = \"\";\n\n    if (blockchain_explorer_config === Explorer.VIEWBLOCK) {\n        if (networkURL === NetworkURL.MAINNET) {\n            link = \"https://viewblock.io/zilliqa/address/\" + address\n        } else {\n            link = \"https://viewblock.io/zilliqa/address/\" + address  + \"?network=testnet\"\n        }\n    } else {\n        // devex\n        link = \"https://devex.zilliqa.com/address/\" + address + \"?network=\" + networkURL;\n    }\n    \n    return link;\n}\n\nexport const getZillionExplorerLink = (address: string) => {\n    let domain = window.location.origin;\n    return domain + \"/address/\" + address;\n}\n\n// returns the zil address with '...'\nexport const getTruncatedAddress = (address: string) => {\n    if (!address) {\n        return \"\";\n    }\n    const addressLen = address.length;\n    const front = address.substring(0, 6);\n    const end = address.substring(addressLen-4);\n    return front.concat(\"...\", end);\n}\n\nexport const getTransactionText = (txnType: TransactionType) => {\n    switch (txnType) {\n        case TransactionType.CLAIM_REWARDS:\n            return \"Claim Rewards\";\n        case TransactionType.COMPLETE_STAKE_WITHDRAW:\n            return \"Complete Stake Withdrawal\";\n        case TransactionType.DELEGATE_STAKE:\n            return \"Delegate Stake\";\n        case TransactionType.INITIATE_STAKE_WITHDRAW:\n            return \"Initiate Stake Withdrawal\";\n        case TransactionType.TRANSFER_STAKE:\n            return \"Transfer Stake\";\n        case TransactionType.UPDATE_COMM_RATE:\n            return \"Update Commission Rate\";\n        case TransactionType.UPDATE_RECV_ADDR:\n            return \"Update Receiving Address\";\n        case TransactionType.WITHDRAW_COMM:\n            return \"Withdraw Commission\";\n        case TransactionType.REQUEST_DELEG_SWAP:\n            return \"Request Delegator Swap\";\n        case TransactionType.REVOKE_DELEG_SWAP:\n            return \"Revoke Delegator Swap\";\n        case TransactionType.CONFIRM_DELEG_SWAP:\n            return \"Accept Swap Request\";\n        case TransactionType.REJECT_DELEG_SWAP:\n            return \"Reject Swap Request\";\n        default:\n            return \"Error\";\n    }\n}\n\n// show information to prompt users\n// for used during contract calls\nexport const showWalletsPrompt = (accountType: string) => {\n    if (accountType === AccountType.LEDGER) {\n        Alert('info', \"Info\", \"Accessing the ledger device for keys.\");\n        Alert('info', \"Info\", \"Please follow the instructions on the device.\");\n        return;\n    }\n\n    if (accountType === AccountType.ZILPAY) {\n        Alert('info', \"Info\", \"Please follow the instructions on ZilPay.\");\n        return;\n    }\n}\n\n// check if wallet has sufficient balance to pay for gas fees\n// for used during contract calls\n// @param address wallet address in base16\n// returns true if balance is greater than or equal to gas fees; otherwise returns false\nexport const validateBalance = async (address: string) => {\n    // fetch a new balance in case, user's balance is not updated on frontend\n    const balance = await ZilSdk.getBalance(address);\n    const gasFees = ZilSigner.getGasFees();\n    // console.log(\"user bal: \", balance);\n    // console.log(\"gasFees: \", gasFees.toString());\n    if (new BN(balance.toString()).gte(new BN(gasFees.toString()))) {\n        return true;\n    }\n    return false;\n}\n\nexport const calculateBlockRewardCountdown = (blockNum: number, currentNetworkURL: string) => {\n    let sampleRewardBlockNum = 0;\n    let rewardBlockCount = 0;\n\n    if (currentNetworkURL === NetworkURL.MAINNET) {\n        sampleRewardBlockNum = Constants.SAMPLE_REWARD_BLOCK_MAINNET;\n        rewardBlockCount = Constants.REWARD_BLOCK_COUNT_MAINNET;\n    } else {\n        sampleRewardBlockNum = Constants.SAMPLE_REWARD_BLOCK_TESTNET;\n        rewardBlockCount = Constants.REWARD_BLOCK_COUNT_TESTNET;\n    }\n\n    const blockDiff = blockNum - sampleRewardBlockNum;\n    const blockTraverse = blockDiff % rewardBlockCount;\n    const blockCountdown = rewardBlockCount - blockTraverse;\n    \n    return blockCountdown;\n}\n\n/**\n * used by saga to check if response from fetching a contract state has any errors\n * @param obj the contract result\n * @returns true if response has no errors, false otherwise\n */\n export const isRespOk = (obj: any): boolean => {\n    if (\n        obj !== undefined &&\n        obj !== null &&\n        obj !== OperationStatus.ERROR\n    ) {\n        return true;\n    }\n    return false;\n}","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import React from 'react';\n\n\nconst SpinnerNormal = (props:any) => {\n    return (\n        <div className={props.class ? props.class: 'spinner-border'} role=\"status\">\n            <span className=\"sr-only\">Loading...</span>\n        </div>\n    );\n};\n\nexport default SpinnerNormal;","import React, { useMemo } from 'react';\nimport { useTable, useSortBy } from 'react-table';\n\nimport { SsnStatus, Role, ContractState, OperationStatus } from '../util/enum';\nimport { convertToProperCommRate, convertQaToCommaStr, computeStakeAmtPercent, getTruncatedAddress, computeTotalStakeAmt } from '../util/utils';\nimport { SsnStats, StakeModalData } from '../util/interface';\nimport ReactTooltip from 'react-tooltip';\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\nimport SpinnerNormal from './spinner-normal';\nimport { UPDATE_STAKE_MODAL_DATA } from '../store/userSlice';\n\n\nfunction Table({ columns, data, tableId, hiddenColumns, showStakeBtn }: any) {\n    // showStakeBtn is true means displaying for delegators\n    // for delegators view, don't sort by stake amount\n\n    let tempInitialState = {};\n\n    if (showStakeBtn) {\n        // deleg view\n        // don't sort by stake amount to prevent users from staking the top most everytime\n        tempInitialState = {\n            pageIndex: 0, \n            hiddenColumns: hiddenColumns,\n            sortBy: [\n                {\n                    id: 'name',\n                    desc: false\n                }\n            ] \n        }\n    } else {\n        // default sort by stake amt\n        tempInitialState = {\n            pageIndex: 0, \n            hiddenColumns: hiddenColumns,\n            sortBy: [\n                {\n                    id: 'stakeAmt',\n                    desc: true\n                }\n            ] \n        }\n    }\n\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns, \n            data,\n            initialState: tempInitialState\n        }, useSortBy);\n    \n    return (\n        <>\n        <table id={tableId} className=\"table table-responsive-lg \" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map((column, index) => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>\n                                {\n                                    column.render('tipText') === '' ?\n                                    column.render('Header') :\n                                    <span className=\"ssn-table-header-with-tip\" data-for='ssn-table-header-tip' data-tip={column.render('tipText')}>\n                                        {column.render('Header')}\n                                    </span>\n                                }\n                            </th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                            })}\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n        <ReactTooltip id=\"ssn-table-header-tip\" place=\"top\" type=\"dark\" effect=\"solid\" />\n        </>\n    );\n}\n\nfunction SsnTable(props: any) {\n    const dispatch = useAppDispatch();\n    const role = useAppSelector(state => state.user.role);\n    const loading: OperationStatus = useAppSelector(state => state.staking.is_ssn_stats_loading);\n    const ssnList: SsnStats[] = useAppSelector(state => state.staking.ssn_list);\n    const showStakeBtn = props.showStakeBtn ? props.showStakeBtn : false; // for deleg\n    const totalStakeAmt = computeTotalStakeAmt(ssnList);\n\n    const handleStake = (name: string, address: string, commRate: string) => {\n        // set dashboard state variable\n        dispatch(UPDATE_STAKE_MODAL_DATA({\n            stake_modal: {\n                ssnName: name,\n                ssnAddress: address,\n                commRate: commRate,\n            } as StakeModalData\n        }));\n    }\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'name',\n                accessor: 'name',\n                tipText: ''\n            },\n            {\n                Header: 'address',\n                accessor: 'address',\n                className: 'ssn-address',\n                Cell: ({ row }: any) => \n                    <>\n                    {getTruncatedAddress(row.original.address)}\n                    </>,\n                tipText: ''\n            },\n            {\n                Header: 'api endpoint',\n                accessor: 'apiUrl',\n                Cell: ({ row }: any) => <span className=\"ssn-table-api-url\">{row.original.apiUrl}</span>,\n                tipText: 'Service API running by operator. Can be used as alternatives for Zilliqa API endpoint'\n            },\n            {\n                Header: 'stake amount (ZIL)',\n                accessor: 'stakeAmt',\n                Cell: ({ row }: any) => \n                    <>\n                    <span>{convertQaToCommaStr(row.original.stakeAmt)} ({computeStakeAmtPercent(row.original.stakeAmt, totalStakeAmt).toFixed(2)}&#37;)</span>\n                    </>,\n                tipText: 'Total amount being staked with this operator'\n            },\n            {\n                Header: 'buffered deposit (ZIL)',\n                accessor: 'bufferedDeposits',\n                Cell: ({ row }: any) =>\n                    <>\n                    <span>{convertQaToCommaStr(row.original.bufferedDeposits)}</span>\n                    </>,\n                tipText: 'Total staked amount deposited in this cycle being considered for rewards in the next cycle'\n            },\n            {\n                Header: 'Comm. Rate (%)',\n                accessor: 'commRate',\n                Cell: ({ row }: any) =>\n                    <span>{convertToProperCommRate(row.original.commRate).toFixed(2)}</span>,\n                tipText: 'Percentage of incoming rewards that the operator takes as commission'\n            },\n            {\n                Header: 'Comm. Reward (ZIL)',\n                accessor: 'commReward',\n                Cell: ({ row }: any) => \n                    <span className=\"ssn-table-comm-reward\">{convertQaToCommaStr(row.original.commReward)}</span>,\n                tipText: 'Number of ZILs earned as commission by the operator'\n            },\n            {\n                Header: 'Delegators',\n                accessor: 'delegNum',\n                tipText: 'Total number of delegators staking with this operator'\n            },\n            {\n                Header: 'Status',\n                accessor: 'status',\n                Cell: ({ row }: any) => \n                        <>\n                        <div className={ row.original.status === SsnStatus.ACTIVE ? 'px-2 py-1 rounded ssn-table-status-active' : 'px-2 py-1 rounded ssn-table-status-inactive' }>\n                            {\n                                row.original.status === SsnStatus.INACTIVE ?\n                                <>Below<br/>Min. Stake</> :\n                                row.original.status\n                            }\n                        </div>\n                        </>,\n                tipText: 'Determines whether the operator has met the minnimum stake amount and therefore ready to participate in staking and receive rewards'\n            },\n            {\n                Header: 'Stake',\n                accessor: 'stake',\n                Cell: ({ row }: any) =>\n                    <>\n                    <button \n                        type=\"button\" \n                        className=\"btn btn-contract-small shadow-none\" \n                        data-toggle=\"modal\" \n                        data-target=\"#delegate-stake-modal\" \n                        data-keyboard=\"false\" \n                        data-backdrop=\"static\"\n                        onClick={() => handleStake(row.original.name, row.original.address, row.original.commRate)}\n                        disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                            Stake\n                    </button>\n                    </>,\n                tipText: ''\n            }\n            // eslint-disable-next-line\n        ],[ssnList, role]\n    )\n\n    const getHiddenColumns = () => {\n        // hide redudant info for certain group of users, e.g. commission reward\n        // list the hidden column accessor names\n        let hiddenColumns = [\"address\"];\n        if (role !== undefined && role === Role.DELEGATOR && ContractState.IS_PAUSED.toString() !== 'true') {\n            hiddenColumns.push(\"commReward\", \"apiUrl\");\n        } else if (role !== undefined && role === Role.DELEGATOR && ContractState.IS_PAUSED.toString() === 'true') {\n            // hide stake button if contract state is paused\n            hiddenColumns.push(\"stake\");\n        }\n\n        if (showStakeBtn === false || role === Role.OPERATOR) {\n            hiddenColumns.push(\"stake\");\n        }\n        return hiddenColumns;\n    }\n    \n    return (\n        <>\n        { \n            loading === OperationStatus.PENDING && \n            <SpinnerNormal class=\"spinner-border dashboard-spinner mb-4\" /> \n        }\n        {\n            loading === OperationStatus.COMPLETE &&\n            <Table \n                columns={columns} \n                data={ssnList} \n                className={props.tableId} \n                hiddenColumns={getHiddenColumns()} \n                showStakeBtn={showStakeBtn}\n             />\n        }\n        </>\n    );\n}\n\nexport default SsnTable;\n","import React from 'react';\n\n\nfunction Footer(props:any) {\n    return (\n        <footer id=\"disclaimer\" className=\"align-items-start\">\n            <div className=\"p-2 d-block\">\n                <span className=\"mx-3 align-middle\">&copy; 2023 Zilliqa</span> \n                <button type=\"button\" className=\"btn shadow-none\" data-toggle=\"modal\" data-target=\"#disclaimer-modal\" data-keyboard=\"false\" data-backdrop=\"static\">Disclaimer</button>\n            </div>\n      </footer>\n    );\n}\n\nexport default Footer;\n\n","import { toBech32Address } from '@zilliqa-js/zilliqa';\nimport React, { useState } from 'react';\nimport { AccountType, OperationStatus } from '../util/enum';\nimport { logger } from '../util/logger';\nimport { ZilSigner } from '../zilliqa-signer';\nimport Alert from './alert';\n\nfunction WalletKeystore(props: any) {\n    const [filename, setFilename] = useState(\"\");\n    const [passphrase, setPassphrase] = useState(\"\");\n    const [keystore, setKeystore] = useState();\n\n    const handleFile = (e: any) => {\n        let keystoreFile = e.target.files[0];\n        setFilename(keystoreFile.name);\n        setKeystore(keystoreFile);\n    }\n\n    const handlePassword = (e: any) => {\n        setPassphrase(e.target.value);\n    }\n\n    const unlockWallet = () => {\n        if (keystore === undefined || keystore === null || keystore === \"\") {\n            Alert('error', 'Keystore not found', 'Please upload a keystore file.');\n            return;\n        }\n\n        const reader = new FileReader();\n        reader.readAsText(keystore!);\n\n        reader.onload = async () => {\n            // show loading state\n            props.onWalletLoadingCallback();\n\n            const keystoreJSON = reader.result as string;\n            const address = await ZilSigner.addWalletByKeystore(keystoreJSON, passphrase); // base16 with 0x\n\n            if (address !== OperationStatus.ERROR) {\n                logger(\"wallet add success: \", address);\n\n                const bech32Address = toBech32Address(address);\n\n                // call parent function to redirect to dashboard\n                props.onSuccessCallback(address.toLowerCase(), bech32Address, AccountType.KEYSTORE);\n            } else {\n                Alert('error', 'Keystore Decrypt Error', 'Please ensure your passphrase is correct.');\n            }\n        }\n        \n        reader.onerror = (e) => {\n            console.error(e);\n        }\n    }\n\n    return (\n        <div className=\"wallet-access\">\n            <h2>Access wallet via Keystore</h2>\n            <div>\n                <div id=\"keystore\">\n                    <p className=\"file-name\">{filename}</p>\n                    <label htmlFor=\"browsekeystore\">{filename ? \"Select wallet file\" : \"Select wallet file\"}</label>\n                    <input type=\"file\" id=\"browsekeystore\" onChange={handleFile} />\n                </div>\n                <input id=\"keystore-passphrase\" type=\"password\" name=\"password\" className=\"p-2\" placeholder=\"Enter your passphrase\" value={passphrase} onChange={handlePassword}/>\n            </div>\n            <br/>\n            <button type=\"button\" className=\"btn btn-user-action mx-2\" onClick={unlockWallet}>Unlock Wallet</button>\n            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2\" onClick={props.onReturnCallback}>Back</button>\n        </div>\n    );\n}\n\nexport default WalletKeystore;","import React, { useState } from 'react';\nimport Alert from './alert';\nimport { AccountType } from '../util/enum';\nimport { bech32ToChecksum, convertQaToCommaStr } from '../util/utils';\n\nimport { LedgerZilliqa } from '../ledger-zilliqa';\n\nimport $ from \"jquery\";\nimport { logger } from '../util/logger';\nimport { ZilSdk } from '../zilliqa-api';\n\n\ninterface LedgerAccount {\n    hwIndex: number,\n    bech32Address: string,\n    balance: string\n}\n\nfunction LedgerWallet(props: any) {\n    const defaultLedgerIndex = 0;\n    const [ledgerIndex, setLedgerIndex] = useState(0);\n    const [ledgerAccounts, setLedgerAccounts] = useState([] as LedgerAccount[]);\n\n    const handleClose = () => {\n        setLedgerIndex(defaultLedgerIndex);\n        setLedgerAccounts([] as LedgerAccount[]);\n    }\n\n    const getLedgerAccounts = async (currentLedgerIndex: number) => {\n        try {\n            Alert('info', \"Info\", \"Please follow the instructions on the device.\");\n            \n            const transport = await LedgerZilliqa.getTransport();\n            const ledger = new LedgerZilliqa(transport);\n\n            const result = await ledger!.getPublicAddress(currentLedgerIndex);\n            const currAddress = result.pubAddr;\n            const balance = await ZilSdk.getBalance(currAddress);\n\n            const currLedgerAccount: LedgerAccount = {\n                hwIndex: currentLedgerIndex,\n                bech32Address: currAddress,\n                balance: balance\n            }\n    \n            const tempLedgerAccounts: LedgerAccount [] = ledgerAccounts.slice();\n            tempLedgerAccounts.push(currLedgerAccount);\n            setLedgerAccounts([...tempLedgerAccounts]);\n            \n            setLedgerIndex(currentLedgerIndex);\n\n        } catch (err) {\n            console.error(\"error getting ledger index: %o\", err);\n            Alert('error', 'Unable to access ledger', 'Have you unlock the PIN code?');\n        }\n    }\n\n    const unlockWallet = async (hwIndex: number) => {\n        logger(\"unlock by hardware ledger\");\n\n        if (typeof ledgerAccounts[hwIndex] === undefined) {\n            console.error(\"no such ledger wallet index: %o\", hwIndex);\n            Alert('error', 'Unable to access account', 'Are you sure it is correct?');\n            return null;\n        }\n\n        try {\n            const selectedLedgerAddress = ledgerAccounts[hwIndex].bech32Address;\n            // clear modal state\n            $(\"#ledger-connect-modal\").modal(\"hide\");\n\n            // show loading state\n            props.onWalletLoadingCallback();\n\n            logger(\"ledger wallet address: %o\", selectedLedgerAddress);\n            logger(\"ledger wallet index: %o\", hwIndex);\n\n            const base16Address = bech32ToChecksum(selectedLedgerAddress).toLowerCase();\n\n            // no error\n            // call parent function to redirect to dashboard\n            props.onSuccessCallback(base16Address, selectedLedgerAddress, AccountType.LEDGER, hwIndex);\n        } catch (err) {\n            console.error(\"error unlocking ledger...:%o\", err);\n            Alert('error', 'Unable to access ledger', 'Have you unlock the PIN code?');\n\n            // clear modal state\n            $(\"#ledger-connect-modal\").modal(\"hide\");\n            handleClose();\n        }\n    }\n\n    \n    return (\n        <div className=\"wallet-access\">\n            <h2>Access wallet using Hardware Ledger</h2>\n            <div id=\"ledger-connect-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"ledgerConnectModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <table className=\"table p-4 mt-2 mb-4\">\n                                <thead>\n                                    <tr>\n                                        <th>Index</th>\n                                        <th>Address</th>\n                                        <th>Balance (ZIL)</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    { ledgerAccounts && ledgerAccounts.map((item) => \n                                        <tr className=\"account-row\" onClick={() => unlockWallet(item.hwIndex)} key={item.hwIndex}>\n                                            <td>#{item.hwIndex}</td>\n                                            <td>{item.bech32Address}</td>\n                                            <td>{convertQaToCommaStr(item.balance)}</td>\n                                        </tr>\n                                    )}\n                                </tbody>\n                            </table>\n                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2\" onClick={() => getLedgerAccounts(ledgerIndex+1)}>Next Account</button>\n                            <button type=\"button\" className=\"btn btn-user-action mx-2\" onClick={() => unlockWallet(defaultLedgerIndex)}>Use Default Index #{defaultLedgerIndex}</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <button type=\"button\" className=\"btn btn-user-action mx-2\" data-toggle=\"modal\" data-target=\"#ledger-connect-modal\" data-keyboard=\"false\" data-backdrop=\"static\" onClick={() => getLedgerAccounts(ledgerIndex)}>Connect to Ledger Wallet</button>\n            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2\" onClick={props.onReturnCallback}>Back</button>\n        </div>\n    );\n}\n\nexport default LedgerWallet;","import React from 'react';\nimport { AccountType, Environment } from '../util/enum';\nimport Alert from './alert';\n\nimport { toBech32Address } from '@zilliqa-js/crypto';\nimport { getEnvironment } from '../util/config-json-helper';\n\n\nfunction WalletZilPay(props: any) {\n    // config.js from public folder\n    const env = getEnvironment();\n\n    const unlockWallet = async () => {\n\n        // Getting ZilPay inject.\n        const zilPay = (window as any).zilPay;\n\n        // Checking on ZilPay inject and wallet state.\n        if (!zilPay) {\n            Alert('warn', 'ZilPay Not Installed', 'Please install ZilPay wallet.');\n            return null;\n\n        } else if (!zilPay.wallet.isEnable) {\n            Alert('warn', 'Locked Wallet', 'Please unlock wallet on ZilPay.');\n            return null;\n        }\n\n        try {\n            // Shell try ask user about access.\n            const connected = await zilPay.wallet.connect();\n\n            // Checking access.\n            if (!connected) {\n                Alert('error', 'Locked Wallet', 'Please allow ZilPay to access this app.');\n                return null;\n            }\n\n            const { base16 } = zilPay.wallet.defaultAccount;\n            const bech32Address = toBech32Address(base16);\n\n            // request parent to show spinner while updating\n            props.onWalletLoadingCallback();\n            \n            // request parent to redirect to dashboard\n            props.onSuccessCallback(base16, bech32Address, AccountType.ZILPAY);\n        } catch (err) {\n            console.error(\"error unlocking via zilpay...: %o\", err);\n            Alert('error', 'Unable to access ZilPay', 'Please check if there is a new ZilPay version or clear your browser cache.');\n        }\n    }\n\n    return (\n        <>\n        <div className=\"wallet-access\">\n            <h2>Access wallet using ZilPay</h2>\n            \n            { env === Environment.PROD ? \n                <p className=\"my-4\"><strong>Note:</strong> We remind all users to set your ZilPay network to <strong>Mainnet</strong></p> :\n                <p className=\"my-4\"><strong>Note:</strong> We remind all users to set your ZilPay network to <strong>Testnet</strong></p>\n            }\n            \n            <button type=\"button\" className=\"btn btn-user-action mx-2\" onClick={unlockWallet}>Unlock Wallet</button>\n            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2\" onClick={props.onReturnCallback}>Back</button>\n        </div>\n        </>\n    );\n}\n\nexport default WalletZilPay;","import React from \"react\";\n\nfunction IconKeystoreLine(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 54.6 64.2\" className={props.className} width={props.width} height={props.height}>\n            <g id=\"Layer_2\" data-name=\"Layer 2\"><g id=\"Layer_1-2\" data-name=\"Layer 1\">\n                <path className=\"cls-1\" d=\"M31.5,25.2a1.1,1.1,0,0,0-1.6.4h0L22.7,37.4a1.2,1.2,0,0,0,.5,1.6,1.1,1.1,0,0,0,1.6-.4h0l7.1-11.8a1.2,1.2,0,0,0-.4-1.6Z\"/>\n                <path className=\"cls-1\" d=\"M35.4,25.4a1.2,1.2,0,0,0-1.7-.1,1.1,1.1,0,0,0-.2,1.6l4.1,5.2-4.1,5.2a1.1,1.1,0,0,0,.2,1.6,1.2,1.2,0,0,0,1.7-.1l4.7-6a1.2,1.2,0,0,0,0-1.4Z\"/>\n                <path className=\"cls-1\" d=\"M19.3,38.8a1.1,1.1,0,0,0,1.7.1,1.1,1.1,0,0,0,.1-1.6L17,32.1l4.1-5.2a1.1,1.1,0,0,0-.1-1.6,1.1,1.1,0,0,0-1.7.1l-4.8,6a1.2,1.2,0,0,0,0,1.4Z\"/>\n                <path className=\"cls-2\" d=\"M46.4,64H8.2a8,8,0,0,1-8-8V8.2a8,8,0,0,1,8-8H46.4a8,8,0,0,1,8,8V56A8,8,0,0,1,46.4,64ZM8.2,3.4A4.9,4.9,0,0,0,3.4,8.2V56a4.8,4.8,0,0,0,4.8,4.8H46.4A4.7,4.7,0,0,0,51.2,56V8.2a4.8,4.8,0,0,0-4.8-4.8Z\"/></g></g>\n        </svg>\n    );\n}\n\nexport default IconKeystoreLine;","import React from \"react\";\n\nfunction IconLedgerLine(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 51.4 52.6\" className={props.className} width={props.width} height={props.height}>\n            <g id=\"Layer_2\" data-name=\"Layer 2\">\n                <g id=\"Layer_1-2\" data-name=\"Layer 1\">\n                    <path className=\"cls-1\" d=\"M35.1,32.3H20.8c-.8,0-1-.3-1-1.1V2.1c0-.7.2-1,.9-1H42.8a7.7,7.7,0,0,1,7.4,7.5c.1,7.6,0,15.2.1,22.9,0,.8-.4.9-1.1.9Z\"/>\n                    <path className=\"cls-1\" d=\"M31.5,45.5c0,1.7,0,3.4.1,5.1s-.3.9-.9.9H20.6c-.6,0-.8-.2-.8-.8V40.2c0-.6.2-.8.8-.8H30.7c.7,0,.9.3.8.9Z\"/>\n                    <path className=\"cls-1\" d=\"M1.1,26.2V21.1c0-.7.2-.9.9-.9h9.9c.7,0,1,.2,1,.9-.1,3.4-.1,6.8,0,10.3,0,.7-.3,1-1,1q-5-.1-9.9,0c-.7,0-.9-.3-.9-1Z\"/>\n                    <path className=\"cls-1\" d=\"M38.5,45.4V40.3c0-.7.2-.9.9-.9h10c.4,0,.9-.1.9.6a38.5,38.5,0,0,1-.2,4.8c-.7,4-3.7,6.5-7.9,6.7H39.4c-.7,0-.9-.2-.9-.9Z\"/>\n                    <path className=\"cls-1\" d=\"M7,39.4h4.8c.7,0,1.1.1,1.1.9-.1,3.4,0,6.9,0,10.3,0,.4,0,.9-.6.9a20.4,20.4,0,0,1-5.5-.3,8.1,8.1,0,0,1-5.7-7.5c0-1.1.1-2.3,0-3.5s.3-.8.9-.8Z\"/>\n                    <path className=\"cls-1\" d=\"M7,13.1H2c-.7,0-.9-.3-.9-1a36.2,36.2,0,0,1,.2-4.6A7.7,7.7,0,0,1,8.9,1.1H12c.7,0,.9.3.9,1-.1,3.3-.1,6.7,0,10.1,0,.8-.3,1-1,1Z\"/>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport default IconLedgerLine;","import React from \"react\";\n\nfunction IconZilPayLine(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 59.4 59.3\" className={props.className} width={props.width} height={props.height}>\n            <g id=\"Layer_2\" data-name=\"Layer 2\">\n                <g id=\"Layer_1-2\" data-name=\"Layer 1\">\n                    <path className=\"cls-1\" d=\"M27.4,58.4c-9.4-.9-17.9-5.9-22.5-13a28,28,0,0,1-3.8-9.7,59.2,59.2,0,0,1-.3-6.3c.3-6.6,1.8-11.7,4.9-16.2A23,23,0,0,1,9,9.4a28.9,28.9,0,0,1,8.4-5.7A28.8,28.8,0,0,1,26.2,1a43.3,43.3,0,0,1,7.2,0A29.1,29.1,0,0,1,48.5,8.4c5,4.4,8.3,9.5,9.5,14.8a20.1,20.1,0,0,1,.5,5.1,18.7,18.7,0,0,1-.5,5.4l-.3,1.4-1,.2a62.4,62.4,0,0,0-8.8,2.3l-4.7,2a40.5,40.5,0,0,1-4.9,1.9,14.8,14.8,0,0,1-7.8.1,7.4,7.4,0,0,1-5.2-5.5,7.5,7.5,0,0,1,.2-3.3,16.1,16.1,0,0,1,3.8-6.4l.7-.8s.1.9.3,2,.2,2,.2,2l.8-.3a13.6,13.6,0,0,1,7.5-.4,48.7,48.7,0,0,1,5.8,1.8l2.1.7a10.8,10.8,0,0,0,5.6-.7c.5-.2.5-.2.6-.7a7.6,7.6,0,0,0,0-3v-.6l-1.7-1.2C40.4,18.1,31.5,14,23.9,12.5c-2-.4-5.6-.8-5.6-.6v.2c-.1.1,1,.7,3.7,2l3.8,1.8-1.6.6a57.1,57.1,0,0,0-6,2.4A22.4,22.4,0,0,0,14.6,21l1.8.2,1.7.2-1,1c-1.2,1.3-2,2.2-3.8,4.5l-1.6,1.9h2.7l-1.3,4.6c-.8,2.5-1.4,4.6-1.4,4.6l1.4-.3c1-.2,1.5-.3,1.5-.2s.2,2.1.4,4.5.3,4.5.3,4.5l1.3-1a8.9,8.9,0,0,1,1.2-1,34.8,34.8,0,0,1,2.5,3.6l2.5,3.7L24,50.6c.8-1,1.1-1.2,1.2-1.1l1,1.2a18,18,0,0,0,1.9,2.1l1,1h2.2a21.4,21.4,0,0,1,8.5,1.4l.8.3-.3.2a15.2,15.2,0,0,1-6.7,2.6l-3.3.2Z\"/>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport default IconZilPayLine;","import React from 'react';\n\nfunction IconSun(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z\"/></svg>\n    );\n}\n\nexport default IconSun;","import React from 'react';\n\nfunction IconMoon(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z\"/></svg>\n    );\n}\n\nexport default IconMoon;","import React from 'react';\n\nimport { OperationStatus } from '../util/enum';\nimport SpinnerNormal from './spinner-normal';\nimport { useAppSelector } from '../store/hooks';\nimport { LandingStats } from '../util/interface';\nimport { convertGzilToCommaStr, convertQaToCommaStr } from '../util/utils';\n\n\nfunction LandingStatsTable(props: any) {\n    const loading : OperationStatus = useAppSelector(state => state.staking.is_landing_stats_loading);\n    const landingStats: LandingStats = useAppSelector(state => state.staking.landing_stats);\n\n    return (\n        <>\n        <div id=\"landing-stats\" className=\"container\">\n            <div className=\"row p-4\">\n            <h2 className=\"mb-4\">Statistics</h2>\n            \n            <div className=\"col-12 align-items-center\">\n                { loading === OperationStatus.PENDING && <SpinnerNormal class=\"spinner-border dashboard-spinner mb-4\" /> }\n                \n                { loading === OperationStatus.COMPLETE && \n\n                <>\n                <div className=\"row pb-3 mx-auto justify-content-center\">\n                    <div className=\"d-block landing-stats-card\">\n                        <h3>EST. Realtime APR</h3>\n                        <span>{landingStats.estRealtimeAPY}%</span>\n                    </div>\n                    <div className=\"d-block landing-stats-card\">\n                        <h3>Circulating Supply Staked</h3>\n                        <span>{landingStats.circulatingSupplyStake}%</span>\n                    </div>\n                    <div className=\"d-block landing-stats-card\">\n                        <h3>Delegators / Staked Seed Nodes</h3>\n                        <span>{landingStats.delegNum} / {landingStats.nodesNum}</span>\n                    </div>\n\n                    <div className=\"w-100\"></div>\n                    \n                    <div className=\"d-block landing-stats-card\">\n                        <h3>Stake Amount</h3>\n                        <span>{convertQaToCommaStr(landingStats.totalDeposits)}</span>\n                    </div>\n\n                    <div className=\"d-block landing-stats-card\">\n                        <h3>Total GZIL minted</h3>\n                        <span>{convertGzilToCommaStr(landingStats.gzil)}</span>\n                    </div>\n\n                    <div className=\"d-block landing-stats-card\">\n                    </div>\n                </div>\n                </>\n\n                }\n\n            </div>\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default LandingStatsTable;","import { convertNetworkUrlToLabel } from \"./utils\";\n\n/**\n * https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#Feature-detecting_localStorage\n * checks if the browser accepts local storage\n */\nexport function isStorageAvailable(type: string) {\n    var storage;\n    try {\n        storage = (window as any)[type];\n        var x = '__storage_test__';\n        storage.setItem(x, x);\n        storage.removeItem(x);\n        return true;\n    } catch (e) {\n        // DOM exception\n        console.error('no local storage present');\n        return false;\n    }\n}\n\n/*\n * store item in local storage\n\n * <wallet_address> : {\n *     <network>: {\n *         key1: value,\n *         key2: value\n *     }\n * }\n * \n * wallet: bech32 address\n * proxy: checksum address\n * network: blockchain url will convert to label later\n * key: storage key\n * value: storage value\n * \n*/\nexport function storeLocalItem(wallet: string, proxy: string, network: string, key: string, value: any) {\n    \n    if (!isStorageAvailable(\"localStorage\")) {\n        return null;\n    }\n\n    network = convertNetworkUrlToLabel(network);\n    const storedValue: any = window.localStorage.getItem(wallet);\n    let currStorageMap: any;\n\n    if (proxy === null || proxy === \"\") {\n        proxy = \"proxy\";\n    } else {\n        proxy = proxy.substring(0, 10);\n    }\n    const accessKey = network + \"-\" + proxy;\n\n    if (storedValue !== null) {\n        let localStorageMap = JSON.parse(storedValue);\n        \n        if (localStorageMap.hasOwnProperty(accessKey) && key in localStorageMap[accessKey]) {\n            // update the respective section only\n            localStorageMap[accessKey][key] = value;\n\n        } else if (!localStorageMap.hasOwnProperty(accessKey)) {\n            // first time this particular wallet address is storing on this network\n            localStorageMap[accessKey] = {};\n            localStorageMap[accessKey][key] = value;\n\n        } else {\n            // first time this particular wallet address is storing this value\n            localStorageMap = {};\n            localStorageMap[accessKey] = {};\n            localStorageMap[accessKey][key] = value; \n        }\n        currStorageMap = localStorageMap;\n\n    } else {\n        currStorageMap = {};\n        currStorageMap[accessKey] = {};\n        currStorageMap[accessKey][key] = value;\n    }\n\n    window.localStorage.setItem(wallet, JSON.stringify(currStorageMap));\n}\n\n/*\n * retrieve item from local storage if exists\n * returns defaultValue if item does not exist\n * \n * wallet: bech32 address\n * proxy: checksum address\n * network: blockchain url will convert to label later\n * key: storage key\n*/\nexport function getLocalItem(wallet: string, proxy: string, network: string, key: string, defaultValue: any) {\n    if (!isStorageAvailable(\"localStorage\")) {\n        return defaultValue;\n    }\n\n    network = convertNetworkUrlToLabel(network);\n    const storedValue: any = window.localStorage.getItem(wallet);\n\n    if (proxy === null || proxy === \"\") {\n        proxy = \"proxy\";\n    } else {\n        proxy = proxy.substring(0, 10);\n    }\n    const accessKey = network + \"-\" + proxy;\n\n    if (storedValue !== null) {\n        const localStorageMap = JSON.parse(storedValue);\n        if (localStorageMap.hasOwnProperty(accessKey) && key in localStorageMap[accessKey]) {\n            return localStorageMap[accessKey][key];\n        }\n    }\n    return defaultValue;\n}","import { useState, useEffect, useCallback } from 'react';\nimport { isStorageAvailable } from './use-local-storage';\n\n\nconst setTheme = (darkMode: boolean) => {\n    if (darkMode) {\n        document.documentElement.setAttribute('data-theme', 'dark');\n    } else {\n        document.documentElement.setAttribute('data-theme', 'light');\n    }\n}\n\nconst useDarkMode = (initialValue = true) => {\n    const [darkMode, setDarkMode] = useState(() => {\n        // try to load from local storage or if the document element has already been set\n        try {\n            // try to get from local storage\n            const item = window.localStorage.getItem(\"dark-theme\");\n\n            // try to get from existing attribute\n            const currTheme = document.documentElement.getAttribute('data-theme');\n\n            if (item !== null) {\n                const localStorageTheme = JSON.parse(item);\n\n                // source of truth from local storage\n                // fix flashing bug if default is dark mode but storage is light mode\n                setTheme(localStorageTheme)\n                return localStorageTheme;\n\n            } else if (currTheme !== null && currTheme !== '') {\n                // source of truth from document attribute\n                var isDarkMode = true;\n                if (currTheme === 'dark') {\n                    isDarkMode = true;\n                } else {\n                    isDarkMode = false;\n                }\n                return isDarkMode;\n            } else {\n                return initialValue\n            }\n\n        } catch (err) {\n            return initialValue;\n        }\n    });\n\n    useEffect(() => {\n        if (isStorageAvailable('localStorage')) {\n            window.localStorage.setItem(\"dark-theme\", JSON.stringify(darkMode));\n        }\n        \n        if (darkMode) {\n            document.documentElement.setAttribute('data-theme', 'dark');\n        } else {\n            document.documentElement.setAttribute('data-theme', 'light');\n        }\n    }, [darkMode]);\n\n    return {\n        value: darkMode,\n        enable: useCallback(() => {\n                    setDarkMode(true);\n                    // document.documentElement.setAttribute('data-theme', 'dark');\n                }, [setDarkMode]),\n        disable: useCallback(() => {\n                    setDarkMode(false);\n                    // document.documentElement.setAttribute('data-theme', 'light');\n                }, [setDarkMode]),\n    }\n}\n\nexport default useDarkMode;","import React from 'react';\n\nfunction IconSearch(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width={props.width} height={props.height} className={props.className} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\"></circle><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line></svg>\n    );\n}\n\nexport default IconSearch;","import React from 'react';\nimport { getEnvironment } from '../util/config-json-helper';\nimport { Environment, ContractState } from '../util/enum';\n\n\nfunction WarningBanner(props: any) {\n    // config.js from public folder\n    const env = getEnvironment();\n\n    return (\n        <div id=\"banner\" className=\"mb-4 text-center\">\n            { \n                env === Environment.PROD ? \n                <>\n                <div className=\"px-3 py-3\">\n                    <strong>Warning</strong>: Zillion is in beta phase. Use this dApp at your own risk.\n                    <br/>\n                    <div className=\"mt-3\"><strong>Important</strong>: Please note that gZIL minting has concluded as of <span className=\"final-gzil-mint-block ml-2\">Block 1483713</span>. <span className=\"mx-2\">No further gZIL will be minted.</span> The Zilliqa staking program will still continue to distribute ZIL for staking rewards.</div>\n                </div>\n                {\n                    ContractState.IS_PAUSED.toString() === 'true' && \n                    <div className=\"px-3 py-3\"><strong>Attention</strong>: We have noticed an issue with the staking contract which is causing a slowdown of the Zilliqa network. <br/>While we are investigating the issue and work on a fix, the staking contract has been paused for a week (starting from May 21, 2021).<br/>Once the staking contract is unpaused, any missed rewards for the paused period will be retroactively disbursed.<br/>All funds are SAFU and we apologize for your inconvenience. </div>\n                }\n                </> :\n                <>\n                <div className=\"p-3\"><strong>Warning</strong>: Zillion is still in testnet. You are using this dApp at your own risk. Zilliqa cannot assume any responsibility for any loss of funds.</div>\n                </>\n            }\n        </div>\n    );\n}\n\nexport default WarningBanner;","import React, { useState, useRef, useEffect } from 'react';\nimport AnimatedNumber from \"react-animated-numbers\"\nimport { trackPromise } from 'react-promise-tracker';\nimport { useAppSelector } from '../store/hooks';\nimport { OperationStatus } from '../util/enum';\nimport { logger } from '../util/logger';\nimport { calculateBlockRewardCountdown } from '../util/utils';\nimport { ZilSdk } from '../zilliqa-api';\n\n\nfunction RewardCountdownTable(props: any) {\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const mountedRef = useRef(true);\n\n    // for populating rewards distribution countdown\n    const [currentBlockNum, setCurrentBlockNum] = useState('0');\n    const [expectedBlockNum, setExpectedBlockNum] = useState('0');\n    const [blockCountToReward, setBlockCountToReward] = useState('0');\n\n    useEffect(() => {\n        let tempCurrentBlockNum = '0';\n        let tempBlockRewardCount = '0';\n        let tempExpectedBlockNum = '0';\n\n        trackPromise(ZilSdk.getNumTxBlocks()\n            .then((state) => {\n                if (state === undefined || state === OperationStatus.ERROR) {\n                    return null;\n                }\n                const currentBlockNum = parseInt(state) - 1;\n                const blockCountdown = calculateBlockRewardCountdown(currentBlockNum, networkURL);\n                const expectedBlockNum = currentBlockNum + blockCountdown;\n                \n                tempCurrentBlockNum = currentBlockNum.toString();\n                tempBlockRewardCount = blockCountdown.toString();\n                tempExpectedBlockNum = expectedBlockNum.toString();\n            })\n            .catch((err) => {\n                console.error(err);\n            })\n            .finally(() => {\n                logger(\"updating reward countdown table\");\n                if (mountedRef.current) {\n                    setCurrentBlockNum(tempCurrentBlockNum);\n                    setBlockCountToReward(tempBlockRewardCount);\n                    setExpectedBlockNum(tempExpectedBlockNum);\n                }  \n            }));\n    }, [networkURL]);\n\n    return (\n        <div id=\"stake-rewards-distribution\" className=\"container\">\n            <div className=\"row p-4\">\n                <h2 className=\"mb-4\">Rewards Distribution</h2>\n\n                <div className=\"col-12 align-items-center\">\n                    <div className=\"row mx-auto justify-content-center\">\n                        <div className=\"d-block stake-rewards-card\">\n                            <h3>Current Block Num.</h3>\n                            <div className=\"d-flex justify-content-center\">\n                                <AnimatedNumber\n                                    fontStyle={{ fontFamily: \"Avenir Next LT Pro\", fontSize: 22, fontWeight: 600 }}\n                                    animateToNumber={currentBlockNum}\n                                    config={{ tension: 120, friction: 17 }} />\n                            </div>\n                        </div>\n                        <div className=\"d-block stake-rewards-card\">\n                            <h3>Blocks Until Rewards</h3>\n                            <div className=\"test d-flex justify-content-center\">\n                                <AnimatedNumber\n                                    fontStyle={{ fontFamily: \"Avenir Next LT Pro\", fontSize: 22, fontWeight: 600 }}\n                                    animateToNumber={blockCountToReward}\n                                    config={{ tension: 120, friction: 17 }} />\n                            </div>\n                        </div>\n                        <div className=\"d-block stake-rewards-card\">\n                            <h3>Est. Reward Block Num.</h3>\n                            <div className=\"d-flex justify-content-center\">\n                                <AnimatedNumber\n                                    fontStyle={{ fontFamily: \"Avenir Next LT Pro\", fontSize: 22, fontWeight: 600 }}\n                                    animateToNumber={expectedBlockNum}\n                                    config={{ tension: 120, friction: 17 }} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default RewardCountdownTable;","import React, { useState, useEffect } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport ReactTooltip from \"react-tooltip\";\n\nimport { AccountType, Environment, Network, Role, ContractState } from '../util/enum';\nimport DisclaimerModal from './disclaimer';\nimport SsnTable from './ssn-table';\nimport Footer from './footer';\n\nimport WalletKeystore from './wallet-keystore';\nimport WalletLedger from './wallet-ledger';\nimport WalletZilPay from './wallet-zilpay';\n\nimport IconKeystoreLine from './icons/keystore-line';\nimport IconLedgerLine from './icons/ledger-line';\nimport IconZilPayLine from './icons/zil-pay-line';\nimport IconSun from './icons/sun';\nimport IconMoon from './icons/moon';\n\nimport ZillionLogo from '../static/zillion.svg';\nimport ZillionLightLogo from '../static/light/zillion.svg';\nimport LandingStatsTable from './landing-stats-table';\n\nimport useDarkMode from '../util/use-dark-mode';\nimport { ToastContainer } from 'react-toastify';\nimport IconSearch from './icons/search';\nimport WarningBanner from './warning-banner';\n\nimport RewardCountdownTable from './reward-countdown-table';\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\nimport { getEnvironment } from '../util/config-json-helper';\nimport { QUERY_AND_UPDATE_STAKING_STATS } from '../store/stakingSlice';\nimport { logger } from '../util/logger';\nimport { INIT_USER, QUERY_AND_UPDATE_USER_STATS, UPDATE_LEDGER_INDEX } from '../store/userSlice';\nimport { ZilSigner } from '../zilliqa-signer';\n\n\nfunction Home(props: any) {\n  const dispatch = useAppDispatch();\n  const chainInfo = useAppSelector(state => state.blockchain);\n\n  // config.js from public folder\n  const env = getEnvironment();\n\n  const [isDirectDashboard, setIsDirectDashboard] = useState(false);\n  const [isShowAccessMethod, setShowAccessMethod] = useState(false);\n  const [explorerSearchAddress, setExplorerSearchAddress] = useState('');\n  const [role, setRole] = useState('');\n  const [accessMethod, setAccessMethod] = useState('');\n  const [selectedNetwork, setSelectedNetwork] = useState(() => {\n    if (env === Environment.PROD) {\n      return Network.MAINNET;\n    } else {\n      // default to testnet\n      return Network.TESTNET;\n    }\n  });\n\n  const darkMode = useDarkMode(true);\n\n  // trigger show wallets to choose\n  const resetWalletsClicked = () => {\n    setAccessMethod('');\n    setIsDirectDashboard(false);\n  }\n\n  const timeout = (delay: number) => {\n    return new Promise(res => setTimeout(res, delay));\n  }\n\n  const redirectToDashboard = async (addressBase16: string, addressBech32: string, accountType: AccountType, ledgerIndex?: number) => {\n    // login success\n    // update store and signer network\n    dispatch(INIT_USER({ address_base16: addressBase16, address_bech32: addressBech32, account_type: accountType, authenticated: true, selected_role: role }));\n    dispatch(QUERY_AND_UPDATE_USER_STATS());\n    await ZilSigner.changeNetwork(chainInfo.blockchain);\n\n    if (accountType === AccountType.LEDGER && typeof(ledgerIndex) !== 'undefined') {\n      // update ledger index to store if using ledger\n      dispatch(UPDATE_LEDGER_INDEX({ ledger_index: ledgerIndex }));\n    }\n\n    // add some delay\n    await timeout(1000);\n    logger(\"directing to dashboard\");\n    props.history.push(\"/dashboard\");\n  }\n\n  const handleAccessMethod = (access: string) => {\n    setAccessMethod(access);\n  }\n\n  const handleShowAccessMethod = (selectedRole: string) => {\n    setRole(selectedRole);\n    setShowAccessMethod(true);\n  }\n\n  const toggleDirectToDashboard = () => {\n    setIsDirectDashboard(true);\n  }\n\n  const resetView = () => {\n    setRole('');\n    setShowAccessMethod(false);\n    setAccessMethod('');\n  }\n    \n  const DisplayAccessMethod = () => {\n    switch (accessMethod) {\n      case AccountType.KEYSTORE: \n        return <WalletKeystore \n                  onReturnCallback={resetWalletsClicked} \n                  onWalletLoadingCallback={toggleDirectToDashboard} \n                  onSuccessCallback={redirectToDashboard} \n                  role={role} />;\n      case AccountType.ZILPAY:\n        return <WalletZilPay \n                  onReturnCallback={resetWalletsClicked} \n                  onWalletLoadingCallback={toggleDirectToDashboard}\n                  onSuccessCallback={redirectToDashboard}\n                  role={role} />;\n      case AccountType.LEDGER:\n        return <WalletLedger \n                  onReturnCallback={resetWalletsClicked}\n                  onWalletLoadingCallback={toggleDirectToDashboard} \n                  onSuccessCallback={redirectToDashboard} \n                  role={role} />;\n      default:\n        return null;\n    }\n  }\n\n  const DisplayLoader = () => {\n    logger(\"retrieving wallet info...\");\n    return (\n      <div className=\"wallet-access\">\n        <h2>Retrieving wallet info...</h2>\n        <div className=\"spinner-border dashboard-spinner\" role=\"status\">\n          <span className=\"sr-only\">Connecting...</span>\n        </div>\n      </div>\n    );\n  }\n\n  const toggleTheme = () => {\n    if (darkMode.value === true) {\n      darkMode.disable();\n    } else {\n      darkMode.enable();\n    }\n  }\n\n  const toggleZillionLogo = () => {\n    if (darkMode.value === true) {\n      return <img src={ZillionLogo} alt=\"zillion\" width=\"480px\" className=\"mt-2 mb-4 zillion-logo\" />;\n    } else {\n      return <img src={ZillionLightLogo} alt=\"zillion\" width=\"480px\" className=\"mt-2 mb-4 zillion-logo\" />;\n    }\n  }\n\n  const handleExplorerSearchAddress = (e: any) => {\n    setExplorerSearchAddress(e.target.value);\n  }\n\n  const handleExplorerKeyPress = (e: any) => {\n    if (e.keyCode === 13) {\n      // Enter key\n      // proceed to search\n      explorerCheckRewards();\n    }\n  }\n\n  const explorerCheckRewards = () => {\n    const zillionExplorerUrl = \"/address/\" + explorerSearchAddress\n    props.history.push(zillionExplorerUrl);\n  };\n\n  useEffect(() => {\n    if (env === Environment.PROD) {\n      setSelectedNetwork(Network.MAINNET);\n    } else {\n      setSelectedNetwork(Network.TESTNET);\n    }\n    dispatch(QUERY_AND_UPDATE_STAKING_STATS());\n  }, [env, selectedNetwork, dispatch]);\n\n  useEffect(() => {\n    window.onbeforeunload = null;\n  }, []);\n\n\n  return (\n    <div className=\"cover\">\n      <div className=\"container-fluid\">\n        <div className=\"row align-items-center\">\n          <div className=\"cover-content col-12 text-center\">\n            \n            <WarningBanner />\n\n            <div \n              id=\"home-mini-navbar\" \n              className={\n                ContractState.IS_PAUSED.toString() === \"true\" ? \n                'home-mini-navbar-disabled d-flex align-items-end mr-4' : \n                'home-mini-navbar-enabled d-flex align-items-end mr-4'}>\n\n              <div>\n                <button type=\"button\" className=\"btn btn-theme shadow-none mr-3\" onClick={toggleTheme}>\n                  { \n                    darkMode.value === true ? \n                      <IconSun width=\"20\" height=\"20\"/> : \n                      <IconMoon width=\"20\" height=\"20\"/>\n                  }\n                </button>\n              </div>\n\n              { \n                ( env === Environment.STAGE || env === Environment.PROD ) && \n                <span className=\"mr-2\">{selectedNetwork}</span>\n              }\n\n            </div>\n\n            <div className=\"heading\">\n              <>{toggleZillionLogo()}</>\n              <p className=\"tagline\">Staking with Zilliqa. Simplified!</p>\n            </div>\n\n            {\n              !isShowAccessMethod ?\n\n              \n              <div className=\"initial-load\">\n                { /* sign in and seed node table */ }\n                <div className=\"btn btn-sign-in mt-4 mx-3\" onClick={() => handleShowAccessMethod(Role.DELEGATOR.toString())}>Sign in for Delegators</div>\n                <div className=\"btn btn-sign-in mt-4 mx-3\" onClick={() => handleShowAccessMethod(Role.OPERATOR.toString())}>Sign in for Operators</div>\n                <div \n                    className=\"btn btn-sign-in mt-4 mx-3\" \n                    onClick={() => window.location.href = 'https://dapp.avely.fi/'} \n                    style={{ backgroundColor: '#FF6FAC', color: 'white' }}\n                >\n                  Liquid Staking\n                </div>\n\n                <div className=\"d-flex justify-content-center h-100\">\n                  <div className=\"explorer-search\">\n                    <input type=\"text\" className=\"explorer-search-input\" value={explorerSearchAddress} onKeyDown={handleExplorerKeyPress} onChange={handleExplorerSearchAddress} placeholder=\"Enter wallet address to check rewards\" maxLength={42}/>\n                    <button type=\"button\" className=\"btn explorer-search-icon shadow-none\" onClick={() => explorerCheckRewards()}><IconSearch width=\"18\" height=\"18\" /></button>\n                  </div>\n                </div>\n\n                <RewardCountdownTable />\n                <LandingStatsTable />\n\n                <div id=\"home-ssn-details\" className=\"container\">\n                  <div className=\"row pl-2 pt-4\">\n                    <div className=\"col text-left\">\n                      <h2>Staked Seed Nodes</h2>\n                      <p className=\"info mt-4 mb-0\">Please refer to our&nbsp; \n                          <a className=\"info-link\" href={chainInfo.staking_viewer ? \n                              chainInfo.staking_viewer : \n                              \"https://zilliqa.com/\"} \n                                target=\"_blank\" \n                                rel=\"noopener noreferrer\">\n                                   Staking Viewer \n                          </a> \n                        &nbsp;for more information on the nodes' statuses.\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"col-12 content\">\n                        <SsnTable />\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              :\n\n              !accessMethod ?\n\n              <>\n                { /* no wallets selected - show wallets to connect */ }\n                <p className=\"wallet-connect-text animate__animated animate__fadeIn\"><strong>Connect your wallet to start</strong></p>\n                <div id=\"wallet-access\" className=\"row align-items-center justify-content-center animate__animated animate__fadeIn mb-4\">\n\n                  <div \n                    className=\"btn-wallet-access d-block\" \n                    onClick={() => handleAccessMethod(AccountType.KEYSTORE)}>\n                      <IconKeystoreLine className=\"home-icon my-4\" height=\"42px\" /><span className=\"d-block mt-0.5\">Keystore</span>\n                  </div>\n\n                  <div \n                    className=\"btn-wallet-access d-block\" \n                    onClick={() => handleAccessMethod(AccountType.LEDGER)}>\n                      <IconLedgerLine className=\"home-icon icon-ledger-line my-4\" /><span className=\"d-block mt-0.5\">Ledger</span>\n                  </div>\n\n                  <div \n                    className=\"btn-wallet-access d-block\" \n                    onClick={() => handleAccessMethod(AccountType.ZILPAY)} \n                    data-tip={ env === Environment.PROD ? \"Ensure your ZilPay is on Mainnet network\" : \"Ensure your ZilPay is on Testnet network\" }>\n                      <IconZilPayLine className=\"home-icon icon-zilpay-line my-4\" /><span className=\"d-block mt-0.5\">ZilPay</span>\n                  </div>\n                  \n                  <ReactTooltip place=\"bottom\" type=\"light\" effect=\"float\" />\n                </div>\n                <button type=\"button\" className=\"btn btn-user-action-cancel mt-5 animate__animated animate__fadeIn\" onClick={() => resetView()}>Back to Main</button>\n              </>\n\n              :\n\n              <>\n              {/* wallet selected - show chosen wallet component */}\n              { isDirectDashboard ? \n              \n              <>{DisplayLoader()}</> \n              \n              :\n              \n              <>{DisplayAccessMethod()}</> }\n              \n              </>\n            }\n          </div>\n          <ToastContainer hideProgressBar={true} />\n          <Footer networkLabel={selectedNetwork} />\n          <DisclaimerModal />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(Home);\n","import React from 'react';\nimport { StakeModalData } from '../util/interface';\nimport { ButtonText, ContractState } from '../util/enum';\nimport { useAppDispatch } from '../store/hooks';\nimport { UPDATE_STAKE_MODAL_DATA } from '../store/userSlice';\n\n\nfunction DelegatorDropdown(props: any) {\n    const dispatch = useAppDispatch();\n    // from staking-portfolio\n    // modal data is a state variable on dashboard\n    // delegAmt, rewards in Qa\n    const { \n        ssnName,\n        ssnAddress,\n        delegAmt,\n        rewards,\n    } = props;\n\n    const handleClaimRewards = () => {\n        dispatch(UPDATE_STAKE_MODAL_DATA({\n            stake_modal: {\n                ssnName: ssnName,\n                ssnAddress: ssnAddress,\n                rewards: rewards,\n            } as StakeModalData\n        }));\n    };\n\n    const handleTransferStake = () => {\n        dispatch(UPDATE_STAKE_MODAL_DATA({\n            stake_modal: {\n                ssnName: ssnName,\n                ssnAddress: ssnAddress,\n                delegAmt: delegAmt,\n            } as StakeModalData\n        }));\n    };\n\n    const handleWithdrawStake = () => {\n        dispatch(UPDATE_STAKE_MODAL_DATA({\n            stake_modal: {\n                ssnName: ssnName,\n                ssnAddress: ssnAddress,\n                delegAmt: delegAmt,\n            } as StakeModalData\n        }));\n    };\n\n    return (\n        <div id=\"delegator-dropdown\" className=\"dropdown dropright\">\n            <button \n                className={ContractState.IS_PAUSED.toString() === 'true' ?\n                            'btn btn-contract-small-disabled dropdown-toggle shadow-none' :\n                            'btn btn-contract-small dropdown-toggle shadow-none'}\n                data-display=\"static\" \n                type=\"button\" \n                id=\"dropdown-menu-btn\" \n                data-toggle=\"dropdown\" \n                aria-haspopup=\"true\" \n                aria-expanded=\"false\"\n                disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                    {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Manage'}\n            </button>\n            <div className=\"dropdown-menu delegator-menu animate__animated animate__fadeIn\" aria-labelledby=\"dropdown-menu-btn\">\n                <button \n                    type=\"button\" \n                    className=\"btn btn-deleg-action shadow-none\" \n                    data-toggle=\"modal\" \n                    data-target=\"#withdraw-reward-modal\" \n                    data-keyboard=\"false\" \n                    data-backdrop=\"static\"\n                    onClick={handleClaimRewards}\n                    disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                        {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Claim Rewards'}\n                </button>\n                <button \n                    type=\"button\" \n                    className=\"btn btn-deleg-action shadow-none\" \n                    data-toggle=\"modal\" \n                    data-target=\"#redeleg-stake-modal\" \n                    data-keyboard=\"false\" \n                    data-backdrop=\"static\"\n                    onClick={handleTransferStake}\n                    disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                        {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Transfer Stake'}\n                </button>\n                <button\n                    type=\"button\"\n                    className=\"btn btn-deleg-action shadow-none\" \n                    data-toggle=\"modal\" \n                    data-target=\"#withdraw-stake-modal\" \n                    data-keyboard=\"false\" \n                    data-backdrop=\"static\"\n                    onClick={handleWithdrawStake}\n                    disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                        {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Initiate Stake Withdrawal'}\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default DelegatorDropdown;","import React, { useMemo } from 'react';\nimport { useTable, useSortBy } from 'react-table';\nimport ReactTooltip from 'react-tooltip';\n\nimport { OperationStatus } from '../util/enum';\nimport { convertQaToCommaStr, convertQaToZilFull } from '../util/utils';\n\nimport { DelegStakingPortfolioStats } from '../util/interface';\nimport DelegatorDropdown from './delegator-dropdown';\nimport { useAppSelector } from '../store/hooks';\nimport SpinnerNormal from './spinner-normal';\n\n\nfunction Table({ columns, data }: any) {\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns,\n            data,\n            initialState : {\n                pageIndex: 0,\n                sortBy: [\n                    {\n                        id: 'delegAmt',\n                        desc: true\n                    }\n                ]\n            }\n        }, useSortBy);\n    \n    return (\n        <table className=\"table table-responsive-sm\" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map(column => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>{column.render('Header')}</th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                            })}\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction StakingPortfolio(props: any) {\n    // const networkURL = props.network;\n    // const data: DelegStakingPortfolioStats[] = props.data;\n    const data: DelegStakingPortfolioStats[] = useAppSelector(state => state.user.deleg_staking_portfolio_list);\n    const loading: OperationStatus = useAppSelector(state => state.user.is_deleg_stats_loading);\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'name',\n                accessor: 'ssnName',\n            },\n            {\n                Header: 'deposit (ZIL)',\n                accessor: 'delegAmt',\n                Cell: ({ row }: any) => <span>{convertQaToCommaStr(row.original.delegAmt)}</span>\n            },\n            {\n                Header: 'rewards (ZIL)',\n                accessor: 'rewards',\n                Cell: ({ row }: any) => \n                    <>\n                    <span data-for=\"rewards-tip\" data-tip={convertQaToZilFull(row.original.rewards)}>{convertQaToCommaStr(row.original.rewards)}</span>\n                    <ReactTooltip id=\"rewards-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\" />\n                    </>\n            },\n            {\n                Header: 'actions',\n                accessor: 'actions',\n                Cell: ({ row }: any) =>\n                    <>\n                    <DelegatorDropdown\n                        ssnName={row.original.ssnName}\n                        ssnAddress={row.original.ssnAddress}\n                        delegAmt={row.original.delegAmt}\n                        rewards={row.original.rewards} />\n                    </>\n            }\n        ], []\n    );\n\n    return (\n        <>\n        {\n            loading === OperationStatus.PENDING &&\n            <SpinnerNormal class=\"spinner-border dashboard-spinner mb-4\" />\n        }\n        {\n            loading === OperationStatus.COMPLETE &&\n            <>\n             { (data.length === 0) && <div className=\"d-block px-4 pb-3 text-left\"><em>You have not deposited in any nodes yet.</em></div> }\n             { (data.length > 0) && <Table columns={columns} data={data} /> }\n            </>\n        }\n        </>\n    );\n}\n\nexport default StakingPortfolio;","import React from 'react';\n\nconst ModalPending = () => {\n    return (\n        <div className=\"modal-body modal-processing text-center\">\n            <h2>Processing...</h2>\n            <p className=\"mt-4\">Please wait 1 - 2 minutes while we process the request.</p>\n            <div className='spinner-border dashboard-spinner' role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </div>\n        </div>\n    )\n};\n\nexport default ModalPending;","import React from 'react';\n\nfunction IconCheckboxCircle(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.997-6l7.07-7.071-1.414-1.414-5.656 5.657-2.829-2.829-1.414 1.414L11.003 16z\"/></svg>\n    );\n}\n\nexport default IconCheckboxCircle;","import React from 'react';\nimport { getTxnLink } from '../../util/utils';\n\nimport IconCheckboxCircle from '../icons/checkbox-circle';\n\nconst ModalSent = (props: any) => {\n    return (\n        <div className=\"modal-body modal-sent text-center\">\n            <IconCheckboxCircle className=\"modal-icon-success\" width=\"80\" height=\"80\" />\n            <h2 className=\"mt-2\">Transaction Sent</h2>\n            <div className=\"txn-id\">\n                <a href={getTxnLink(props.txnId, props.networkURL)} target=\"_blank\" rel=\"noopener noreferrer\">{props.txnId}</a>\n            </div>\n            <button type=\"button\" className=\"btn btn-user-action mt-2 mx-2\" data-dismiss=\"modal\" onClick={props.handleClose}>Done</button>\n        </div>\n    );\n};\n\nexport default ModalSent;","import React from 'react';\n\nfunction IconArrowDropdownLine(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 15l-4.243-4.243 1.415-1.414L12 12.172l2.828-2.829 1.415 1.414z\"/></svg>\n    );\n}\n\nexport default IconArrowDropdownLine;","import React from 'react';\n\nfunction IconArrowDropupLine(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 11.828l-2.828 2.829-1.415-1.414L12 9l4.243 4.243-1.415 1.414L12 11.828z\"/></svg>\n    );\n}\n\nexport default IconArrowDropupLine;","import BigNumber from 'bignumber.js';\nimport React from 'react';\nimport IconArrowDropdownLine from '../icons/arrow-dropdown-line';\nimport IconArrowDropupLine from '../icons/arrow-dropup-line';\n\nfunction GasSettings(props: any) {\n    const {\n        gasOption, \n        gasPrice, \n        onBlurGasPrice, \n        onGasPriceChange,\n        gasLimit,\n        onBlurGasLimit,\n        onGasLimitChange,\n        setGasOption,\n    } = props;\n\n    const computeGasFees = () => {\n        if (!gasPrice || !gasLimit) {\n            return new BigNumber(0);\n        }\n        const fees = new BigNumber(gasPrice).multipliedBy(new BigNumber(gasLimit));\n        return fees;\n    }\n\n    return (\n        <div>\n            {\n                gasOption &&\n                <div className=\"mt-4\">\n                    <h3 id=\"fee-section-heading\">Adjust Gas Fees</h3>\n                    <div className=\"row my-4\">\n                        <div className=\"col mr-4\">\n                            <div className=\"modal-label mb-2\"><strong>Gas Price</strong></div>\n                            <div className=\"input-group mb-2\">\n                                <input \n                                    type=\"text\" \n                                    className=\"form-control shadow-none\" \n                                    value={gasPrice} \n                                    onBlur={onBlurGasPrice}\n                                    onChange={onGasPriceChange} \n                                />\n                            </div>\n                        </div>\n                        <div className=\"col\">\n                            <div className=\"modal-label mb-2\"><strong>Gas Limit</strong></div>\n                            <div className=\"input-group mb-2\">\n                                <input \n                                    type=\"text\" \n                                    className=\"form-control shadow-none\" \n                                    value={gasLimit} \n                                    onBlur={onBlurGasLimit}\n                                    onChange={onGasLimitChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            }\n            <div className=\"d-flex mb-4\">\n                <div>\n                    <span className=\"fee-head\"><strong>Fee</strong>:  <span className=\"fee\">{ computeGasFees().shiftedBy(-12).toFixed() }</span> ZIL</span>\n                </div>\n                <button \n                    className=\"ml-auto btn advanced-btn shadow-none\"\n                    onClick={() => setGasOption(!gasOption)}>\n                        {\n                            gasOption ? \n                            <div className=\"advanced-btn-div\"><IconArrowDropupLine width=\"28\" height=\"28\" className=\"pb-1\" /><span>Advanced Settings</span></div> : \n                            <div className=\"advanced-btn-div\"><IconArrowDropdownLine width=\"28\" height=\"28\" className=\"pb-1\" /><span>Advanced Settings</span></div>\n                        }\n                </button>\n            </div>\n        </div>\n    );\n}\n\nexport default GasSettings","import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { trackPromise } from 'react-promise-tracker';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from \"../../util/enum\";\nimport { bech32ToChecksum, computeGasFees, convertQaToCommaStr, isDigits, showWalletsPrompt, validateBalance } from '../../util/utils';\nimport Alert from '../alert';\n\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { units } from '@zilliqa-js/zilliqa';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\n\nconst { BN } = require('@zilliqa-js/util');\n\nfunction WithdrawCommModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const commRewards = useAppSelector(state => state.user.operator_stats.commReward);\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const { updateData, updateRecentTransactions } = props;\n    const [txnId, setTxnId] = useState('')\n    const [isPending, setIsPending] = useState('');\n\n    const withdrawComm = async () => {\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.WITHDRAW_COMM,\n                params: []\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n\n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.WITHDRAW_COMM, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setTxnId('');\n            setIsPending('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    return (\n            <div id=\"withdraw-comm-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"withdrawCommModalLabel\" aria-hidden=\"true\">\n                <div className=\"contract-calls-modal modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div className=\"modal-content\">\n                        {\n                            isPending ?\n\n                            <ModalPending />\n\n                            :\n                            \n                            txnId ?\n                            \n                            <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                            :\n\n                            <>\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\" id=\"withdrawCommModalLabel\">Withdraw Commission</h5>\n                                <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                    <span aria-hidden=\"true\">&times;</span>\n                                </button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <div className=\"row node-details-wrapper mb-4\">\n                                    <div className=\"col node-details-panel\">\n                                        <h3>Commission Rewards</h3>\n                                        <span>{commRewards ? convertQaToCommaStr(commRewards) : '0.000'} ZIL</span>\n                                    </div>\n                                </div>\n                                <p>Are you sure you wish to withdraw <strong>{commRewards ? convertQaToCommaStr(commRewards) : '0.000'}</strong> ZIL?</p>\n                                <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                                <div className=\"d-flex mt-2\">\n                                    <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={withdrawComm}>Withdraw</button>\n                                </div>\n                            </div>\n                            </>\n                        }\n                    </div>\n                </div>\n            </div>\n    );\n}\n\nexport default WithdrawCommModal;","import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { trackPromise } from 'react-promise-tracker';\n\nimport { bech32ToChecksum, computeGasFees, isDigits, showWalletsPrompt, validateBalance } from '../../util/utils';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from \"../../util/enum\";\nimport Alert from '../alert';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { units } from '@zilliqa-js/zilliqa';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\n\nconst { BN } = require('@zilliqa-js/util');\n\n\nfunction UpdateReceiverAddress(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const receiver = useAppSelector(state => state.user.operator_stats.receiver);\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const { updateData, updateRecentTransactions } = props;\n    const [newAddress, setNewAddress] = useState('');\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n\n    const updateAddress = async () => {\n        if (!newAddress) {\n            Alert('error', \"Invalid Address\", \"Receiving address should be bech32 or checksum format.\");\n            return null;\n        }\n\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const newReceivingAddress = bech32ToChecksum(newAddress).toLowerCase();\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.UPDATE_RECV_ADDR,\n                params: [\n                    {\n                        vname: 'new_addr',\n                        type: 'ByStr20',\n                        value: `${newReceivingAddress}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n        \n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.UPDATE_RECV_ADDR, txnId);\n            updateData();\n        }\n\n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setNewAddress('');\n            setTxnId('');\n            setIsPending('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    return (\n        <div id=\"update-recv-addr-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"updateRecvAddrModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered\" role=\"document\">\n                <div className=\"modal-content\">\n                    {\n                        isPending ?\n\n                        <ModalPending />\n\n                        :\n\n                        txnId ?\n\n                        <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                        :\n                        <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"updateRecvAddrModalLabel\">Update Receiving Address</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Current Receiving Address</h3>\n                                    <span>{receiver ? receiver : 'none'}</span>\n                                </div>\n                            </div>\n                            <input type=\"text\" className=\"mb-4\" value={newAddress} onChange={(e:any) => setNewAddress(e.target.value)} placeholder=\"Enter new address in bech32 format\" />\n                            <GasSettings\n                                gasOption={gasOption}\n                                gasPrice={gasPrice}\n                                gasLimit={gasLimit}\n                                setGasOption={setGasOption}\n                                onBlurGasPrice={onBlurGasPrice}\n                                onBlurGasLimit={onBlurGasLimit}\n                                onGasPriceChange={onGasPriceChange}\n                                onGasLimitChange={onGasLimitChange}\n                            />\n                            <div className=\"d-flex mt-2\">\n                            <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={updateAddress}>Update</button>\n                            </div>\n                        </div>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default UpdateReceiverAddress;","import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { trackPromise } from 'react-promise-tracker';\n\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from \"../../util/enum\";\nimport { bech32ToChecksum, computeGasFees, convertToProperCommRate, isDigits, percentToContractCommRate, showWalletsPrompt, validateBalance } from '../../util/utils';\nimport Alert from '../alert';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { units } from '@zilliqa-js/zilliqa';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\nimport { logger } from '../../util/logger';\n\nconst { BN } = require('@zilliqa-js/util');\n\nfunction UpdateCommRateModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const commRate = useAppSelector(state => state.user.operator_stats.commRate);\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const { updateData, updateRecentTransactions } = props;\n    const [newRate, setNewRate] = useState('');\n    const [txnId, setTxnId] = useState('')\n    const [isPending, setIsPending] = useState('');\n\n    const updateCommRate = async () => {\n        if (!newRate || !newRate.match(/\\d/)) {\n            Alert('error', \"Invalid Commission Rate\", \"Please enter an appropriate value, e.g. 10.5\");\n            return null;\n        }\n\n        if (newRate.length > 9) {\n            Alert('error', \"Invalid Commission Rate\", \"Commission rate should have a maximum of 7 decimals only.\");\n            return null;\n        }\n\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const contractCommRate = percentToContractCommRate(newRate);\n\n        logger(\"new rate: %o\", contractCommRate);\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.UPDATE_COMM,\n                params: [\n                    {\n                        vname: 'new_rate',\n                        type: 'Uint128',\n                        value: `${contractCommRate}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n\n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.UPDATE_COMM_RATE, txnId);\n            updateData();\n        }\n\n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setNewRate('');\n            setTxnId('');\n            setIsPending('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    return (\n        <div id=\"update-comm-rate-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"updateCommRateModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered\" role=\"document\">\n                <div className=\"modal-content\">\n                    {\n                        isPending ?\n                        \n                        <ModalPending />\n\n                        :\n\n                        txnId ?\n\n                        <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                        :\n\n                        <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"updateCommRateModalLabel\">Update Commission Rate</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Current Commission Rate</h3>\n                                    <span>{commRate ? convertToProperCommRate(commRate).toFixed(2) : '0.00'}&#37;</span>\n                                </div>\n                            </div>\n                            <div className=\"input-group mb-4\">\n                                <input type=\"text\" className=\"form-control shadow-none\" value={newRate} onChange={(e:any) => setNewRate(e.target.value)} placeholder=\"Enter new rate\" maxLength={9} />\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text pl-4 pr-3\">%</span>\n                                </div>\n                            </div>\n                            <GasSettings\n                                gasOption={gasOption}\n                                gasPrice={gasPrice}\n                                gasLimit={gasLimit}\n                                setGasOption={setGasOption}\n                                onBlurGasPrice={onBlurGasPrice}\n                                onBlurGasLimit={onBlurGasLimit}\n                                onGasPriceChange={onGasPriceChange}\n                                onGasLimitChange={onGasLimitChange}\n                            />\n                            <div className=\"d-flex mt-2\">\n                                <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={updateCommRate}>Update</button>\n                            </div>\n                        </div>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default UpdateCommRateModal;","import React, { useState, useEffect, useCallback } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport { toast } from 'react-toastify';\n\nimport Alert from '../alert';\nimport { bech32ToChecksum, convertZilToQa, convertToProperCommRate, showWalletsPrompt, convertQaToCommaStr, isDigits } from '../../util/utils';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from '../../util/enum';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { StakeModalData } from '../../util/interface';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport GasSettings from './gas-settings';\n\nconst BigNumber = require('bignumber.js');\nconst { BN, units } = require('@zilliqa-js/util');\n\n\nfunction DelegateStakeModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const minDelegStake = useAppSelector(state => state.staking.min_deleg_stake);\n    const balance = useAppSelector(state => state.user.balance); // Qa\n    const minDelegStakeDisplay = units.fromQa(new BN(minDelegStake), units.Units.Zil); // for display\n    \n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const { updateData, updateRecentTransactions } = props;\n    const stakeModalData: StakeModalData = useAppSelector(state => state.user.stake_modal_data);\n\n    const ssnAddress = stakeModalData.ssnAddress; // bech32\n\n    const [delegAmt, setDelegAmt] = useState('0'); // in ZIL\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n\n\n    const delegateStake = async () => {\n        if (!ssnAddress) {\n            Alert('error', \"Invalid Node\", \"Node address should be bech32 or checksum format.\");\n            return null;\n        }\n\n        let delegAmtQa = '';\n\n        if (!delegAmt) {\n            Alert('error', \"Invalid Stake Amount\", \"Stake amount shoud not be empty.\");\n            return null;\n        } else {\n            try {\n                delegAmtQa = convertZilToQa(delegAmt);\n                const isLessThanMinDeleg = new BigNumber(delegAmtQa).isLessThan(minDelegStake);\n                \n\n                if (isLessThanMinDeleg) {\n                    Alert('error', \"Invalid Stake Amount\", \"Minimum stake amount is \" + minDelegStakeDisplay + \" ZIL.\");\n                    return null;\n                }\n\n                const gasFeesQa = new BigNumber(gasPrice).multipliedBy(gasLimit);\n                const combinedFees = new BigNumber(delegAmtQa).plus(gasFeesQa);\n                const combinedFeesZil = units.fromQa(new BN(combinedFees.toString()), units.Units.Zil);\n                const remaningBalance = new BigNumber(balance).minus(delegAmtQa);\n                const isBalanceSufficient = remaningBalance.isGreaterThan(gasFeesQa);\n\n                if (!isBalanceSufficient) {\n                    Alert('error', \n                        \"Insufficient Balance\", \n                        \"Your wallet balance is insufficient to pay for the staked amount and gas fees combined. Total amount required is \" + combinedFeesZil + \" ZIL.\");\n                    Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(new BN(gasFeesQa), units.Units.Zil) + \" ZIL.\");\n                    return null;\n                }\n\n            } catch (err) {\n                // user input is malformed\n                // cannot convert input zil amount to qa\n                Alert('error', \"Invalid Stake Amount\", \"Minimum stake amount is \" + minDelegStakeDisplay + \" ZIL.\");\n                return null;\n            }\n        }\n\n        // create tx params\n\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const ssnChecksumAddress = bech32ToChecksum(ssnAddress).toLowerCase();\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(`${delegAmtQa}`),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.DELEGATE_STAKE,\n                params: [\n                    {\n                        vname: 'ssnaddr',\n                        type: 'ByStr20',\n                        value: `${ssnChecksumAddress}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const setDefaultStakeAmt = useCallback(() => {\n        if (minDelegStake) {\n            setDelegAmt(units.fromQa(new BN(minDelegStake), units.Units.Zil).toString());\n        } else {\n            setDelegAmt('0');\n        }\n    }, [minDelegStake]);\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard functions to update recent transactions and poll data\n        if (txnId) {\n            updateRecentTransactions(TransactionType.DELEGATE_STAKE, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setDefaultStakeAmt();\n            setTxnId('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const handleDelegAmt = (e: any) => {\n        setDelegAmt(e.target.value);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    useEffect(() => {\n        setDefaultStakeAmt();\n    }, [setDefaultStakeAmt]);\n\n    return (\n        <div id=\"delegate-stake-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"delegateStakeModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\n                 <div className=\"modal-content\">\n                     {\n                         isPending ?\n\n                         <ModalPending />\n\n                         :\n\n                         txnId ?\n\n                         <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                         :\n\n                         <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"delegateStakeModalLabel\">Stake</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel mr-4\">\n                                    <h3>{stakeModalData.ssnName}</h3>\n                                    <span>{stakeModalData.ssnAddress}</span>\n                                </div>\n                                <div className=\"col node-details-panel\">\n                                    <h3>Commission Rate</h3>\n                                    <span>{convertToProperCommRate(stakeModalData.commRate).toFixed(2)}%</span>\n                                </div>\n                            </div>\n\n                            <div className=\"modal-label mb-2\"><strong>Enter stake amount</strong></div>\n                            <div className=\"input-group mb-2\">\n                                <input type=\"text\" className=\"form-control shadow-none\" value={delegAmt} onChange={handleDelegAmt} />\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text pl-4 pr-3\">ZIL</span>\n                                </div>\n                            </div>\n                            <p><small><strong>Available</strong>: <strong>{convertQaToCommaStr(balance.toString())}</strong> ZIL</small></p>\n\n                            <GasSettings\n                                gasOption={gasOption}\n                                gasPrice={gasPrice}\n                                gasLimit={gasLimit}\n                                setGasOption={setGasOption}\n                                onBlurGasPrice={onBlurGasPrice}\n                                onBlurGasLimit={onBlurGasLimit}\n                                onGasPriceChange={onGasPriceChange}\n                                onGasLimitChange={onGasLimitChange}\n                            />\n\n                            <div className=\"mb-4\">\n                                <small><strong>Notes</strong></small>\n                                <ul>\n                                    <li><small>Minimum staking amount is <strong>{minDelegStakeDisplay}</strong> ZIL.</small></li>\n                                    <li><small>Please ensure you have at least <strong>100 ZIL</strong> after staking to pay for gas fees for future transactions such as withdrawal.</small></li>\n                                </ul>\n                            </div>\n                            <div className=\"d-flex\">\n                                <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={delegateStake}>Stake</button>\n                            </div>\n                        </div>\n                         </>\n                     }\n                 </div>\n            </div>\n        </div>\n    );\n}\n\nexport default DelegateStakeModal;","import React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useTable, useSortBy } from 'react-table';\nimport ReactTooltip from 'react-tooltip';\nimport { toast } from 'react-toastify';\nimport { trackPromise } from 'react-promise-tracker';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport Alert from '../alert';\nimport { bech32ToChecksum, convertZilToQa, convertQaToCommaStr, convertToProperCommRate, getTruncatedAddress, showWalletsPrompt, convertQaToZilFull, isDigits, computeGasFees, isRespOk, validateBalance } from '../../util/utils';\nimport { ProxyCalls, OperationStatus, TransactionType, AccountType } from '../../util/enum';\nimport { computeDelegRewards } from '../../util/reward-calculator';\n\nimport { useAppSelector } from '../../store/hooks';\nimport { StakeModalData } from '../../util/interface';\nimport { ZilSdk } from '../../zilliqa-api';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport GasSettings from './gas-settings';\nimport BigNumber from 'bignumber.js';\nimport { logger } from '../../util/logger';\n\n\nconst { BN, units } = require('@zilliqa-js/util');\n\n\n// hide the data that contains the sender address\n// no point to transfer to same person\nfunction Table({ columns, data, tableId, senderAddress, handleNodeSelect, hiddenColumns }: any) {\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns, \n            data,\n            initialState : {\n                hiddenColumns : hiddenColumns,\n                sortBy: [\n                    {\n                        id: \"name\",\n                        desc: false\n                    },\n                ]\n            }\n        }, useSortBy);\n\n    return (\n        <table id={tableId} className=\"table table-responsive-md\" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map(column => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>{column.render('Header')}</th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()} onClick={() => handleNodeSelect(row.original)}>\n                            {\n                                (row.original as any).address !== senderAddress &&\n                                \n                                row.cells.map(cell => {\n                                    return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                                })\n                            }\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    );\n}\n\n\nfunction ReDelegateStakeModal(props: any) {\n    const { updateData, updateRecentTransactions } = props;\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const impl = useAppSelector(state => state.blockchain.impl);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const userBase16Address = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const minDelegStake = useAppSelector(state => state.staking.min_deleg_stake);\n    const nodeSelectorOptions = useAppSelector(state => state.staking.ssn_dropdown_list);\n    const stakeModalData: StakeModalData = useAppSelector(state => state.user.stake_modal_data);\n\n    const minDelegStakeDisplay = units.fromQa(new BN(minDelegStake), units.Units.Zil);\n    const fromSsn = stakeModalData.ssnAddress; // bech32\n    const [toSsn, setToSsn] = useState('');\n    const [toSsnName, setToSsnName] = useState('');\n    const [delegAmt, setDelegAmt] = useState('0'); // in ZIL\n\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n    const [showNodeSelector, setShowNodeSelector] = useState(false);\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    \n    // checks if there are any unwithdrawn rewards or buffered deposit\n    const hasRewardToWithdraw = async () => {\n        const ssnChecksumAddress = bech32ToChecksum(fromSsn).toLowerCase();\n        \n        const last_reward_cycle_json = await ZilSdk.getSmartContractSubState(impl, \"lastrewardcycle\");\n        const last_buf_deposit_cycle_deleg_json = await ZilSdk.getSmartContractSubState(impl, \"last_buf_deposit_cycle_deleg\", [userBase16Address]);\n\n        if (!isRespOk(last_reward_cycle_json)) {\n            return false;\n        }\n\n        if (!isRespOk(last_buf_deposit_cycle_deleg_json)) {\n            return false;\n        }\n\n        // compute rewards\n        const delegRewards = new BN(await computeDelegRewards(impl, ssnChecksumAddress, userBase16Address));\n\n        if (delegRewards.gt(new BN(0))) {\n            Alert('info', \"Unwithdrawn Rewards Found\", \"Please withdraw the rewards before transferring.\");\n            return true;\n        }\n\n        // secondary buffered deposits check\n        // different map\n        // check if user has buffered deposits\n        if (last_buf_deposit_cycle_deleg_json.last_buf_deposit_cycle_deleg[userBase16Address].hasOwnProperty(ssnChecksumAddress)) {\n                const lastDepositCycleDeleg = parseInt(last_buf_deposit_cycle_deleg_json.last_buf_deposit_cycle_deleg[userBase16Address][ssnChecksumAddress]);\n                const lastRewardCycle = parseInt(last_reward_cycle_json.lastrewardcycle);\n                if (lastRewardCycle <= lastDepositCycleDeleg) {\n                    Alert('info', \"Buffered Deposits Found\", \"Please wait for the next cycle before transferring.\");\n                    return true;\n                }\n        }\n\n       // corner case check\n        // if user has buffered deposits\n        // happens if user first time deposit\n        // reward is zero but contract side warn has unwithdrawn rewards\n        // user cannot withdraw zero rewards from UI\n        // if (contract.buff_deposit_deleg.hasOwnProperty(userBase16Address) &&\n        //     contract.buff_deposit_deleg[userBase16Address].hasOwnProperty(ssnChecksumAddress)) {\n        //         const buffDepositMap: any = contract.buff_deposit_deleg[userBase16Address][ssnChecksumAddress];\n        //         const lastCycleDelegNum = Object.keys(buffDepositMap).sort().pop() || '0';\n        //         const lastRewardCycle = parseInt(contract.lastrewardcycle);\n\n        //         if (lastRewardCycle < parseInt(lastCycleDelegNum + 2)) {\n        //             // deposit still in buffer \n        //             // have to wait for 2 cycles to receive rewards to clear buffer\n        //             Alert('info', \"Buffered Deposits Found\", \"Please wait for 2 more cycles for your rewards to be issued before transferring.\");\n        //             return true;\n        //         }\n        // }\n\n        return false;\n    }\n\n    const redeleg = async () => {\n        let delegAmtQa;\n\n        if (!fromSsn || !toSsn) {\n            Alert('error', \"Invalid Node\", \"Please select a node.\");\n            return null;\n        }\n\n        if (!delegAmt) {\n            Alert('error', \"Invalid Transfer Amount\", \"Transfer amount cannot be empty.\");\n            return null;\n        } else {\n            try {\n                delegAmtQa = convertZilToQa(delegAmt);\n            } catch (err) {\n                // user input is malformed\n                // cannot convert input zil amount to qa\n                Alert('error', \"Invalid Transfer Amount\", \"Please check your transfer amount again.\");\n                return null;\n            }\n        }\n\n        if (await validateBalance(userBase16Address) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        setIsPending(OperationStatus.PENDING);\n\n        // check if deleg has unwithdrawn rewards or buffered deposits for the from ssn address\n        const hasRewards = await hasRewardToWithdraw();\n        if (hasRewards) {\n            setIsPending('');\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const fromSsnChecksumAddress = bech32ToChecksum(fromSsn).toLowerCase();\n        const toSsnChecksumAddress = bech32ToChecksum(toSsn).toLowerCase();\n        const currentAmtQa = stakeModalData.delegAmt;\n        const leftOverQa = new BN(currentAmtQa).sub(new BN(delegAmtQa));\n\n        // check if redeleg more than current deleg amount\n        if (new BN(delegAmtQa).gt(new BN(currentAmtQa))) {\n            Alert('info', \"Invalid Transfer Amount\", \"You only have \" + convertQaToCommaStr(currentAmtQa) + \" ZIL to transfer.\" );\n            setIsPending('');\n            return null;\n        } else if (!leftOverQa.isZero() && leftOverQa.lt(new BN(minDelegStake))) {\n            // check leftover amount\n            // if less than min stake amount\n            Alert('info', \"Invalid Transfer Amount\", \"Please leave at least \" +  minDelegStakeDisplay + \" ZIL (min. stake amount) or transfer ALL.\");\n            setIsPending('');\n            return null;\n        }\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.REDELEGATE_STAKE,\n                params: [\n                    {\n                        vname: 'ssnaddr',\n                        type: 'ByStr20',\n                        value: `${fromSsnChecksumAddress}`,\n                    },\n                    {\n                        vname: 'to_ssn',\n                        type: 'ByStr20',\n                        value: `${toSsnChecksumAddress}`,\n                    },\n                    {\n                        vname: 'amount',\n                        type: 'Uint128',\n                        value: `${delegAmtQa}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    // set default transfer amt to current stake amt\n    const setDefaultDelegAmt = useCallback(() => {\n        if (stakeModalData.delegAmt) {\n            const tempDelegAmt = convertQaToZilFull(stakeModalData.delegAmt);\n            setDelegAmt(tempDelegAmt);\n        } else {\n            setDelegAmt('0');\n        }\n    }, [stakeModalData.delegAmt]);\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashbaord methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.TRANSFER_STAKE, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setToSsn('');\n            setToSsnName('');\n            setTxnId('');\n            setDefaultDelegAmt();\n            setShowNodeSelector(false);\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    // row contains a json from react-table, similar to the react-table header declaration\n    const handleNodeSelect = (row: any) => {\n        setToSsn(row.address);\n        setToSsnName(row.name);\n        // reset the view\n        toggleNodeSelector();\n    }\n\n    const handleDelegAmt = (e: any) => {\n        setDelegAmt(e.target.value);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    const toggleNodeSelector = () => {\n        logger(\"toggle node selector: %o\", showNodeSelector);\n        setShowNodeSelector(!showNodeSelector);\n    }\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'name',\n                accessor: 'name'\n            },\n            {\n                Header: 'address',\n                accessor: 'address',\n                Cell: ({ row }: any) => \n                    <>\n                    <span data-tip={row.original.address}>\n                        {getTruncatedAddress(row.original.address)}\n                    </span>\n                    <ReactTooltip place=\"bottom\" type=\"dark\" effect=\"float\" />\n                    </>\n            },\n            {\n                Header: 'Delegators',\n                accessor: 'delegNum',\n            },\n            {\n                Header: 'Stake Amount (ZIL)',\n                accessor: 'stakeAmt',\n                Cell: ({ row }: any) => \n                    <>\n                    <span>{convertQaToCommaStr(row.original.stakeAmt)}</span>\n                    </>\n            },\n            {\n                Header: 'Comm. Rate (%)',\n                accessor: 'commRate',\n                Cell: ({ row }: any) =>\n                    <span>{convertToProperCommRate(row.original.commRate).toFixed(2)}</span>\n            }\n            // eslint-disable-next-line\n        ], []\n    )\n\n    const getHiddenColumns = () => {\n        let hiddenColumns = [\"address\"];\n        return hiddenColumns;\n    }\n\n    useEffect(() => {\n        setDefaultDelegAmt();\n    }, [setDefaultDelegAmt]);\n\n    return (\n        <div id=\"redeleg-stake-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"redelegModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\n                <div className=\"modal-content\">\n                    {\n                        isPending ?\n\n                        <ModalPending />\n\n                        :\n\n                        txnId ?\n\n                        <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose}/>\n\n                        :\n\n                        <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"withdrawRewardModalLabel\">Transfer Stake</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            {\n                                !showNodeSelector &&\n                                <>\n                                    {/* sender */}\n                                    <small><strong>From</strong></small>\n                                    <div className=\"row node-details-wrapper mb-4\">\n                                        <div className=\"col node-details-panel mr-4\">\n                                            <h3>{stakeModalData.ssnName}</h3>\n                                            <span>{stakeModalData.ssnAddress}</span>\n                                        </div>\n                                        <div className=\"col node-details-panel\">\n                                            <h3>Current Deposit</h3>\n                                            <span>{convertQaToCommaStr(stakeModalData.delegAmt)} ZIL</span>\n                                        </div>\n                                    </div>\n\n                                    {/* recipient*/}\n                                    <small><strong>To</strong></small>\n                                    \n                                    {!toSsn &&\n                                        <button type=\"button\" className=\"mb-4 btn btn-contract btn-block shadow-none\" onClick={() => toggleNodeSelector()}>Select a node</button>\n                                    }\n\n                                    { toSsn &&\n                                        <>\n                                        <div className=\"row node-details-wrapper mb-4\">\n                                            <div className=\"col node-details-panel\">\n                                                <h3>{toSsnName}</h3>\n                                                <span>{toSsn}</span>\n                                                <button type=\"button\" className=\"btn btn-change-node shadow-none\" onClick={() => toggleNodeSelector()}>Change</button>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"modal-label mb-2\"><strong>Enter transfer amount</strong></div>\n                                        <div className=\"input-group mb-4\">\n                                            <input type=\"text\" className=\"form-control shadow-none\" value={delegAmt} onChange={handleDelegAmt} />\n                                            <div className=\"input-group-append\">\n                                                <span className=\"input-group-text pl-4 pr-3\">ZIL</span>\n                                            </div>\n                                        </div>\n                                        </>\n                                    }\n\n                                    <GasSettings\n                                        gasOption={gasOption}\n                                        gasPrice={gasPrice}\n                                        gasLimit={gasLimit}\n                                        setGasOption={setGasOption}\n                                        onBlurGasPrice={onBlurGasPrice}\n                                        onBlurGasLimit={onBlurGasLimit}\n                                        onGasPriceChange={onGasPriceChange}\n                                        onGasLimitChange={onGasLimitChange}\n                                    />\n\n                                    <div className=\"d-flex\">\n                                        <button type=\"button\" className=\"btn btn-user-action mt-2 mx-auto shadow-none\" onClick={redeleg}>Transfer Stake</button>\n                                    </div>\n                                </>\n                            }\n\n                            {\n                                showNodeSelector &&\n\n                                <>\n                                    <h2 className=\"node-details-subheading mb-2\">Select a node to transfer to</h2>\n                                    <div id=\"transfer-stake-details\" className=\"text-center\">\n                                        <Table \n                                            columns={columns} \n                                            data={nodeSelectorOptions} \n                                            senderAddress={stakeModalData.ssnAddress} \n                                            handleNodeSelect={handleNodeSelect}\n                                            hiddenColumns={getHiddenColumns()} />\n                                    </div>\n                                    <div className=\"d-flex\">\n                                        <button type=\"button\" className=\"btn btn-user-action-cancel mt-4 mx-auto shadow-none\" onClick={() => toggleNodeSelector()}>Back</button>\n                                    </div>\n                                </>\n                            }\n\n                        </div>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ReDelegateStakeModal;","import React, { useState, useEffect, useCallback } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport { toast } from 'react-toastify';\n\nimport Alert from '../alert';\nimport { bech32ToChecksum, convertZilToQa, convertQaToCommaStr, showWalletsPrompt, convertQaToZilFull, validateBalance, isDigits, computeGasFees, isRespOk } from '../../util/utils';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from '../../util/enum';\nimport { computeDelegRewards } from '../../util/reward-calculator';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { StakeModalData } from '../../util/interface';\nimport { ZilSdk } from '../../zilliqa-api';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\nimport { logger } from '../../util/logger';\n\n\nconst { BN, units } = require('@zilliqa-js/util');\n\n\nfunction WithdrawStakeModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const impl = useAppSelector(state => state.blockchain.impl);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const userBase16Address = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const minDelegStake = useAppSelector(state => state.staking.min_deleg_stake);\n    const minDelegStakeDisplay = units.fromQa(new BN(minDelegStake), units.Units.Zil);\n    const stakeModalData: StakeModalData = useAppSelector(state => state.user.stake_modal_data);\n    const { updateData, updateRecentTransactions } = props;\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const ssnAddress = stakeModalData.ssnAddress; // bech32\n    const [withdrawAmt, setWithdrawAmt] = useState('0'); // in ZIL\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n\n\n    // checks if there are any unwithdrawn rewards\n    const hasRewardToWithdraw = async () => {\n        const ssnChecksumAddress = bech32ToChecksum(ssnAddress).toLowerCase();\n        \n        const last_reward_cycle_json = await ZilSdk.getSmartContractSubState(impl, \"lastrewardcycle\");\n        const last_buf_deposit_cycle_deleg_json = await ZilSdk.getSmartContractSubState(impl, \"last_buf_deposit_cycle_deleg\", [userBase16Address]);\n\n        if (!isRespOk(last_reward_cycle_json)) {\n            return false;\n        }\n\n        if (!isRespOk(last_buf_deposit_cycle_deleg_json)) {\n            return false;\n        }\n\n        // compute rewards\n        const delegRewards = new BN(await computeDelegRewards(impl, ssnChecksumAddress, userBase16Address));\n\n        if (delegRewards.gt(new BN(0))) {\n            logger(\"you have delegated rewards: %o\", delegRewards);\n            Alert('info', \"Unwithdrawn Rewards Found\", \"Please withdraw the rewards before withdrawing the staked amount.\");\n            return true;\n        }\n\n        // check if user has buffered deposits\n        if (last_buf_deposit_cycle_deleg_json.last_buf_deposit_cycle_deleg[userBase16Address].hasOwnProperty(ssnChecksumAddress)) {\n                const lastDepositCycleDeleg = parseInt(last_buf_deposit_cycle_deleg_json.last_buf_deposit_cycle_deleg[userBase16Address][ssnChecksumAddress]);\n                const lastRewardCycle = parseInt(last_reward_cycle_json.lastrewardcycle);\n                if (lastRewardCycle <= lastDepositCycleDeleg) {\n                    Alert('info', \"Buffered Deposits Found\", \"Please wait for the next cycle before withdrawing the staked amount.\");\n                    return true;\n                }\n        }\n\n        // corner case check\n        // if user has buffered deposits\n        // happens if user first time deposit\n        // reward is zero but contract side warn has unwithdrawn rewards\n        // user cannot withdraw zero rewards from UI\n        // if (contract.buff_deposit_deleg.hasOwnProperty(userBase16Address) &&\n        //     contract.buff_deposit_deleg[userBase16Address].hasOwnProperty(ssnChecksumAddress)) {\n        //         const buffDepositMap: any = contract.buff_deposit_deleg[userBase16Address][ssnChecksumAddress];\n        //         const lastCycleDelegNum = Object.keys(buffDepositMap).sort().pop() || '0';\n        //         const lastRewardCycle = parseInt(contract.lastrewardcycle);\n\n        //         if (lastRewardCycle < parseInt(lastCycleDelegNum + 2)) {\n        //             // deposit still in buffer \n        //             // have to wait for 2 cycles to receive rewards to clear buffer\n        //             Alert('info', \"Buffered Deposits Found\", \"Please wait for 2 more cycles for your rewards to be issued before withdrawing.\");\n        //             return true;\n        //         }\n        // }\n\n        return false;\n    }\n\n    const withdrawStake = async () => {\n        let withdrawAmtQa;\n\n        if (!ssnAddress) {\n            Alert('error', \"Invalid Node\", \"node address should be bech32 or checksum format.\");\n            return null;\n        }\n\n        if (!withdrawAmt) {\n            Alert('error', \"Invalid Withdraw Amount\", \"Withdraw amount cannot be empty.\");\n            return null;\n        } else {\n            try {\n                withdrawAmtQa = convertZilToQa(withdrawAmt);\n            } catch (err) {\n                // user input is malformed\n                // cannot convert input zil amount to qa\n                Alert('error', \"Invalid Withdraw Amount\", \"Please check your withdraw amount again.\");\n                return null;\n            }\n        }\n\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        setIsPending(OperationStatus.PENDING);\n\n        // check if deleg has unwithdrawn rewards or buffered deposits for this ssn address\n        const hasRewards = await hasRewardToWithdraw();\n        if (hasRewards) {\n            setIsPending('');\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const ssnChecksumAddress = bech32ToChecksum(ssnAddress).toLowerCase();\n        const delegAmtQa = stakeModalData.delegAmt;\n        const leftOverQa = new BN(delegAmtQa).sub(new BN(withdrawAmtQa));\n\n        // check if withdraw more than delegated\n        if (new BN(withdrawAmtQa).gt(new BN(delegAmtQa))) {\n            Alert('info', \"Invalid Withdraw Amount\", \"You only have \" + convertQaToCommaStr(delegAmtQa) + \" ZIL to withdraw.\" );\n            setIsPending('');\n            return null;\n        } else if (!leftOverQa.isZero() && leftOverQa.lt(new BN(minDelegStake))) {\n            // check leftover amount\n            // if less than min stake amount\n            Alert('info', \"Invalid Withdraw Amount\", \"Please leave at least \" +  minDelegStakeDisplay + \" ZIL (min. stake amount) or withdraw ALL.\");\n            setIsPending('');\n            return null;\n        }\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.WITHDRAW_STAKE_AMT,\n                params: [\n                    {\n                        vname: 'ssnaddr',\n                        type: 'ByStr20',\n                        value: `${ssnChecksumAddress}`,\n                    },\n                    {\n                        vname: 'amt',\n                        type: 'Uint128',\n                        value: `${withdrawAmtQa}`,\n                    },\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n        \n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    // set default withdraw amount to current deleg amt\n    const setDefaultWithdrawAmt = useCallback(() => {\n        if (stakeModalData.delegAmt) {\n            const tempDelegAmt = convertQaToZilFull(stakeModalData.delegAmt);\n            setWithdrawAmt(tempDelegAmt);\n        } else {\n            setWithdrawAmt('0');\n        }\n    }, [stakeModalData.delegAmt]);\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.INITIATE_STAKE_WITHDRAW, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setDefaultWithdrawAmt();\n            setTxnId('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const handleWithdrawAmt = (e: any) => {\n        setWithdrawAmt(e.target.value);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    useEffect(() => {\n        setDefaultWithdrawAmt();\n    }, [setDefaultWithdrawAmt]);\n\n    return (\n        <div id=\"withdraw-stake-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"withdrawStakeModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\n                <div className=\"modal-content\">\n                    {\n                        isPending ?\n\n                        <ModalPending />\n\n                        :\n\n                        txnId ?\n\n                        <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                        :\n\n                        <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"withdrawStakeModalLabel\">Initiate Stake Withdrawal</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel mr-4\">\n                                    <h3>{stakeModalData.ssnName}</h3>\n                                    <span>{stakeModalData.ssnAddress}</span>\n                                </div>\n                                <div className=\"col node-details-panel\">\n                                    <h3>Deposit</h3>\n                                    <span>{convertQaToCommaStr(stakeModalData.delegAmt)} ZIL</span>\n                                </div>\n                            </div>\n\n                            <div className=\"modal-label mb-2\"><strong>Enter withdrawal amount</strong></div>\n                            <div className=\"input-group mb-4\">\n                                <input type=\"text\" className=\"form-control shadow-none\" value={withdrawAmt} onChange={handleWithdrawAmt} />\n                                <div className=\"input-group-append\">\n                                    <span className=\"input-group-text pl-4 pr-3\">ZIL</span>\n                                </div>\n                            </div>\n                            <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                            <div className=\"d-flex\">\n                                <button type=\"button\" className=\"btn btn-user-action mx-auto mt-2 shadow-none\" onClick={withdrawStake}>Initiate</button>\n                            </div>\n                        </div>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default WithdrawStakeModal;","import React, { useState } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport { toast } from 'react-toastify';\n\nimport Alert from '../alert';\nimport { bech32ToChecksum, convertQaToCommaStr, convertQaToZilFull, showWalletsPrompt, validateBalance, isDigits, computeGasFees } from '../../util/utils';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from '../../util/enum';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { StakeModalData } from '../../util/interface';\nimport { useAppSelector } from '../../store/hooks';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { units } from '@zilliqa-js/zilliqa';\nimport GasSettings from './gas-settings';\n\nconst BigNumber = require('bignumber.js');\nconst { BN } = require('@zilliqa-js/util');\n\n\nfunction WithdrawRewardModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const { updateData, updateRecentTransactions } = props;\n    const stakeModalData: StakeModalData = useAppSelector(state => state.user.stake_modal_data);\n\n    const ssnAddress = stakeModalData.ssnAddress; // bech32\n\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const withdrawReward = async () => {\n        if (!ssnAddress) {\n            Alert('error', \"Invalid Node\", \"Node address should be bech32 or checksum format\");\n            return null;\n        }\n\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n        const ssnChecksumAddress = bech32ToChecksum(ssnAddress).toLowerCase();\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.WITHDRAW_STAKE_REWARDS,\n                params: [\n                    {\n                        vname: 'ssnaddr',\n                        type: 'ByStr20',\n                        value: `${ssnChecksumAddress}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n        \n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const handleClose = () => {\n        // txn success\n        // update dashboard recent transactions\n        if (txnId) {\n            updateRecentTransactions(TransactionType.CLAIM_REWARDS, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setTxnId('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n    \n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    return (\n        <div id=\"withdraw-reward-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"withdrawRewardModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\n                 <div className=\"modal-content\">\n                     {\n                         isPending ?\n\n                         <ModalPending />\n\n                         :\n\n                         txnId ?\n\n                         <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                         :\n\n                         <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"withdrawRewardModalLabel\">Claim Rewards</h5>\n                            <button type=\"button\" className=\"close btn shadow-none\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel mr-4\">\n                                    <h3>{stakeModalData.ssnName}</h3>\n                                    <span>{stakeModalData.ssnAddress}</span>\n                                </div>\n                                <div className=\"col node-details-panel\">\n                                    <h3>Rewards</h3>\n                                    <span>{ new BigNumber(stakeModalData.rewards).isGreaterThanOrEqualTo(10**9) ? convertQaToCommaStr(stakeModalData.rewards) : convertQaToZilFull(stakeModalData.rewards)} ZIL</span>\n                                </div>\n                            </div>\n                            <div className=\"mx-1\">\n                                <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                            </div>\n                            <div className=\"d-flex mt-4\">\n                                <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={withdrawReward}>Claim</button>\n                            </div>\n\n                        </div>\n                         </>\n                     }\n                 </div>\n            </div>\n        </div>\n    );\n}\n\nexport default WithdrawRewardModal;","import React, { useState } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport { toast } from 'react-toastify';\n\nimport Alert from '../alert';\nimport { bech32ToChecksum, computeGasFees, isDigits, showWalletsPrompt, validateBalance } from '../../util/utils';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from '../../util/enum';\n\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport { useAppSelector } from '../../store/hooks';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { units } from '@zilliqa-js/zilliqa';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\n\nconst { BN } = require('@zilliqa-js/util');\n\nfunction CompleteWithdrawModal(props: any) {\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const { updateData, updateRecentTransactions } = props;\n\n    const [txnId, setTxnId] = useState('');\n    const [isPending, setIsPending] = useState('');\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const completeWithdraw = async () => {\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \n            \"Insufficient Balance\", \n            \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            return null;\n        }\n\n        // create tx params\n\n        // toAddr: proxy address\n        const proxyChecksum = bech32ToChecksum(proxy);\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.COMPLETE_WITHDRAWAL,\n                params: []\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        setIsPending(OperationStatus.PENDING);\n        \n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            updateRecentTransactions(TransactionType.COMPLETE_STAKE_WITHDRAW, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            setTxnId('');\n            setGasOption(false);\n            setGasPrice(defaultGasPrice);\n            setGasLimit(defaultGasLimit);\n        }, 150);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    return (\n        <div id=\"complete-withdrawal-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"completeWithdrawModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered\" role=\"document\">\n                 <div className=\"modal-content\">\n                     {\n                         isPending ?\n\n                         <ModalPending />\n\n                         :\n\n                         txnId ?\n\n                         <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose} />\n\n                         :\n\n                         <>\n                        <div className=\"modal-header\">\n                            <h5 className=\"modal-title\" id=\"completeWithdrawModalLabel\">Complete Stake Withdrawals</h5>\n                            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <p className=\"mb-4\">Are you sure you wish to withdraw all your pending stakes?</p>\n                            <GasSettings\n                                gasOption={gasOption}\n                                gasPrice={gasPrice}\n                                gasLimit={gasLimit}\n                                setGasOption={setGasOption}\n                                onBlurGasPrice={onBlurGasPrice}\n                                onBlurGasLimit={onBlurGasLimit}\n                                onGasPriceChange={onGasPriceChange}\n                                onGasLimitChange={onGasLimitChange}\n                            />\n                            <div className=\"d-flex\">\n                                <button type=\"button\" className=\"btn btn-user-action mx-auto\" onClick={completeWithdraw}>Withdraw</button>\n                            </div>\n                        </div>\n                         </>\n                     }\n                 </div>\n            </div>\n        </div>\n    );\n}\n\nexport default CompleteWithdrawModal;","import React from \"react\";\n\nfunction IconWalletTransferLong(props: any) {\n    return (\n        <svg width={props.width} height={props.height} className={props.className} viewBox=\"0 0 487 104\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M94.1 49.2V29.3C94.1 27.0987 93.2255 24.9876 91.6689 23.431C90.1124 21.8745 88.0013 21 85.8 21H83L83.6 18.8C83.8448 17.9661 83.9226 17.0921 83.8288 16.2281C83.735 15.3641 83.4715 14.5271 83.0533 13.7652C82.6352 13.0033 82.0708 12.3315 81.3923 11.7883C80.7139 11.2452 79.9349 10.8413 79.1 10.6L60.2 5.2C59.9904 5.12306 59.767 5.09084 59.5442 5.10543C59.3213 5.12001 59.104 5.18107 58.9062 5.28468C58.7085 5.38829 58.5345 5.53215 58.3957 5.70702C58.2568 5.88188 58.1561 6.08387 58.1 6.3C58.0035 6.73655 58.0729 7.1934 58.2947 7.58158C58.5165 7.96977 58.8749 8.26151 59.3 8.4L71.1 11.8C70.3869 13.2286 70.0157 14.8034 70.0157 16.4C70.0157 17.9966 70.3869 19.5714 71.1 21H36.3V7.9C36.3007 7.46593 36.1354 7.04802 35.8379 6.73194C35.5404 6.41585 35.1333 6.22553 34.7 6.2C34.2569 6.224 33.8383 6.41081 33.5246 6.72457C33.2108 7.03833 33.024 7.45693 33 7.9V21H27.4V7.9C27.4 7.44913 27.2209 7.01673 26.9021 6.69792C26.5833 6.37911 26.1509 6.2 25.7 6.2C25.2667 6.22553 24.8595 6.41585 24.562 6.73194C24.2645 7.04802 24.0992 7.46593 24.1 7.9V21H16.8V6.7C16.7996 5.81533 17.1441 4.96534 17.7602 4.33051C18.3764 3.69569 19.2157 3.32602 20.1 3.3H48.2C49.0843 3.32602 49.9236 3.69569 50.5398 4.33051C51.1559 4.96534 51.5004 5.81533 51.5 6.7V15.8C51.524 16.2431 51.7108 16.6617 52.0246 16.9754C52.3383 17.2892 52.7569 17.476 53.2 17.5C53.6333 17.4745 54.0404 17.2842 54.3379 16.9681C54.6354 16.652 54.8007 16.2341 54.8 15.8V6.7C54.8132 5.8249 54.6523 4.9559 54.3266 4.14357C54.0009 3.33124 53.5168 2.59181 52.9026 1.96832C52.2884 1.34482 51.5564 0.849704 50.749 0.511787C49.9417 0.17387 49.0752 -0.000100329 48.2 4.3408e-08H20.1C18.3404 0.0262652 16.6618 0.743734 15.4269 1.99739C14.1919 3.25105 13.4998 4.94024 13.5 6.7V21H8.29999C6.09869 21 3.98755 21.8745 2.431 23.431C0.874448 24.9876 0 27.0987 0 29.3V91.3C0 93.5013 0.874448 95.6124 2.431 97.169C3.98755 98.7255 6.09869 99.6 8.29999 99.6H85.8C88.0013 99.6 90.1124 98.7255 91.6689 97.169C93.2255 95.6124 94.1 93.5013 94.1 91.3V79.1C94.1 78.8899 94.0586 78.6818 93.9782 78.4877C93.8978 78.2936 93.7799 78.1172 93.6313 77.9686C93.4828 77.8201 93.3064 77.7022 93.1123 77.6218C92.9182 77.5414 92.7101 77.5 92.5 77.5C92.0659 77.4992 91.648 77.6646 91.3319 77.9621C91.0158 78.2596 90.8255 78.6667 90.8 79.1V91.3C90.8 92.6261 90.2732 93.8979 89.3355 94.8355C88.3978 95.7732 87.1261 96.3 85.8 96.3H8.29999C6.97391 96.3 5.70215 95.7732 4.76447 94.8355C3.82678 93.8979 3.29999 92.6261 3.29999 91.3V29.3C3.29999 27.9739 3.82678 26.7021 4.76447 25.7645C5.70215 24.8268 6.97391 24.3 8.29999 24.3H85.8C87.1261 24.3 88.3978 24.8268 89.3355 25.7645C90.2732 26.7021 90.8 27.9739 90.8 29.3V49.1H77.1C75.3402 49.0998 73.6511 49.792 72.3974 51.0269C71.1437 52.2618 70.4262 53.9404 70.4 55.7V64.9C70.4262 66.6596 71.1437 68.3382 72.3974 69.5731C73.6511 70.8081 75.3402 71.5002 77.1 71.5H93.1C93.9751 71.5133 94.8441 71.3523 95.6564 71.0266C96.4688 70.7009 97.2082 70.2168 97.8317 69.6026C98.4552 68.9884 98.9503 68.2564 99.2882 67.449C99.6261 66.6417 99.8001 65.7752 99.8 64.9V55.7C99.7704 54.1179 99.1819 52.5974 98.1386 51.4077C97.0953 50.218 95.6646 49.4359 94.1 49.2ZM74.4 12.7L78.2 13.8C79.0339 14.0542 79.7334 14.6281 80.1456 15.3963C80.5578 16.1645 80.6492 17.0646 80.4 17.9L79.5 21H75.1C74.0949 19.8817 73.4827 18.4658 73.3563 16.9675C73.23 15.4693 73.5964 13.9708 74.4 12.7ZM96.4 64.9C96.4 65.7752 96.0523 66.6146 95.4334 67.2335C94.8145 67.8523 93.9752 68.2 93.1 68.2H77.1C76.2248 68.2 75.3854 67.8523 74.7665 67.2335C74.1477 66.6146 73.8 65.7752 73.8 64.9V55.7C73.8 54.8248 74.1477 53.9854 74.7665 53.3665C75.3854 52.7477 76.2248 52.4 77.1 52.4H93.1C93.9752 52.4 94.8145 52.7477 95.4334 53.3665C96.0523 53.9854 96.4 54.8248 96.4 55.7V64.9ZM83.3 60.3C83.3007 60.7341 83.1354 61.152 82.838 61.4681C82.5405 61.7841 82.1333 61.9745 81.7 62H79.2C78.9768 62 78.7557 61.956 78.5494 61.8706C78.3432 61.7852 78.1558 61.6599 77.9979 61.5021C77.8401 61.3442 77.7148 61.1568 77.6294 60.9506C77.544 60.7443 77.5 60.5232 77.5 60.3C77.5 60.0768 77.544 59.8557 77.6294 59.6494C77.7148 59.4432 77.8401 59.2558 77.9979 59.0979C78.1558 58.9401 78.3432 58.8148 78.5494 58.7294C78.7557 58.644 78.9768 58.6 79.2 58.6H81.7C82.1333 58.6255 82.5405 58.8158 82.838 59.1319C83.1354 59.448 83.3007 59.8659 83.3 60.3ZM480.8 53.2V33.3C480.8 31.0987 479.926 28.9876 478.369 27.431C476.812 25.8745 474.701 25 472.5 25H469.7L470.3 22.8C470.545 21.9661 470.623 21.0921 470.529 20.2281C470.435 19.3641 470.171 18.5271 469.753 17.7652C469.335 17.0033 468.771 16.3315 468.092 15.7883C467.414 15.2452 466.635 14.8413 465.8 14.6L446.9 9.2C446.69 9.12306 446.467 9.09084 446.244 9.10543C446.021 9.12001 445.804 9.18107 445.606 9.28468C445.408 9.38829 445.235 9.53215 445.096 9.70702C444.957 9.88188 444.856 10.0839 444.8 10.3C444.703 10.7366 444.773 11.1934 444.995 11.5816C445.217 11.9698 445.575 12.2615 446 12.4L457.8 15.8C457.087 17.2286 456.716 18.8034 456.716 20.4C456.716 21.9966 457.087 23.5714 457.8 25H423V11.9C423.001 11.4659 422.835 11.048 422.538 10.7319C422.24 10.4158 421.833 10.2255 421.4 10.2C420.957 10.224 420.538 10.4108 420.225 10.7246C419.911 11.0383 419.724 11.4569 419.7 11.9V25H414.1V11.9C414.1 11.4491 413.921 11.0167 413.602 10.6979C413.283 10.3791 412.851 10.2 412.4 10.2C411.967 10.2255 411.56 10.4158 411.262 10.7319C410.965 11.048 410.799 11.4659 410.8 11.9V25H403.5V10.7C403.5 9.81532 403.844 8.96534 404.46 8.33051C405.076 7.69569 405.916 7.32602 406.8 7.3H434.9C435.784 7.32602 436.624 7.69569 437.24 8.33051C437.856 8.96534 438.2 9.81532 438.2 10.7V19.8C438.224 20.2431 438.411 20.6617 438.725 20.9754C439.038 21.2892 439.457 21.476 439.9 21.5C440.333 21.4745 440.74 21.2842 441.038 20.9681C441.335 20.652 441.501 20.2341 441.5 19.8V10.7C441.513 9.8249 441.352 8.9559 441.027 8.14357C440.701 7.33124 440.217 6.59181 439.603 5.96832C438.988 5.34482 438.256 4.8497 437.449 4.51179C436.642 4.17387 435.775 3.9999 434.9 4H406.8C405.04 4.02627 403.362 4.74373 402.127 5.99739C400.892 7.25105 400.2 8.94024 400.2 10.7V25H395C392.799 25 390.688 25.8745 389.131 27.431C387.574 28.9876 386.7 31.0987 386.7 33.3V95.3C386.7 97.5013 387.574 99.6124 389.131 101.169C390.688 102.726 392.799 103.6 395 103.6H472.5C474.701 103.6 476.812 102.726 478.369 101.169C479.926 99.6124 480.8 97.5013 480.8 95.3V83.1C480.8 82.8899 480.759 82.6818 480.678 82.4877C480.598 82.2936 480.48 82.1172 480.331 81.9686C480.183 81.8201 480.006 81.7022 479.812 81.6218C479.618 81.5414 479.41 81.5 479.2 81.5C478.766 81.4992 478.348 81.6646 478.032 81.9621C477.716 82.2596 477.526 82.6667 477.5 83.1V95.3C477.5 96.6261 476.973 97.8979 476.036 98.8355C475.098 99.7732 473.826 100.3 472.5 100.3H395C393.674 100.3 392.402 99.7732 391.464 98.8355C390.527 97.8979 390 96.6261 390 95.3V33.3C390 31.9739 390.527 30.7021 391.464 29.7645C392.402 28.8268 393.674 28.3 395 28.3H472.5C473.826 28.3 475.098 28.8268 476.036 29.7645C476.973 30.7021 477.5 31.9739 477.5 33.3V53.1H463.8C462.04 53.0998 460.351 53.792 459.097 55.0269C457.844 56.2618 457.126 57.9404 457.1 59.7V68.9C457.126 70.6596 457.844 72.3382 459.097 73.5731C460.351 74.8081 462.04 75.5002 463.8 75.5H479.8C480.675 75.5133 481.544 75.3523 482.356 75.0266C483.169 74.7009 483.908 74.2168 484.532 73.6026C485.155 72.9884 485.65 72.2564 485.988 71.449C486.326 70.6417 486.5 69.7752 486.5 68.9V59.7C486.47 58.1179 485.882 56.5974 484.839 55.4077C483.795 54.218 482.365 53.4359 480.8 53.2ZM461.1 16.7L464.9 17.8C465.734 18.0542 466.433 18.6281 466.846 19.3963C467.258 20.1645 467.349 21.0646 467.1 21.9L466.2 25H461.8C460.795 23.8817 460.183 22.4658 460.056 20.9675C459.93 19.4693 460.296 17.9708 461.1 16.7ZM483.1 68.9C483.1 69.7752 482.752 70.6146 482.133 71.2335C481.515 71.8523 480.675 72.2 479.8 72.2H463.8C462.925 72.2 462.085 71.8523 461.467 71.2335C460.848 70.6146 460.5 69.7752 460.5 68.9V59.7C460.5 58.8248 460.848 57.9854 461.467 57.3665C462.085 56.7477 462.925 56.4 463.8 56.4H479.8C480.675 56.4 481.515 56.7477 482.133 57.3665C482.752 57.9854 483.1 58.8248 483.1 59.7V68.9ZM470 64.3C470.001 64.7341 469.835 65.152 469.538 65.4681C469.24 65.7841 468.833 65.9745 468.4 66H465.9C465.677 66 465.456 65.956 465.249 65.8706C465.043 65.7852 464.856 65.6599 464.698 65.5021C464.54 65.3442 464.415 65.1568 464.329 64.9506C464.244 64.7443 464.2 64.5232 464.2 64.3C464.2 64.0768 464.244 63.8557 464.329 63.6494C464.415 63.4432 464.54 63.2558 464.698 63.0979C464.856 62.9401 465.043 62.8148 465.249 62.7294C465.456 62.644 465.677 62.6 465.9 62.6H468.4C468.833 62.6255 469.24 62.8158 469.538 63.1319C469.835 63.448 470.001 63.8659 470 64.3ZM124.2 66C126.685 66 128.7 63.9853 128.7 61.5C128.7 59.0147 126.685 57 124.2 57C121.715 57 119.7 59.0147 119.7 61.5C119.7 63.9853 121.715 66 124.2 66ZM162.7 61.5C162.7 63.9853 160.685 66 158.2 66C155.715 66 153.7 63.9853 153.7 61.5C153.7 59.0147 155.715 57 158.2 57C160.685 57 162.7 59.0147 162.7 61.5ZM187.2 66C189.685 66 191.7 63.9853 191.7 61.5C191.7 59.0147 189.685 57 187.2 57C184.715 57 182.7 59.0147 182.7 61.5C182.7 63.9853 184.715 66 187.2 66ZM243.7 48.5C244.528 48.5 245.2 49.1716 245.2 50V52.5H248.7C249.528 52.5 250.2 53.1716 250.2 54C250.2 54.8284 249.528 55.5 248.7 55.5H245.2V60H246.2C247.561 60 248.843 60.5801 249.771 61.5749C250.697 62.5661 251.2 63.8897 251.2 65.25C251.2 66.6103 250.697 67.9339 249.771 68.9251C248.843 69.9199 247.561 70.5 246.2 70.5H245.2V73C245.2 73.8284 244.528 74.5 243.7 74.5C242.872 74.5 242.2 73.8284 242.2 73V70.5H237.7C236.872 70.5 236.2 69.8284 236.2 69C236.2 68.1716 236.872 67.5 237.7 67.5H242.2V63H241.2C239.839 63 238.557 62.4199 237.629 61.4251C236.703 60.4339 236.2 59.1103 236.2 57.75C236.2 56.3897 236.703 55.0661 237.629 54.0749C238.557 53.0801 239.839 52.5 241.2 52.5H242.2V50C242.2 49.1716 242.872 48.5 243.7 48.5ZM242.2 55.5H241.2C240.704 55.5 240.206 55.71 239.822 56.1218C239.434 56.5371 239.2 57.1212 239.2 57.75C239.2 58.3788 239.434 58.9629 239.822 59.3782C240.206 59.79 240.704 60 241.2 60H242.2V55.5ZM245.2 63V67.5H246.2C246.696 67.5 247.194 67.2899 247.578 66.8782C247.966 66.4629 248.2 65.8789 248.2 65.25C248.2 64.6211 247.966 64.0371 247.578 63.6218C247.194 63.21 246.696 63 246.2 63H245.2ZM243.7 25.4617L213.7 42.7344V77.2656L243.7 94.5383L273.7 77.2656V42.7344L243.7 25.4617ZM276.7 41L243.7 22L210.7 41V79L243.7 98L276.7 79V41ZM300.2 68.1292L307.7 62.5L300.2 56.8708V68.1292ZM336.7 62.5L329.2 68.1292V56.8708L336.7 62.5ZM358.2 68.1292L365.7 62.5L358.2 56.8708V68.1292Z\"/>\n</svg>\n    );\n}\n\nexport default IconWalletTransferLong;","import React from 'react';\n\nfunction IconQuestionCircle(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className} ><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z\"/></svg>\n    );\n}\n\nexport default IconQuestionCircle;","import React from 'react';\n\nfunction IconArrowDown(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M13 16.172l5.364-5.364 1.414 1.414L12 20l-7.778-7.778 1.414-1.414L11 16.172V4h2v12.172z\"/></svg>\n    );\n}\n\nexport default IconArrowDown;","import React from 'react';\n\nfunction IconEditBox(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M16.757 3l-2 2H5v14h14V9.243l2-2V20a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12.757zm3.728-.9L21.9 3.516l-9.192 9.192-1.412.003-.002-1.417L20.485 2.1z\"/></svg>\n    );\n}\n\nexport default IconEditBox;","import React, { useState, useEffect } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport { toast } from 'react-toastify';\nimport { AccountType, OperationStatus, ProxyCalls, TransactionType } from '../../util/enum';\nimport { bech32ToChecksum, computeGasFees, convertBase16ToBech32, getTruncatedAddress, getZillionExplorerLink, isDigits, isRespOk, showWalletsPrompt, validateBalance } from '../../util/utils';\nimport Alert from '../alert';\nimport { toBech32Address, fromBech32Address } from '@zilliqa-js/crypto';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n\nimport IconWalletTransferLong from '../icons/wallet-transfer-long';\nimport IconQuestionCircle from '../icons/question-circle';\nimport IconArrowDown from '../icons/arrow-down';\nimport IconEditBox from '../icons/edit-box-line';\nimport ModalPending from '../contract-calls-modal/modal-pending';\nimport ModalSent from '../contract-calls-modal/modal-sent';\nimport ReactTooltip from 'react-tooltip';\nimport { computeDelegRewards } from '../../util/reward-calculator';\n\nimport SwapImg from \"../../static/swap_img0.png\";\nimport SwapImg1 from \"../../static/swap_img1.png\";\nimport SwapImg2 from \"../../static/swap_img2.png\";\nimport SwapImg3 from \"../../static/swap_img3.png\";\nimport SwapImg4 from \"../../static/swap_img4.png\";\nimport SwapImg5 from \"../../static/swap_img5.png\";\nimport { isStorageAvailable } from '../../util/use-local-storage';\nimport { useAppSelector } from '../../store/hooks';\nimport { SwapDelegModalData } from '../../util/interface';\nimport { ZilSigner } from '../../zilliqa-signer';\nimport { ZilSdk } from '../../zilliqa-api';\nimport { units } from '@zilliqa-js/zilliqa';\nimport BigNumber from 'bignumber.js';\nimport GasSettings from './gas-settings';\n\n\nconst { BN, validation } = require('@zilliqa-js/util');\n\nfunction SwapDelegModal(props: any) {\n    const {updateData, updateRecentTransactions} = props;\n    const swapDelegModalData: SwapDelegModalData = useAppSelector(state => state.user.swap_deleg_modal_data);\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const impl = useAppSelector(state => state.blockchain.impl);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n    const wallet = useAppSelector(state => state.user.address_base16);\n    const accountType = useAppSelector(state => state.user.account_type);\n    const ledgerIndex = useAppSelector(state => state.user.ledger_index);\n    const userAddress = useAppSelector(state => state.user.address_bech32);\n    const ssnstatsList = useAppSelector(state => state.staking.ssn_list);\n    const proxyChecksum = bech32ToChecksum(proxy);\n\n    // transfer all stakes to this new deleg\n    const [newDelegAddr, setNewDelegAddr] = useState(''); // bech32\n    const [selectedDelegAddr, setSelectedDelegAddr] = useState(''); // base16; used in incoming requests tab to track the address being accepted or rejected\n    const [txnId, setTxnId] = useState('');\n    const [txnType, setTxnType] = useState('');\n    const [tabIndex, setTabIndex] = useState(0);\n    const [isPending, setIsPending] = useState('');\n    const [isEdit, setIsEdit] = useState(false);\n    \n    const [showHelpBox, setShowHelpBox] = useState(false);\n    const [showConfirmSendRequestBox, setShowConfirmSendRequestBox] = useState(false);\n    const [showConfirmRevokeBox, setShowConfirmRevokeBox] = useState(false);\n    const [showConfirmSwapBox, setShowConfirmSwapBox] = useState(false);\n    const [showConfirmRejectBox, setShowConfirmRejectBox] = useState(false);\n\n    const [tutorialStep, setTutorialStep] = useState(0); // for the help guide\n\n    const defaultGasPrice = ZilSigner.getDefaultGasPrice();\n    const defaultGasLimit = ZilSigner.getDefaultGasLimit();\n    const [gasPrice, setGasPrice] = useState<string>(defaultGasPrice);\n    const [gasLimit, setGasLimit] = useState<string>(defaultGasLimit);\n    const [gasOption, setGasOption] = useState(false);\n\n    const cleanUp = () => {\n        setNewDelegAddr('');\n        setSelectedDelegAddr('');\n        setTabIndex(0);\n        setIsPending('');\n        setIsEdit(false);\n        setTxnId('');\n        setTxnType('');\n        setShowHelpBox(false);\n        setShowConfirmSendRequestBox(false);\n        setShowConfirmRevokeBox(false);\n        setShowConfirmSwapBox(false);\n        setShowConfirmRejectBox(false);\n        setTutorialStep(0);\n        setGasOption(false);\n        setGasPrice(defaultGasPrice);\n        setGasLimit(defaultGasLimit);\n    }\n\n    const validateAddress = (address: string) => {\n        if (!address || address === \"\" || (!validation.isAddress(address) && !validation.isBech32(address)) ) {\n            return false;\n        }\n        return true;\n    }\n\n    // checks if user entered ssn address\n    // address zil format\n    const isSsnAddress = (address: string) => {\n        for (let ssn of ssnstatsList) {\n            if (address === ssn.address) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    const handleNewDelegAddr = (e : any) => {\n        let address = e.target.value;\n        if (!address || address === null) {\n            address = '';\n        } else if (address && (validation.isAddress(address) || validation.isBech32(address)) ) {\n            address = toBech32Address(bech32ToChecksum(address));\n            if (isSsnAddress(address)) {\n                Alert('error', \"Invalid Address\", `Do not enter a node address. If you want to transfer your stake from one node to another node, go to \"Staking Portfolio\" > \"Manage\" > \"Transfer Stake\" `);\n                address = '';\n            } \n        }\n        setNewDelegAddr(address);\n    }\n\n    const decreaseTutorialStep = () => {\n        let newTutorialStep = tutorialStep - 1;\n        setTutorialStep(newTutorialStep);\n    }\n\n    const incrementTutorialStep = () => {\n        let newTutorialStep = tutorialStep + 1;\n        setTutorialStep(newTutorialStep);\n    }\n\n    // validate the input target recipient before showing the confirm send box\n    const toggleConfirmSendRequestBox = () => {\n        let targetRecipientAddr = newDelegAddr;\n        if (!validateAddress(targetRecipientAddr)) {\n            Alert('error', \"Invalid Address\", \"Wallet address should be bech32 or checksum format.\");\n            return null;\n        }\n        setShowConfirmSendRequestBox(true);\n    }\n\n    const toggleConfirmSwapBox = (address : string) => {\n        setSelectedDelegAddr(address);\n        setShowConfirmSwapBox(true);\n    }\n\n    const toggleRejectSwapBox = (address : string) => {\n        setSelectedDelegAddr(address);\n        setShowConfirmRejectBox(true);\n    }\n\n    const toggleRevokeSwapBox = () => {\n        // hide the new owner address form when clicked on revoke\n        setIsEdit(false);\n        setShowConfirmRevokeBox(true);\n    }\n\n    const handleClose = () => {\n        // txn success\n        // invoke dashboard methods\n        if (txnId) {\n            let convertedTxnType;\n            switch (txnType) {\n                case TransactionType.REQUEST_DELEG_SWAP.toString():\n                    convertedTxnType = TransactionType.REQUEST_DELEG_SWAP;\n                    break;\n                case TransactionType.REVOKE_DELEG_SWAP.toString():\n                    convertedTxnType = TransactionType.REVOKE_DELEG_SWAP;\n                    break;\n                case TransactionType.CONFIRM_DELEG_SWAP.toString():\n                    convertedTxnType = TransactionType.CONFIRM_DELEG_SWAP;\n                    break;\n                case TransactionType.REJECT_DELEG_SWAP.toString():\n                    convertedTxnType = TransactionType.REJECT_DELEG_SWAP;\n                    break;\n            }\n            updateRecentTransactions(convertedTxnType, txnId);\n            updateData();\n        }\n        \n        // reset state\n        // timeout to wait for modal to fade out before clearing\n        // so that the animation is smoother\n        toast.dismiss();\n        setTimeout(() => {\n            cleanUp();\n        }, 150);\n    }\n\n    // reset the tutorial\n    const handleCloseTutorial = () => {\n        setShowHelpBox(false);\n        setTutorialStep(0);\n    }\n\n    const sendTxn = async (txnType: TransactionType, txParams: any) => {\n        if (await validateBalance(wallet) === false) {\n            const gasFees = computeGasFees(gasPrice, gasLimit);\n            Alert('error', \"Insufficient Balance\", \"Insufficient balance in wallet to pay for the gas fee.\");\n            Alert('error', \"Gas Fee Estimation\", \"Current gas fee is around \" + units.fromQa(gasFees, units.Units.Zil) + \" ZIL.\");\n            setIsPending('');\n            return null;\n        }\n\n        // set txn type to store in cookie\n        setTxnType(txnType.toString());\n        setIsPending(OperationStatus.PENDING);\n\n        showWalletsPrompt(accountType);\n\n        trackPromise(ZilSigner.sign(accountType as AccountType, txParams, ledgerIndex)\n            .then((result) => {\n                if (result === OperationStatus.ERROR) {\n                    Alert('error', \"Transaction Error\", \"Please try again.\");\n                } else {\n                    setTxnId(result)\n                }\n            }).finally(() => {\n                setIsPending('');\n            })\n        );\n    }\n\n    const confirmDelegSwap = async (requestorAddr: string) => {\n\n        setIsPending(OperationStatus.PENDING);\n\n        const requestorHasBuffOrRewards = await hasBufferedOrRewards(\"ConfirmSwap\", requestorAddr);\n        if (requestorHasBuffOrRewards) {\n            // requestor has buffered deposits or rewards\n            setIsPending('');\n            return null;\n        }\n\n        // userAddress here is the new delegator waiting to receive\n        const newDelegHasBuffOrRewards = await hasBufferedOrRewards(\"ConfirmSwap\", userAddress);\n        if (newDelegHasBuffOrRewards) {\n            setIsPending('');\n            return null;\n        }\n\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.CONFIRM_DELEG_SWAP,\n                params: [\n                    {\n                        vname: 'requestor',\n                        type: 'ByStr20',\n                        value: `${requestorAddr}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        await sendTxn(TransactionType.CONFIRM_DELEG_SWAP, txParams);\n    }\n\n    const rejectDelegSwap = async (requestorAddr: string) => {\n\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.REJECT_DELEG_SWAP,\n                params: [\n                    {\n                        vname: 'requestor',\n                        type: 'ByStr20',\n                        value: `${requestorAddr}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        await sendTxn(TransactionType.REJECT_DELEG_SWAP, txParams);\n    }\n\n    // returns true if address is ok\n    // otherwise returns false\n    // @param swapAddr: bech32 format\n    const isValidSwap = (swapAddr: string) => {\n        // check if it is self swap\n        if (userAddress === swapAddr) {\n            Alert('error', \"Invalid New Owner\", \"Please enter another wallet address other than the connected wallet.\");\n            return false;\n        }\n\n        // check if it is cyclic, i.e. if B -> X, where X == A exists\n        let byStr20SwapAddr = fromBech32Address(swapAddr).toLowerCase();\n\n        if (swapDelegModalData.requestorList.includes(byStr20SwapAddr)) {\n            let msg = `There is an existing request from ${getTruncatedAddress(swapAddr)}. Please accept or reject the incoming request first.`;\n            Alert('error', \"Invalid New Owner\", msg);\n            return false;\n        }\n\n        return true;\n    }\n\n    // check if address has buffered deposits or unwithdrawn rewards\n    // returns true if the address has buffered deposits or rewards, otherwise returns false\n    // @param invokerMethod: a string to determine if it is coming from RequestSwap or ConfirmSwap to change the message display\n    // @param address: bech32 format\n    const hasBufferedOrRewards = async (invokerMethod: string = \"\", address: string) => {\n        let wallet = bech32ToChecksum(address).toLowerCase();\n        let displayAddr = getTruncatedAddress(address);\n        let targetName = address === userAddress ? \"Your wallet\" : invokerMethod === \"RequestSwap\" ? \"The recipient\" : \"The requestor\"\n\n        const lrc = await ZilSdk.getSmartContractSubState(impl, \"lastrewardcycle\");\n        const lbdc = await  ZilSdk.getSmartContractSubState(impl, \"last_buf_deposit_cycle_deleg\", [wallet]);\n        const deposit_amt_deleg_map = await ZilSdk.getSmartContractSubState(impl, \"deposit_amt_deleg\", [wallet]);\n        const buff_deposit_deleg_map = await ZilSdk.getSmartContractSubState(impl, \"buff_deposit_deleg\", [wallet]);\n        \n        if (!isRespOk(lrc)) {\n            return false;\n        }\n\n        if (!isRespOk(lbdc)) {\n            return false;\n        }\n\n        if (!isRespOk(deposit_amt_deleg_map)) {\n            // delegator has not delegate with any ssn\n            // no need to perform further checks\n            return false;\n        }\n\n        let ssnlist = deposit_amt_deleg_map[\"deposit_amt_deleg\"][wallet];\n\n        for (let ssnAddress in ssnlist) {\n            // check rewards\n            const rewards = new BN(await computeDelegRewards(impl, ssnAddress, wallet));\n\n            if (rewards.gt(new BN(0))) {\n                let msg = `${targetName} ${displayAddr} has unwithdrawn rewards. Please withdraw or wait until the user has withdrawn the rewards before continuing.`\n                Alert('info', \"Unwithdrawn Rewards Found\", msg);\n                return true;\n            }\n\n            const lrc_o = parseInt(lrc[\"lastrewardcycle\"]);\n\n            // check buffered deposits\n            if (lbdc[\"last_buf_deposit_cycle_deleg\"][wallet].hasOwnProperty(ssnAddress)) {\n                const ldcd = parseInt(lbdc[\"last_buf_deposit_cycle_deleg\"][wallet][ssnAddress]);\n                if (lrc_o <= ldcd) {\n                    let msg = `${targetName} ${displayAddr} has buffered deposits. Please wait for the next cycle before continuing.`\n                    Alert('info', \"Buffered Deposits Found\", msg);\n                    return true;\n                }\n            }\n\n            // check buffered deposits (lrc-1)\n            let lrc_o_minus = lrc_o - 1\n            if (lrc_o_minus >= 0) {\n                if (isRespOk(buff_deposit_deleg_map) &&  \n                    buff_deposit_deleg_map[\"buff_deposit_deleg\"][wallet].hasOwnProperty(ssnAddress)) {\n                    if (buff_deposit_deleg_map[\"buff_deposit_deleg\"][wallet][ssnAddress].hasOwnProperty(lrc_o_minus)) {\n                        let msg = `${targetName} ${displayAddr} has buffered deposits. Please wait for the next cycle before continuing.`\n                        Alert('info', \"Buffered Deposits Found\", msg);\n                        return true;\n                    }\n                }\n            }\n\n        }\n        return false;\n    }\n\n    // check if address has staked with some ssn\n    // returns false if address has not stake; otherwise returns true\n    const hasStaked = async (address: string) => {\n        let wallet = fromBech32Address(address).toLowerCase();\n\n        const deposit_amt_deleg_map = await ZilSdk.getSmartContractSubState(impl, \"deposit_amt_deleg\", [wallet]);\n\n        if (!isRespOk(deposit_amt_deleg_map)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    // check if address has pending withdrawal\n    // returns false if address has no pending withdrawal\n    const hasPendingWithdrawal = async (address: string) => {\n        let wallet = fromBech32Address(address).toLowerCase();\n\n        const pending_withdrawal_map = await ZilSdk.getSmartContractSubState(impl, \"withdrawal_pending\", [wallet]);\n\n        if (!isRespOk(pending_withdrawal_map)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    const requestDelegSwap = async () => {\n\n        if (!validateAddress(newDelegAddr)) {\n            Alert('error', \"Invalid Address\", \"Wallet address should be bech32 or checksum format.\");\n            return null;\n        }\n\n        if (!isValidSwap(newDelegAddr)) {\n            return null;\n        }\n\n        setIsPending(OperationStatus.PENDING);\n\n        const userHasStaked = await hasStaked(userAddress);\n        const userHasPendingWithdrawal = await hasPendingWithdrawal(userAddress);\n        if (!userHasStaked && !userHasPendingWithdrawal) {\n            setIsPending('');\n            Alert('info', \"User Has No Stake\", `You have not staked with any operators.`);\n            return null;\n        }\n\n        const userHasBuffOrRewards = await hasBufferedOrRewards(\"RequestSwap\", userAddress);\n        if (userHasBuffOrRewards) {\n            // user has buffered deposits or rewards\n            setIsPending('');\n            return null;\n        }\n\n        const newDelegHasBuffOrRewards = await hasBufferedOrRewards(\"RequestSwap\", newDelegAddr);\n        if (newDelegHasBuffOrRewards) {\n            setIsPending('');\n            return null;\n        }\n\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.REQUEST_DELEG_SWAP,\n                params: [\n                    {\n                        vname: 'new_deleg_addr',\n                        type: 'ByStr20',\n                        value: `${fromBech32Address(newDelegAddr)}`,\n                    }\n                ]\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        await sendTxn(TransactionType.REQUEST_DELEG_SWAP, txParams);\n    }\n\n    const revokeDelegSwap = async () => {\n        // gas price, gas limit declared in account.ts\n        let txParams = {\n            toAddr: proxyChecksum,\n            amount: new BN(0),\n            code: \"\",\n            data: JSON.stringify({\n                _tag: ProxyCalls.REVOKE_DELEG_SWAP,\n                params: []\n            }),\n            gasPrice: gasPrice,\n            gasLimit: gasLimit,\n        };\n\n        await sendTxn(TransactionType.REVOKE_DELEG_SWAP, txParams);\n    }\n\n    const onBlurGasPrice = () => {\n        if (gasPrice === '' || new BigNumber(gasPrice).lt(new BigNumber(defaultGasPrice))) {\n            setGasPrice(defaultGasPrice);\n            Alert(\"Info\", \"Minimum Gas Price Required\", \"Gas price should not be lowered than default blockchain requirement.\");\n        }\n    }\n\n    const onGasPriceChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasPrice(input);\n        }\n    }\n\n    const onBlurGasLimit = () => {\n        if (gasLimit === '' || new BigNumber(gasLimit).lt(50)) {\n            setGasLimit(defaultGasLimit);\n        }\n    }\n\n    const onGasLimitChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        let input = e.target.value;\n        if (input === '' || isDigits(input)) {\n            setGasLimit(input);\n        }\n    }\n\n    const onSelectTabs = (index: number) => {\n        // reset the advanced gas settings display on change tabs\n        setTabIndex(index);\n        setGasOption(false);\n        setGasPrice(defaultGasPrice);\n        setGasLimit(defaultGasLimit);\n    }\n\n    useEffect(() => {\n        // show the tutorial if this is the first time\n        // user clicks on the change stake ownership button\n        if (isStorageAvailable('localStorage')) {\n            const storedValue: any = window.localStorage.getItem(\"show-swap-help\");\n            if (storedValue === null) {\n                setShowHelpBox(true);\n                window.localStorage.setItem(\"show-swap-help\", JSON.stringify(false));\n            }\n        }\n    }, [])\n\n    return (\n        <div id=\"swap-deleg-modal\" className=\"modal fade\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"swapDelegModalLabel\" aria-hidden=\"true\">\n            <div className=\"contract-calls-modal modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg\" role=\"document\">\n                <div className=\"modal-content\">\n                    {\n                        isPending ?\n                        \n                        <ModalPending/>\n\n                        :\n\n                        txnId ?\n\n                        <ModalSent txnId={txnId} networkURL={networkURL} handleClose={handleClose}/>\n\n                        :\n\n                        showHelpBox ?\n\n                        <>\n                        <div className=\"modal-header\">\n                            {\n                                tutorialStep === 0 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">What is this?</h5>\n                                :\n                                tutorialStep === 1 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">How do I transfer my stakes to another wallet?</h5>\n                                :\n                                tutorialStep === 2 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">How do I modify the recipient or revoke the request?</h5>\n                                :\n                                tutorialStep === 3 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">I received an incoming transfer request. What should I do with it?</h5>\n                                :\n                                tutorialStep === 4 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">I accepted a request. How do I know if it is successful?</h5>\n                                :\n                                tutorialStep === 5 ?\n                                <h5 className=\"modal-title\" id=\"swap-deleg-modal\">Final Notes</h5>\n                                :\n                                null\n                            }\n                            \n                            <button type=\"button\" className=\"close btn shadow-none\" aria-label=\"CloseTutorial\" onClick={handleCloseTutorial}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div>\n                        <div className=\"modal-body\">\n                            {\n                                tutorialStep === 0 ?\n                                <div className=\"div-fade text-center\">\n                                    <IconWalletTransferLong width=\"400\" className=\"mb-4 icon-fill\"/>\n                                    <p>You can now transfer your stakes from one wallet to another!</p>\n                                    <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={() => incrementTutorialStep()}>Continue</button>\n                                </div>\n\n                                :\n                                \n                                tutorialStep === 1 ?\n                                <div>\n                                    <p>Under the \"Change Stake Ownership\" tab, enter the recipient wallet address.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg} alt=\"change_ownership\" /></div>\n                                    <p>Wait for the transaction to be processed on the blockchain.</p>\n                                    <div className=\"d-flex mt-4\">\n                                        <div className=\"mx-auto\">\n                                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => decreaseTutorialStep()}>Prev</button>\n                                            <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => incrementTutorialStep()}>Next</button>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                :\n\n                                tutorialStep === 2 ?\n                                <div>\n                                    <p>After setting a recipient, should you change your mind, you may edit the recipient to another address or revoke the request entirely.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg1} alt=\"edit_revoke_request\" /></div>\n                                    <p>This can only be done if the recipient has not accepted your request.</p>\n                                    <div className=\"d-flex mt-4\">\n                                        <div className=\"mx-auto\">\n                                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => decreaseTutorialStep()}>Prev</button>\n                                            <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => incrementTutorialStep()}>Next</button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                :\n\n                                tutorialStep === 3 ?\n                                <div>\n                                    <p>Under the \"Incoming Requests\", if you are the <strong>recipient</strong>, you will see the list of wallet addresses / users who wish to transfer their stakes to you.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg2} alt=\"incoming_requests\" /></div>\n                                    <p>If you <strong>accept</strong> the requests, all the stakes would be transferred from the requestors' wallet to you.</p>\n                                    <p>If you <strong>reject</strong> the requests, nothing would happen and the requestor has to send a new request if he or she wishes to transfer the stakes to you.</p>\n                                    <p>Please wait for the transaction to be processed completely on the blockchain before accepting or rejecting another request.</p>\n                                    <div className=\"d-flex mt-4\">\n                                        <div className=\"mx-auto\">\n                                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => decreaseTutorialStep()}>Prev</button>\n                                            <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => incrementTutorialStep()}>Next</button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                :\n\n                                tutorialStep === 4 ?\n                                <div>\n                                    <p>If you are the <strong>recipient</strong>, you should see a transaction ID after accepting the request as shown below.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg3} alt=\"txn_id\" /></div>\n                                    <p>Click on the transaction ID and it would bring you to ViewBlock.</p>\n                                    <p>Refresh the ViewBlock page once every few minutes; the transaction should be successful in less than 10 minutes.</p>\n                                    <p>Head back to <strong>Zillion Dashboard</strong> and hit the manual refresh button.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg4} alt=\"manual_refresh\" /></div>\n                                    <p>You should observe the new amounts under <strong>My Staking Portfolio</strong>.</p>\n                                    <div className=\"d-flex mb-4\"><img className=\"mx-auto img-fluid\" src={SwapImg5} alt=\"dashboard_staking_portfolio\" /></div>\n                                    <div className=\"d-flex mt-4\">\n                                        <div className=\"mx-auto\">\n                                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => decreaseTutorialStep()}>Prev</button>\n                                            <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => incrementTutorialStep()}>Next</button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                :\n\n                                tutorialStep === 5 ?\n                                <div>\n                                    <ul>\n                                        <li className=\"mb-3\"><strong>Once the recipient has accepted a request, Zilliqa is not able to undo the transfer process.</strong></li>\n                                        <li className=\"mb-3\">Beware of scams! Do not send a transfer request if you are unsure of who the recipient is!</li>\n                                        <li className=\"mb-3\">Do not enter any node operator's address.</li>\n                                        <li className=\"mb-3\">If you are a recipient, once you accept the transfer request, all the stakes would be transferred to your wallet. If the requestor has staked on the same node operator as you, the amount would be tabulated together.</li>\n                                        <li className=\"mb-3\">If you are a requestor, please check the recipient address carefully before sending the request. The transfer request is <strong>irreversible</strong> once the recipient has accepted.</li>\n                                        <li>Ensure that you have no buffered deposits or unwithdrawn rewards before sending a transfer request or accepting a transfer. This is to facilitate the stakes tabulation when the recipient chooses to accept the request.</li>\n                                    </ul>\n                                    <div className=\"d-flex mt-4\">\n                                        <div className=\"mx-auto\">\n                                            <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => decreaseTutorialStep()}>Prev</button>\n                                            <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => handleCloseTutorial()}>Got It!</button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                :\n\n                                null\n\n                            }\n                        </div>\n                        </>\n\n                        :\n\n                        showConfirmSendRequestBox ?\n\n                        <div className=\"modal-body animate__animated animate__fadeIn\">\n                            <h5 className=\"modal-title mb-4\">Send Request Confirmation</h5>\n                            <p>Are you sure you want to transfer <strong><u>ALL</u></strong> your stakes to this address?</p>\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Target Recipient</h3>\n                                    <span>{newDelegAddr}</span>\n                                </div>\n                            </div>\n                            <GasSettings\n                                gasOption={gasOption}\n                                gasPrice={gasPrice}\n                                gasLimit={gasLimit}\n                                setGasOption={setGasOption}\n                                onBlurGasPrice={onBlurGasPrice}\n                                onBlurGasLimit={onBlurGasLimit}\n                                onGasPriceChange={onGasPriceChange}\n                                onGasLimitChange={onGasLimitChange}\n                            />\n                            <div className=\"mb-4\">\n                                <small><strong>Notes</strong></small>\n                                <ul>\n                                    <li><small>By clicking on <em>'Yes'</em>, you are sending a request to transfer all your existing stakes to this address.</small></li>\n                                    <li><small>Beware of scams! Ensure that you know who the recipient is before sending the request.</small></li>\n                                    <li><small>Process is <strong>irreversible</strong> once the recipient has accepted your request.</small></li>\n                                </ul>\n                            </div>\n                            <div className=\"d-flex mt-4\">\n                                <div className=\"mx-auto\">\n                                    <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => setShowConfirmSendRequestBox(false)}>\n                                        Cancel\n                                    </button>\n                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={requestDelegSwap}>\n                                        Yes\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        :\n\n                        showConfirmRevokeBox ?\n\n                        <div className=\"modal-body animate__animated animate__fadeIn\">\n                            <h5 className=\"modal-title mb-4\">Revoke Confirmation</h5>\n                            <p>Are you sure you want to revoke the existing transfer ownership request?</p>\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Pending New Owner To Accept</h3>\n                                    <span>{convertBase16ToBech32(swapDelegModalData.swapRecipientAddress)}</span>\n                                </div>\n                            </div>\n                            <div className=\"mx-1\">\n                                <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                            </div>\n                            <div className=\"d-flex mt-4\">\n                                <div className=\"mx-auto\">\n                                    <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => setShowConfirmRevokeBox(false)}>\n                                        Cancel\n                                    </button>\n                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={revokeDelegSwap}>\n                                        Yes\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        :\n\n                        showConfirmRejectBox ?\n\n                        <div className=\"modal-body animate__animated animate__fadeIn\">\n                            <h5 className=\"modal-title mb-4\">Reject Confirmation</h5>\n                            <p>Are you sure you wish to <u><em>reject</em></u> the transfer request?</p>\n\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Requestor's Wallet</h3>\n                                    <span>{convertBase16ToBech32(selectedDelegAddr)}</span>\n                                    <a href={getZillionExplorerLink(convertBase16ToBech32(selectedDelegAddr))} target=\"_blank\" rel=\"noopener noreferrer\" data-tip data-for=\"explorer-tip\"><IconEditBox width=\"16\" height=\"16\" className=\"zillion-explorer-link\"/></a>\n                                    <ReactTooltip id=\"explorer-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                        <span>View Wallet on Zillion Explorer</span>\n                                    </ReactTooltip>\n                                </div>\n                            </div>\n\n                            <div className=\"mx-1\">\n                                <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                            </div>\n\n                            <div className=\"mb-4\">\n                                <small><strong>Notes</strong></small>\n                                <ul>\n                                    <li><small>By clicking on <em>'Yes'</em>, you are rejecting the transfer request and would not receive the stakes from the requestor's wallet.</small></li>\n                                </ul>\n                            </div>\n\n                            <div className=\"d-flex mt-4\">\n                                <div className=\"mx-auto\">\n                                    <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => setShowConfirmRejectBox(false)}>\n                                        Cancel\n                                    </button>\n                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => rejectDelegSwap(selectedDelegAddr)}>\n                                        Yes\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        :\n\n                        showConfirmSwapBox ?\n\n                        <div className=\"modal-body animate__animated animate__fadeIn\">\n                            <h5 className=\"modal-title mb-4\">Accept Confirmation</h5>\n                            <p>Are you sure you wish to <u><em>accept</em></u> all the stakes from this wallet?</p>\n\n                            <div className=\"row node-details-wrapper mb-4\">\n                                <div className=\"col node-details-panel\">\n                                    <h3>Requestor's Wallet</h3>\n                                    <span>{convertBase16ToBech32(selectedDelegAddr)}</span>\n                                    <a href={getZillionExplorerLink(convertBase16ToBech32(selectedDelegAddr))} target=\"_blank\" rel=\"noopener noreferrer\" data-tip data-for=\"explorer-tip\"><IconEditBox width=\"16\" height=\"16\" className=\"zillion-explorer-link\"/></a>\n                                    <ReactTooltip id=\"explorer-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                        <span>View Wallet on Zillion Explorer</span>\n                                    </ReactTooltip>\n                                </div>\n                            </div>\n\n                            <div className=\"mx-1\">\n                                <GasSettings\n                                    gasOption={gasOption}\n                                    gasPrice={gasPrice}\n                                    gasLimit={gasLimit}\n                                    setGasOption={setGasOption}\n                                    onBlurGasPrice={onBlurGasPrice}\n                                    onBlurGasLimit={onBlurGasLimit}\n                                    onGasPriceChange={onGasPriceChange}\n                                    onGasLimitChange={onGasLimitChange}\n                                />\n                            </div>\n\n                            <div className=\"mb-4\">\n                                <small><strong>Notes</strong></small>\n                                <ul>\n                                    <li><small>By clicking on <em>'Yes'</em>, all the stakes are transferred from the requestor's wallet to your wallet.</small></li>\n                                    <li><small>This transfer process is <strong>irreversible.</strong></small></li>\n                                </ul>\n                            </div>\n\n                            <div className=\"d-flex mt-4\">\n                                <div className=\"mx-auto\">\n                                    <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => setShowConfirmSwapBox(false)}>\n                                        Cancel\n                                    </button>\n                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => confirmDelegSwap(selectedDelegAddr)}>\n                                        Yes\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        :\n\n                        <>\n                        <div className=\"d-flex\">\n                            <button type=\"button\" className=\"btn btn-notify-dropdown btn-theme ml-auto mt-1 mr-2\" aria-label=\"Help\" data-tip data-for=\"tutorial-tip\" onClick={() => setShowHelpBox(true)}>\n                                <IconQuestionCircle width=\"22\" height=\"22\"/>\n                            </button>\n                            <button type=\"button\" className=\"close btn shadow-none mx-2 mt-2\" data-dismiss=\"modal\" aria-label=\"Close\" onClick={handleClose}>\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                            <ReactTooltip id=\"tutorial-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                <strong>Help</strong>\n                            </ReactTooltip>\n                        </div>\n                        <Tabs selectedIndex={tabIndex} onSelect={(index) => onSelectTabs(index)}>\n                            <TabList>\n                                <Tab>Change Stake Ownership { swapDelegModalData.swapRecipientAddress ? <span>(1)</span> : null }</Tab>\n                                <Tab>\n                                    Incoming Requests { swapDelegModalData.requestorList.length > 0 ? <span>({swapDelegModalData.requestorList.length})</span> : null}\n                                </Tab>\n                            </TabList>\n\n                            <TabPanel>\n                                <div className=\"modal-body\">\n                                    <p className=\"mb-4\">Transfer <strong>ALL</strong> your existing stakes from one wallet to another by entering a new owner address.</p>\n                                    {\n                                        swapDelegModalData.swapRecipientAddress \n                                        ?\n                                        <div className=\"row node-details-wrapper mb-4\">\n                                            <div className=\"col node-details-panel\">\n                                                <h3>Pending New Owner To Accept</h3>\n                                                <span>{userAddress} (Connected Wallet)</span>\n                                                <br/>\n                                                <IconArrowDown width=\"16\" height=\"16\" className=\"swap-icon mt-2 mb-2\"/>\n                                                <br/>\n                                                <span>{convertBase16ToBech32(swapDelegModalData.swapRecipientAddress)} (New Owner)</span>\n                                            </div>\n                                        </div>\n                                        :\n                                        null\n                                    }\n\n                                    \n                                    {\n                                        // show new address form if editing or no swap recipient\n                                        (isEdit || !swapDelegModalData.swapRecipientAddress)\n                                        ?\n                                        <div className=\"edit-swap-addr\">\n                                            <div className=\"modal-label mb-2\"><strong>Enter new owner address</strong><br/>(in bech32 format e.g. zil1xxxxxxxxxxxxx)</div>\n                                            <div className=\"input-group mb-2\">\n                                                <input type=\"text\" className=\"form-control shadow-none\" value={newDelegAddr} onChange={handleNewDelegAddr} />\n                                            </div> \n                                        </div>\n                                        :\n                                        null\n                                    }\n\n                                    <div className=\"edit-swap-notes\">\n                                        <small><strong>Notes</strong></small>\n                                        <ul>\n                                            <li><small>Beware of scams! Ensure that you know who the recipient is before sending the request.</small></li>\n                                            <li><small>Process is <strong>irreversible</strong> once the recipient has accepted your request.</small></li>\n                                        </ul>\n                                        <p></p>\n                                    </div>\n\n                                    <div className=\"d-flex mt-4\">\n                                        {\n                                            swapDelegModalData.swapRecipientAddress\n                                            ?\n                                            <div className=\"mx-auto\">\n                                                {\n                                                    isEdit\n                                                    ?\n                                                    // allow users to send the modified address\n                                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => toggleConfirmSendRequestBox()}>Send Request</button>\n                                                    :\n                                                    <button type=\"button\" className=\"btn btn-user-action mx-2 shadow-none\" onClick={() => setIsEdit(true)}>Edit Request</button>\n                                                }\n                                                <button type=\"button\" className=\"btn btn-user-action-cancel mx-2 shadow-none\" onClick={() => toggleRevokeSwapBox()}>Revoke Request</button>\n                                            </div>\n                                            :\n                                            // show new owner form\n                                            <button type=\"button\" className=\"btn btn-user-action mx-auto shadow-none\" onClick={() => toggleConfirmSendRequestBox()}>Send Request</button>\n                                        }\n                                    </div>\n                                </div>\n                            </TabPanel>\n\n                            <TabPanel>\n                                {\n                                    swapDelegModalData.requestorList.length === 0\n                                    ?\n                                    <div className=\"swap-deleg-requestor-list m-4\">\n                                        <p>You have no incoming requests.</p>\n                                    </div>\n                                    :\n                                    <>\n                                    <ul className=\"p-3 list-unstyled swap-deleg-requestor-list\">\n                                        {\n                                            swapDelegModalData.requestorList.map((requestorAddr: string, index: number) => (\n                                                <li key={index}>\n                                                    <div className=\"flex mb-2\">\n                                                        <span>{convertBase16ToBech32(requestorAddr)}</span>\n                                                        <a href={getZillionExplorerLink(convertBase16ToBech32(requestorAddr))} target=\"_blank\" rel=\"noopener noreferrer\" data-tip data-for=\"explorer-tip2\"><IconEditBox width=\"16\" height=\"16\" className=\"zillion-explorer-link\"/></a>\n                                                        <div className=\"float-right btn-contract-group\">\n                                                            <button type=\"button\" className=\"btn btn-contract-small shadow-none mx-2\" onClick={() => toggleConfirmSwapBox(requestorAddr)}>Accept</button>\n                                                            <button type=\"button\" className=\"btn btn-contract-small-cancel shadow-none mx-2\" onClick={() => toggleRejectSwapBox(requestorAddr)}>Reject</button>\n                                                        </div>\n                                                    </div>\n                                                </li>\n                                            ))\n                                        }\n                                    </ul>\n                                    <ReactTooltip id=\"explorer-tip2\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                        <span>View Wallet on Zillion Explorer</span>\n                                    </ReactTooltip>\n                                    </>\n                                }\n\n                            </TabPanel>\n                        </Tabs>\n                        </>\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default SwapDelegModal;","import React from 'react';\nimport { useAppSelector } from '../store/hooks';\nimport { OperationStatus } from '../util/enum';\nimport { DelegStats } from '../util/interface';\n\nimport { convertQaToCommaStr, convertGzilToCommaStr } from '../util/utils';\nimport SpinnerNormal from './spinner-normal';\n\n\nfunction DelegatorStatsTable(props: any) {\n    // const data = props.data;\n    const data: DelegStats = useAppSelector(state => state.user.deleg_stats);\n    const loading: OperationStatus = useAppSelector(state => state.user.is_deleg_stats_loading);\n    // const totalPendingWithdrawalAmt = props.totalPendingWithdrawalAmt; // Qa\n    const blockCountToReward = useAppSelector(state => state.staking.reward_blk_countdown);\n\n    return (\n        <>\n        {\n            loading === OperationStatus.PENDING &&\n            <SpinnerNormal class=\"spinner-border dashboard-spinner mb-4\" />\n        }\n        \n        {\n            loading === OperationStatus.COMPLETE &&\n\n            <div className=\"row px-2 pb-3 align-items-center justify-content-center\">\n                <div className=\"d-block deleg-stats-card\">\n                    <h3>EST. Realtime APR</h3>\n                    <span>{data.globalAPY}%</span>\n                </div>\n                <div className=\"d-block deleg-stats-card\">\n                    <h3>Total Deposits</h3>\n                    <span>{convertQaToCommaStr(data.totalDeposits)}</span>\n                </div>\n                <div className=\"d-block deleg-stats-card\">\n                    <h3>Blocks Until Rewards</h3>\n                    <span>{blockCountToReward}</span>\n                </div>\n\n                <div className=\"w-100\"></div>\n\n                <div className=\"d-block deleg-stats-card\">\n                    <h3>GZIL Balance</h3>\n                    <span>{convertGzilToCommaStr(data.gzilBalance)}</span>\n                </div>\n                <div className=\"d-block deleg-stats-card\">\n                    <h3>Unclaimed ZIL Rewards</h3>\n                    <span>{convertQaToCommaStr(data.zilRewards)}</span>\n                </div>\n                <div className=\"d-block deleg-stats-card\">\n                </div>\n            </div>\n        }\n        </>\n    );\n}\n\nexport default DelegatorStatsTable;","import React from 'react';\nimport { convertQaToCommaStr, convertToProperCommRate } from '../util/utils';\n\nimport { OperatorStats } from '../util/interface';\nimport { OperationStatus } from '../util/enum';\nimport { useAppSelector } from '../store/hooks';\nimport SpinnerNormal from './spinner-normal';\n\n\nfunction OperatorStatsTable(props: any) {\n    const data: OperatorStats = useAppSelector(state => state.user.operator_stats);\n    const loading: OperationStatus = useAppSelector(state => state.user.is_operator_stats_loading);\n\n    return (\n        <>\n        {\n            loading === OperationStatus.PENDING &&\n            <SpinnerNormal class=\"spinner-border dashboard-spinner mb-4\" />\n        }\n        {\n            loading === OperationStatus.COMPLETE &&\n            <>\n            <div className=\"row px-2 align-items-center justify-content-center\">\n                <div className=\"d-block operator-stats-card\">\n                    <h3>Stake Amount</h3>\n                    <span>{convertQaToCommaStr(data.stakeAmt)}</span>\n                </div>\n                <div className=\"d-block operator-stats-card\">\n                    <h3>Buffered Deposit</h3>\n                    <span>{convertQaToCommaStr(data.bufferedDeposits)}</span>\n                </div>\n                <div className=\"d-block operator-stats-card\">\n                    <h3>Delegators</h3>\n                    <span>{data.delegNum}</span>\n                </div>\n            </div>\n\n            <div className=\"row px-2 pb-2 align-items-center justify-content-center\">\n                <div className=\"d-block operator-stats-card\">\n                    <h3>Commission Rate</h3>\n                    <span>{convertToProperCommRate(data.commRate).toFixed(2)}%</span>\n                </div>\n                <div className=\"d-block operator-stats-card\">\n                    <h3>Commission Rewards</h3>\n                    <span>{convertQaToCommaStr(data.commReward)}</span>\n                </div>\n                <div className=\"d-block operator-stats-card\"></div>\n            </div>\n            </>\n        }\n        </>\n        \n    );\n}\n\nexport default OperatorStatsTable;","import React from 'react';\nimport { usePromiseTracker } from \"react-promise-tracker\";\n\n// for use with a promise tracker\n// see @ModalSpinner for an implementation without promise\nconst Spinner = (props: any) => {\n    const { promiseInProgress } = usePromiseTracker({ area: props.area, delay: 0 });\n\n    return (\n        promiseInProgress ? (\n            <div className={props.class ? props.class : 'spinner-border'} role=\"status\">\n                <span className=\"sr-only\">Loading...</span>\n            </div>\n        ) : null\n    );\n};\n\nexport default Spinner;","import React, {useMemo } from 'react';\nimport { useTable, useSortBy } from 'react-table';\nimport ReactTooltip from 'react-tooltip';\n\nimport IconQuestionCircle from './icons/question-circle';\nimport Spinner from './spinner';\nimport { PromiseArea, ButtonText, ContractState } from '../util/enum';\nimport { convertQaToCommaStr } from '../util/utils';\nimport { PendingWithdrawStats } from '../util/interface';\nimport { useAppSelector } from '../store/hooks';\n\n\nfunction Table({ columns, data, tableId }: any) {\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns, \n            data,\n            initialState : {\n                sortBy: [\n                    {\n                        id: \"blkNumCountdown\",\n                        desc: false\n                    }\n                ]\n            }\n        }, useSortBy);\n\n    return (\n        <table id={tableId} className=\"table table-responsive-lg\" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map(column => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>{column.render('Header')}</th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                            })}\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction CompleteWithdrawalTable(props: any) {\n    const data: PendingWithdrawStats[] = useAppSelector(state => state.user.pending_withdraw_list);\n    const completeWithdrawAmt = useAppSelector(state => state.user.complete_withdrawal_amt);\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'pending blocks till claim',\n                accessor: 'blkNumCountdown'\n            },\n            {\n                Header: 'progress',\n                accessor: 'progress',\n                Cell: ({ row }: any) => <span>{row.original.progress}%</span>\n            },\n            {\n                Header: 'amount (ZIL)',\n                accessor: 'amount',\n                Cell: ({ row }: any) => <span>{convertQaToCommaStr(row.original.amount)}</span>\n            }\n        ], []\n    );\n\n    return (\n        <>\n        { data.length !== 0 &&\n\n        <div id=\"delegator-complete-withdraw-details\" className=\"col-12 mt-2 px-1 py-3\">\n            <div id=\"complete-withdraw-accordion\">\n                <div className=\"card text-center\">\n                    <h6 className=\"inner-section-heading px-4 pt-4\">Pending Stake Withdrawals&nbsp;\n                        <span data-tip data-for=\"withdraw-question\">\n                            <IconQuestionCircle width=\"16\" height=\"16\" className=\"section-icon\" />\n                        </span>\n                    </h6>\n                    <div className=\"text-center\">\n                        <Spinner class=\"spinner-border dashboard-spinner mb-4\" area={PromiseArea.PROMISE_GET_DELEG_STATS} />\n                    </div>\n                    <div className=\"card-header d-flex justify-content-between\" id=\"complete-withdraw-accordion-header\">\n                        <div>\n                            <span><em>You can now withdraw <strong>{convertQaToCommaStr(completeWithdrawAmt)}</strong> ZIL</em></span>\n                        </div>\n                        <div className=\"btn-group\">\n                            { \n                                data.length !== 0 && \n                                <button \n                                    className=\"btn btn-inner-contract mr-4 shadow-none\" \n                                    data-toggle=\"modal\" \n                                    data-target=\"#complete-withdrawal-modal\" \n                                    data-keyboard=\"false\" \n                                    data-backdrop=\"static\" \n                                    disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                                        {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Complete Stake Withdrawals'}\n                                </button> \n                            }\n                            { \n                                data.length !== 0 && \n                                <button \n                                    className=\"btn btn-inner-contract-2 mr-4 shadow-none\" \n                                    data-toggle=\"collapse\" \n                                    data-target=\"#complete-withdraw-details\" \n                                    aria-expanded=\"true\" \n                                    aria-controls=\"complete-withdraw-details\">\n                                        View Details\n                                </button> \n                            }\n                        </div>\n                    </div>\n\n                    <div id=\"complete-withdraw-details\" className=\"collapse\" aria-labelledby=\"complete-withdraw-accordion-header\" data-parent=\"#complete-withdraw-accordion\">\n                        <div className=\"card-body\">\n                            { data.length === 0 && <em>You have no ZILs ready for withdrawal yet.</em> }\n                            <Table columns={columns} data={data} />\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <ReactTooltip id=\"withdraw-question\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                <span>When you initiate a stake withdrawal, the amount is not withdrawn immediately.</span>\n                <br/>\n                <span>The amount is processed at a certain block number and only available to withdraw<br/>once the required block number is reached.</span>\n            </ReactTooltip>\n        </div>\n        }\n\n        </>\n    )\n\n}\n\nexport default CompleteWithdrawalTable;","import React from 'react';\n\nfunction IconShuffle(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M18 17.883V16l5 3-5 3v-2.09a9 9 0 0 1-6.997-5.365L11 14.54l-.003.006A9 9 0 0 1 2.725 20H2v-2h.725a7 7 0 0 0 6.434-4.243L9.912 12l-.753-1.757A7 7 0 0 0 2.725 6H2V4h.725a9 9 0 0 1 8.272 5.455L11 9.46l.003-.006A9 9 0 0 1 18 4.09V2l5 3-5 3V6.117a7 7 0 0 0-5.159 4.126L12.088 12l.753 1.757A7 7 0 0 0 18 17.883z\"/></svg>\n    );\n}\n\nexport default IconShuffle;","import React from 'react';\n\nfunction IconRefresh(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className}><g data-name=\"Layer 2\"><g data-name=\"refresh\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M20.3 13.43a1 1 0 0 0-1.25.65A7.14 7.14 0 0 1 12.18 19 7.1 7.1 0 0 1 5 12a7.1 7.1 0 0 1 7.18-7 7.26 7.26 0 0 1 4.65 1.67l-2.17-.36a1 1 0 0 0-1.15.83 1 1 0 0 0 .83 1.15l4.24.7h.17a1 1 0 0 0 .34-.06.33.33 0 0 0 .1-.06.78.78 0 0 0 .2-.11l.09-.11c0-.05.09-.09.13-.15s0-.1.05-.14a1.34 1.34 0 0 0 .07-.18l.75-4a1 1 0 0 0-2-.38l-.27 1.45A9.21 9.21 0 0 0 12.18 3 9.1 9.1 0 0 0 3 12a9.1 9.1 0 0 0 9.18 9A9.12 9.12 0 0 0 21 14.68a1 1 0 0 0-.7-1.25z\"/></g></g></svg>\n    );\n}\n\nexport default IconRefresh;","import React from 'react';\n\nfunction IconBell(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width={props.width} height={props.height} className={props.className} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path><path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path></svg>\n    );\n}\n\nexport default IconBell;","import React from 'react';\n\nfunction IconCheckboxBlankCircle(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width={props.width} height={props.height} className={props.className} fill=\"none\" stroke=\"currentColor\" strokeWidth=\"0\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle></svg>\n    );\n}\n\nexport default IconCheckboxBlankCircle;","import React from 'react';\nimport { getTxnLink, getTransactionText } from '../util/utils';\n\nfunction RecentTxnDropdown(props: any) {\n    const data = props.data;\n    const network = props.networkURL;\n\n    return (\n        <div id=\"txn-notify-dropdown\">\n            <div className=\"notification\">\n                <div className=\"notification-heading\">\n                    <h2>Recent Transactions</h2>\n                </div>\n                <div className=\"notification-wrapper\">\n\n                    { data.length === 0 &&\n                        <p><em>No recent transactions found.</em></p> }\n\n                    { data.map((item: { type: number, txnId: string }, index: number) =>\n                        <div key={item.txnId ? item.txnId : index}>\n\n                            { \n                                index === 0 &&\n                                <h3 className=\"notification-subheading\">Latest</h3>\n                            }\n\n                            {\n                                index === 1 &&\n                                <h3 className=\"notification-subheading\">Others</h3>\n                            }\n\n                            <a href={getTxnLink(item.txnId, network)} className=\"notification-item-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n                                <div className=\"notification-item\">\n                                    <h3 className=\"item-title\">{getTransactionText(item.type)}</h3>\n                                    <p className=\"item-info\"><strong>Transaction ID</strong><br/>\n                                        <span className=\"txn-id\">{item.txnId ? item.txnId : \"N/A\"}</span>\n                                    </p>\n                                </div>\n                            </a>\n\n                        </div>\n                    )}\n\n                </div>\n            </div>\n\n        </div>\n    );\n}\n\nexport default RecentTxnDropdown;","import React from 'react';\nimport { getEnvironment } from '../util/config-json-helper';\nimport { Environment, ContractState } from '../util/enum';\n\n\nfunction WarningDashboardBanner(props: any) {\n    // config.js from public folder\n    const env = getEnvironment();\n\n    return (\n        <div id=\"banner\" className=\"mb-4 text-center\">\n            { \n                env === Environment.PROD ? \n                <>\n                <div className=\"px-3 py-3\">\n                    <div><strong>Important</strong>: Please note that gZIL minting has concluded as of <span className=\"final-gzil-mint-block ml-2\">Block 1483713</span>. <span className=\"mx-2\">No further gZIL will be minted.</span> The Zilliqa staking program will still continue to distribute ZIL for staking rewards.</div>\n                </div>\n                {\n                    ContractState.IS_PAUSED.toString() === 'true' && \n                    <div className=\"px-3 pt-3 py-3\"><strong>Attention</strong>: We have noticed an issue with the staking contract which is causing a slowdown of the Zilliqa network. <br/>While we are investigating the issue and work on a fix, the staking contract has been paused for a week (starting from May 21, 2021).<br/>Once the staking contract is unpaused, any missed rewards for the paused period will be retroactively disbursed.<br/>All funds are SAFU and we apologize for your inconvenience. </div>\n                }\n                </> : null\n            }\n        </div>\n    );\n}\n\nexport default WarningDashboardBanner;","import React, { useEffect, useState } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport ReactTooltip from 'react-tooltip';\n\nimport { Role, NetworkURL, Network as NetworkLabel, AccountType, Environment, Constants, TransactionType, ButtonText, ContractState, OperationStatus } from '../util/enum';\nimport { convertQaToCommaStr, getAddressLink } from '../util/utils';\nimport StakingPortfolio from './staking-portfolio';\nimport SsnTable from './ssn-table';\nimport Alert from './alert';\n\nimport { toBech32Address } from '@zilliqa-js/crypto';\n\nimport WithdrawCommModal from './contract-calls/withdraw-comm';\nimport UpdateReceiverAddress from './contract-calls/update-receiver-address';\nimport UpdateCommRateModal from './contract-calls/update-commission-rate';\n\nimport DelegateStakeModal from './contract-calls/delegate-stake';\nimport ReDelegateStakeModal from './contract-calls/redeleg';\nimport WithdrawStakeModal from './contract-calls/withdraw-stake';\nimport WithdrawRewardModal from './contract-calls/withdraw-reward';\nimport CompleteWithdrawModal from './contract-calls/complete-withdraw';\nimport SwapDelegModal from './contract-calls/swap-deleg';\n\nimport logo from \"../static/logo.png\";\nimport DisclaimerModal from './disclaimer';\nimport DelegatorStatsTable from './delegator-stats-table';\nimport OperatorStatsTable from './operator-stats-table';\nimport CompleteWithdrawalTable from './complete-withdrawal-table';\n\nimport IconShuffle from './icons/shuffle';\nimport IconQuestionCircle from './icons/question-circle';\nimport IconRefresh from './icons/refresh';\nimport IconBell from './icons/bell';\nimport IconCheckboxBlankCircle from './icons/checkbox-blank-circle';\nimport IconSun from './icons/sun';\nimport IconMoon from './icons/moon';\n\nimport useDarkMode from '../util/use-dark-mode';\nimport { getLocalItem, storeLocalItem } from '../util/use-local-storage';\n\nimport Footer from './footer';\nimport RecentTxnDropdown from './recent-txn';\nimport Tippy from '@tippyjs/react';\nimport '../tippy.css';\nimport 'tippy.js/animations/shift-away-subtle.css';\n\nimport WarningDashboardBanner from './warning-dashboard-banner';\n\nimport { POLL_USER_DATA_STOP, QUERY_AND_UPDATE_USER_STATS, RESET_USER_STATE, UPDATE_ADDRESS } from '../store/userSlice';\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\nimport { logger } from '../util/logger';\nimport { getEnvironment, getNetworks, NetworkConfig, Networks } from '../util/config-json-helper';\nimport { RESET_BLOCKCHAIN_STATE, UPDATE_CHAIN_INFO } from '../store/blockchainSlice';\nimport { ZilSigner } from '../zilliqa-signer';\nimport { QUERY_AND_UPDATE_STAKING_STATS } from '../store/stakingSlice';\n\n\nfunction Dashboard(props: any) {\n    const dispatch = useAppDispatch();\n\n    const userState = useAppSelector(state => state.user);\n    const isDelegStatsLoading = useAppSelector(state => state.user.is_deleg_stats_loading);\n    const blockchainState = useAppSelector(state => state.blockchain);\n\n    // config.js from public folder\n    const env = getEnvironment();\n    const networks: Networks = getNetworks();\n    const proxy = useAppSelector(state => state.blockchain.proxy);\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n\n    const [walletAddress, setWalletAddress] = useState(userState.address_base16 || '');\n    const [blockchain, setBlockchain] = useState(blockchainState.blockchain || '');\n\n    const [isRefreshDisabled, setIsRefreshDisabled] = useState(false);\n    const [isTxnNotify, setIsTxnNotify] = useState(false);\n    const [ariaExpanded, setAriaExpanded] = useState(false);\n\n    const [recentTransactions, setRecentTransactions] = useState([] as any)\n\n    const darkMode = useDarkMode(true);\n\n    const cleanUp = () => {\n        logger(\"directing to main\");\n        dispatch(POLL_USER_DATA_STOP());\n        dispatch(RESET_USER_STATE());\n        dispatch(RESET_BLOCKCHAIN_STATE());\n        props.history.push(\"/\");\n    }\n\n    // set recent txn indicator icon\n    const handleTxnNotify = () => {\n        if (!isTxnNotify) {\n            return;\n        }\n        setIsTxnNotify(false);\n    }\n\n    const toggleTheme = () => {\n        if (darkMode.value === true) {\n          darkMode.disable();\n        } else {\n          darkMode.enable();\n        }\n    }\n\n    const updateRecentTransactions = (type: TransactionType, txnId: string) => {\n        let temp = JSON.parse(JSON.stringify(recentTransactions));\n        if ((temp.length + 1) > 10) {\n            // suppose we add a new element\n            // restrict number of elements as local storage has limits\n            // recent txn is always in newest to oldest\n            // remove last element - last element = oldest txn\n            temp.pop();\n        }\n        // reverse so that order is oldest to newest\n        // add new item as last element\n        temp = temp.reverse();\n        temp.push({type: type, txnId: txnId});\n\n        // restore order back\n        setRecentTransactions([...temp].reverse());\n        storeLocalItem(userState.address_bech32, proxy, networkURL, 'recent-txn', temp.reverse());\n\n        // set recent txn indicator icon\n        setIsTxnNotify(true);\n    }\n\n    // re-hydrate data from localstorage\n    useEffect(() => {\n        let txns = getLocalItem(userState.address_bech32, proxy, networkURL, 'recent-txn', [] as any); \n        setRecentTransactions(txns);\n    }, [userState.address_bech32, proxy, networkURL]);\n\n    const timeout = (delay: number) => {\n        return new Promise(res => setTimeout(res, delay));\n    }\n\n    const pollData = async () => {\n        console.log(\"polling data...\")\n        setIsRefreshDisabled(true);\n        dispatch(QUERY_AND_UPDATE_USER_STATS());\n        dispatch(QUERY_AND_UPDATE_STAKING_STATS());\n        await timeout(Constants.MANUAL_REFRESH_DELAY);\n        setIsRefreshDisabled(false);\n    }\n\n    // for zilpay to toggle different network\n    const networkChanger = (net: string) => {\n        let label;\n\n        switch (net) {\n            case NetworkLabel.MAINNET:\n                // do nothing\n                Alert(\"info\", \"Info\", \"You are on Mainnet.\");\n                label = NetworkLabel.MAINNET;\n                break;\n            case NetworkLabel.TESTNET:\n                label = NetworkLabel.TESTNET;\n                if (env === Environment.PROD) {\n                    // warn users not to switch to testnet on production\n                    Alert(\"warn\", \"Testnet not supported\", \"Please switch to Mainnet via ZilPay.\");\n                }\n                break;\n            case NetworkLabel.ISOLATED_SERVER:\n            case NetworkLabel.PRIVATE:\n                label = NetworkLabel.ISOLATED_SERVER;\n                if (env === Environment.PROD) {\n                    // warn users not to switch to testnet on production\n                    Alert(\"warn\", \"Private network not supported\", \"Please switch to Mainnet via ZilPay.\");\n                }\n                break;\n            default:\n                label = NetworkLabel.TESTNET;\n                break;\n        }\n\n        const networkConfig: NetworkConfig = networks[label];\n        dispatch(UPDATE_CHAIN_INFO({\n            proxy: networkConfig.proxy || '',\n            impl: networkConfig.impl || '',\n            blockchain: networkConfig.blockchain || '',\n            staking_viewer: networkConfig.node_status || '',\n            api_list: networkConfig.api_list || [],\n        }));\n    }\n\n    /**\n     * When document has loaded, it start to observable network form zilpay.\n     */\n    useEffect(() => {\n        if (userState.account_type === AccountType.ZILPAY) {\n            const zilPay = (window as any).zilPay;\n\n            if (zilPay) {\n                // switch to the zilpay network on load\n                networkChanger(zilPay.wallet.net);\n\n                const accountStreamChanged = zilPay.wallet.observableAccount().subscribe((account: any) => {\n                    console.log(\"zil pay account changing...\");\n                    const bech32 = toBech32Address(account.base16);\n                    dispatch(UPDATE_ADDRESS({ address_base16: account.base16, address_bech32: bech32 }));\n                });\n\n                const networkStreamChanged = zilPay.wallet.observableNetwork().subscribe((net: string) => networkChanger(net));\n\n                return () => {\n                    accountStreamChanged.unsubscribe();\n                    networkStreamChanged.unsubscribe();\n                };\n            }\n        }\n        // must only run once due to global listener\n        // eslint-disable-next-line\n    }, []);\n\n    useEffect(() => {\n        if (env === Environment.DEV) {\n            // disable auth check for development\n            return;\n        }\n\n        if (!userState.authenticated) {\n            // redirect to login request\n            dispatch(POLL_USER_DATA_STOP());\n            dispatch(RESET_USER_STATE());\n            dispatch(RESET_BLOCKCHAIN_STATE());\n            props.history.push(\"/oops\");\n        }\n\n    }, [env, userState.authenticated, props.history, dispatch]);\n\n    // change to correct role\n    useEffect(() => {\n        console.log(\"change wallet\")\n        \n        if (walletAddress !== userState.address_base16) {\n            // address changed\n            dispatch(QUERY_AND_UPDATE_USER_STATS());\n        }\n\n        setWalletAddress(userState.address_base16);\n    }, [walletAddress, userState.address_base16, dispatch]);\n\n    useEffect(() => {\n        console.log(\"change network\")\n        if (blockchain !== blockchainState.blockchain) {\n            // network changed\n            dispatch(QUERY_AND_UPDATE_USER_STATS());\n            dispatch(QUERY_AND_UPDATE_STAKING_STATS());\n            ZilSigner.changeNetwork(blockchainState.blockchain);\n        }\n        setBlockchain(blockchainState.blockchain);\n\n    }, [blockchain, blockchainState.blockchain, dispatch]);\n\n    // prevent user from refreshing\n    useEffect(() => {\n        window.onbeforeunload = (e: any) => {\n            e.preventDefault();\n            e.returnValue = 'The page auto retrieves data periodically. Please do not force refresh as you will lose your wallet connection.';\n            setTimeout(() => {\n                toast.dismiss();\n            }, 8000);\n            return (\n                Alert(\"warn\", \"Warning\", \"The app auto retrieves data periodically. Please do not force refresh as you will lose your wallet connection.\")\n            );\n        }\n    }, []);\n\n    useEffect(() => {\n        if (userState.selected_role === Role.OPERATOR && \n            userState.role === Role.DELEGATOR) {\n            Alert(\"warn\", \"Warning\", \"You have been redirected to the delegator dashboard.\");\n        }\n    }, [userState.selected_role, userState.role]);\n\n\n    // eslint-disable-next-line\n    return (\n        <>\n        <nav className=\"navbar navbar-expand-lg navbar-dark\">\n            <button type=\"button\" className=\"btn navbar-brand shadow-none p-0 pl-2\">\n                <span>\n                    <img className=\"logo mx-auto\" src={logo} alt=\"zilliqa_logo\"/>\n                    <span className=\"navbar-title\">ZILLIQA STAKING</span>\n                </span>\n            </button>\n            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\"></span>\n            </button>\n\n            <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                <ul className=\"navbar-nav mr-auto\">\n                </ul>\n                <ul className=\"navbar-nav navbar-right\">\n                    {/* wallet address */}\n                    <li className=\"nav-item\">\n                        <p className=\"px-1\">{userState.address_bech32 ? <a href={getAddressLink(userState.address_bech32, networkURL)} className=\"wallet-link\" target=\"_blank\" rel=\"noopener noreferrer\">{userState.address_bech32}</a> : 'No wallet detected'}</p>\n                    </li>\n                    \n                    {/* balance */}\n                    <li className=\"nav-item\">\n                        <p className=\"px-1\">{userState.balance ? convertQaToCommaStr(`${userState.balance}`) : '0.000'} ZIL</p>\n                    </li>\n\n                    {/* network */}\n                    <li className=\"nav-item\">\n                        { networkURL === NetworkURL.TESTNET && <p className=\"px-1\">Testnet</p> }\n                        { networkURL === NetworkURL.MAINNET && <p className=\"px-1\">Mainnet</p> }\n                        { networkURL === NetworkURL.ISOLATED_SERVER && <p className=\"px-1\">Isolated Server</p> }\n                    </li>\n\n                    <li className=\"nav-item\">\n                        <button \n                            type=\"button\" \n                            className=\"btn btn-notify-dropdown btn-theme shadow-none mx-2\"  \n                            data-toggle=\"modal\" \n                            data-target=\"#swap-deleg-modal\" \n                            data-keyboard=\"false\" \n                            data-backdrop=\"static\"\n                            data-tip\n                            data-for=\"swap-tip\">\n                                <IconShuffle width=\"16\" height=\"16\"/>\n                                {\n                                    //@ts-ignore\n                                    <span badge={userState.swap_deleg_modal_data.swapRecipientAddress ? (userState.swap_deleg_modal_data.requestorList.length+1) : userState.swap_deleg_modal_data.requestorList.length}></span>\n                                }\n                        </button>\n\n                        <ReactTooltip id=\"swap-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                            <span>Change Stake Ownership</span>\n                        </ReactTooltip>\n                    </li>\n\n                    {/* txn notifications */}\n                    <li className=\"nav-item\">\n                        <Tippy \n                            content={<RecentTxnDropdown data={recentTransactions} networkURL={networkURL} />} \n                            animation=\"shift-away-subtle\"\n                            trigger=\"click\"\n                            arrow={false}\n                            interactive={true}\n                            placement=\"bottom-end\"\n                            appendTo=\"parent\"\n                            onMount={() => setAriaExpanded(true)}\n                            onHide={() => setAriaExpanded(false)}>\n                                <button \n                                    type=\"button\" \n                                    className=\"btn btn-notify-dropdown shadow-none\" \n                                    onClick={handleTxnNotify} \n                                    aria-haspopup=\"true\" \n                                    aria-expanded={ariaExpanded}\n                                    data-tip\n                                    data-for=\"notification-tip\">\n                                        <div className=\"dropdown-notify-wrapper\">\n                                            <IconBell width=\"16\" height=\"16\" className=\"dropdown-toggle-icon\" />\n                                            { isTxnNotify && <IconCheckboxBlankCircle width=\"10\" height=\"10\" className=\"dropdown-notify-icon\" /> }\n                                        </div>\n                                </button>\n                        </Tippy>\n                        <ReactTooltip id=\"notification-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                            <span>Recent Transactions</span>\n                        </ReactTooltip>\n                    </li>\n\n                    <li className=\"nav-item\">\n                        <button type=\"button\" className=\"btn btn-notify-dropdown btn-theme shadow-none mx-2\" onClick={toggleTheme} data-tip data-for=\"theme-toggle-tip\">\n                        { \n                            darkMode.value === true ? \n                            <IconSun width=\"16\" height=\"16\"/> : \n                            <IconMoon width=\"16\" height=\"16\"/>\n                        }\n                        </button>\n                        <ReactTooltip id=\"theme-toggle-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                            <span>Appearance</span>\n                        </ReactTooltip>\n                    </li>\n\n                    <li className=\"nav-item\">\n                        <button type=\"button\" className=\"btn btn-sign-out mx-2\" onClick={cleanUp}>Sign Out</button>\n                    </li>\n                </ul>\n            </div>\n        </nav>\n\n        <WarningDashboardBanner />\n\n        <div id=\"dashboard\" className=\"container-fluid h-100\">\n            <div className=\"row h-100\">\n                <div id=\"content\" className=\"col pt-4\">\n                    <div className=\"container-xl\">\n                        <div className=\"row\">\n                            <div className=\"col-12\">\n                                <div className=\"d-flex justify-content-end\">\n                                    <button \n                                        type=\"button\" \n                                        className=\"btn btn-user-secondary-action shadow-none\" \n                                        onClick={pollData} data-tip data-for=\"refresh-tip\" \n                                        disabled={isRefreshDisabled || isDelegStatsLoading === OperationStatus.PENDING}>\n                                            <IconRefresh width=\"20\" height=\"20\" />\n                                    </button>\n                                    <ReactTooltip id=\"refresh-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                        <span>Refresh</span>\n                                    </ReactTooltip>\n                                </div>\n\n                                \n                                {/* delegator section */}\n                                {/* complete withdrawal */}\n                                {\n                                    (userState.role === Role.DELEGATOR) &&\n\n                                    <CompleteWithdrawalTable />\n                                }\n\n                                {\n                                    (userState.role === Role.OPERATOR) &&\n\n                                    <>\n                                    {/* node operator section */}\n\n                                    <div className=\"p-4 mt-4 dashboard-card\">\n                                        <h5 className=\"card-title mb-4\">Hi {userState.operator_stats.name ? userState.operator_stats.name : 'Operator'}! What would you like to do today?</h5>\n                                        <button \n                                            type=\"button\" \n                                            className=\"btn btn-contract mr-4 shadow-none\" \n                                            data-toggle=\"modal\" \n                                            data-target=\"#update-comm-rate-modal\" \n                                            data-keyboard=\"false\" \n                                            data-backdrop=\"static\" \n                                            disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                                                {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Update Commission'}\n                                        </button>\n                                        <button \n                                            type=\"button\" \n                                            className=\"btn btn-contract mr-4 shadow-none\" \n                                            data-toggle=\"modal\" \n                                            data-target=\"#update-recv-addr-modal\" \n                                            data-keyboard=\"false\" \n                                            data-backdrop=\"static\" \n                                            disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                                                {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Update Receiving Address'}\n                                        </button>\n                                        <button \n                                            type=\"button\" \n                                            className=\"btn btn-contract mr-4 shadow-none\" \n                                            data-toggle=\"modal\" \n                                            data-target=\"#withdraw-comm-modal\" \n                                            data-keyboard=\"false\" \n                                            data-backdrop=\"static\" \n                                            disabled={ContractState.IS_PAUSED.toString() === 'true' ? true : false}>\n                                                {ContractState.IS_PAUSED.toString() === 'true' ? ButtonText.NOT_AVAILABLE : 'Withdraw Commission'}\n                                        </button>\n                                    </div>\n                                    </>\n                                }\n\n                                {\n                                    (userState.role === Role.DELEGATOR) &&\n                                    <>\n                                    {/* delegator statistics */}\n\n                                    <div id=\"delegator-stats-details\" className=\"p-4 dashboard-card container-fluid\">\n                                        <div className=\"row\">\n                                            <div className=\"col\">\n                                                <h5 className=\"card-title mb-4\">Overview</h5>\n                                            </div> \n                                            <div className=\"col-12 text-center\">\n                                                <DelegatorStatsTable />\n                                            </div>\n                                        </div>\n                                    </div>\n                                    </>\n                                }\n\n                                {\n                                    (userState.role === Role.DELEGATOR) &&\n                                    <>\n                                    {/* delegator portfolio */}\n\n                                    <div id=\"staking-portfolio-details\" className=\"p-4 dashboard-card container-fluid\">\n                                        <div className=\"row\">\n                                            <div className=\"col\">\n                                                <h5 className=\"card-title mb-4\">My Staking Portfolio</h5>\n                                            </div>\n                                            <div className=\"col-12 mt-2 px-4 text-center\">\n                                                <div className=\"inner-section\">\n                                                    <h6 className=\"inner-section-heading px-4 pt-4 pb-3\">Deposits <span data-tip data-for=\"deposit-question\"><IconQuestionCircle width=\"16\" height=\"16\" className=\"section-icon\" /></span></h6>\n                                                    <StakingPortfolio />\n                                                </div>\n                                            </div>\n                                            <ReactTooltip id=\"deposit-question\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                                                <span>This shows you the list of nodes which you have staked your deposit in.</span>\n                                            </ReactTooltip>\n                                        </div>\n                                    </div>\n                                    </>\n                                }\n\n                                {/* operator statistics */}\n                                {\n                                    (userState.role === Role.OPERATOR) &&\n\n                                   <div id=\"operator-stats-details\" className=\"p-4 dashboard-card container-fluid\">\n                                        <div className=\"row\">\n                                            <div className=\"col\">\n                                                <h5 className=\"card-title mb-4\">My Node Performance</h5>\n                                            </div> \n                                            <div className=\"col-12 text-center\">\n                                                <OperatorStatsTable />\n                                            </div>\n                                        </div>\n                                    </div>\n                                }\n\n                                <div id=\"dashboard-ssn-details\" className=\"p-4 dashboard-card container-fluid\">\n                                    <div className=\"row\">\n                                        <div className=\"col\">\n                                            <h5 className=\"card-title mb-4\">Staked Seed Nodes</h5>\n                                            <p className=\"info mt-4\">Please refer to our&nbsp; \n                                                <a className=\"info-link\" href={blockchainState.staking_viewer ? \n                                                    blockchainState.staking_viewer : \n                                                    \"https://zilliqa.com/\"} \n                                                        target=\"_blank\" \n                                                        rel=\"noopener noreferrer\">\n                                                        Staking Viewer \n                                                </a> \n                                                &nbsp;for more information on the nodes' statuses.\n                                            </p>\n                                        </div>\n                                        <div className=\"col-12 text-center\">\n                                            <SsnTable showStakeBtn={true} />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div>\n                                    <ToastContainer \n                                        hideProgressBar={true} \n                                        autoClose={10000} \n                                        pauseOnHover />\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <Footer />\n            <DisclaimerModal />\n\n            <UpdateCommRateModal \n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <UpdateReceiverAddress\n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <WithdrawCommModal \n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <DelegateStakeModal \n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <ReDelegateStakeModal\n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <WithdrawStakeModal\n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <WithdrawRewardModal \n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n\n            <CompleteWithdrawModal \n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n            \n            <SwapDelegModal\n                updateData={pollData}\n                updateRecentTransactions={updateRecentTransactions} />\n                \n        </div>\n        </>\n    );\n}\n\nexport default Dashboard;","import React from \"react\";\n\nfunction IconNotAuthenticated(props: any) {\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 551.5 105.2\" width={props.width} height={props.height} className={props.className}>\n            <g id=\"Layer_2\" data-name=\"Layer 2\">\n                <g id=\"Layer_1-2\" data-name=\"Layer 1\">\n                    <g id=\"Server\"><path className=\"cls-1\" d=\"M44,18.7H12.6A1.6,1.6,0,0,0,11,20.3a1.6,1.6,0,0,0,1.6,1.5H44a1.6,1.6,0,0,0,1.6-1.5A1.6,1.6,0,0,0,44,18.7Z\"/>\n                        <circle className=\"cls-1\" cx=\"83.4\" cy=\"20.3\" r=\"4.7\"/>\n                        <path className=\"cls-1\" d=\"M94.4,4.6H6.3A6.3,6.3,0,0,0,0,10.8V29.7A6.3,6.3,0,0,0,6.3,36H94.4a6.3,6.3,0,0,0,6.3-6.3V10.8A6.3,6.3,0,0,0,94.4,4.6Zm3.1,25.1a3.1,3.1,0,0,1-3.1,3.2H6.3a3.2,3.2,0,0,1-3.2-3.2V10.8A3.2,3.2,0,0,1,6.3,7.7H94.4a3.1,3.1,0,0,1,3.1,3.1Z\"/>\n                        <path className=\"cls-1\" d=\"M44,53.3H12.6A1.6,1.6,0,0,0,11,54.9a1.6,1.6,0,0,0,1.6,1.5H44a1.6,1.6,0,0,0,1.6-1.5A1.6,1.6,0,0,0,44,53.3Z\"/>\n                        <circle className=\"cls-1\" cx=\"83.4\" cy=\"54.9\" r=\"4.7\"/>\n                        <path className=\"cls-1\" d=\"M94.4,39.2H6.3A6.3,6.3,0,0,0,0,45.4V64.3a6.3,6.3,0,0,0,6.3,6.3H94.4a6.3,6.3,0,0,0,6.3-6.3V45.4A6.3,6.3,0,0,0,94.4,39.2Zm3.1,25.1a3.1,3.1,0,0,1-3.1,3.2H6.3a3.2,3.2,0,0,1-3.2-3.2V45.4a3.2,3.2,0,0,1,3.2-3.1H94.4a3.1,3.1,0,0,1,3.1,3.1Z\"/>\n                        <path className=\"cls-1\" d=\"M44,87.9H12.6A1.6,1.6,0,0,0,11,89.5,1.6,1.6,0,0,0,12.6,91H44a1.6,1.6,0,0,0,1.6-1.5A1.6,1.6,0,0,0,44,87.9Z\"/>\n                        <circle className=\"cls-1\" cx=\"83.4\" cy=\"89.5\" r=\"4.7\"/>\n                        <path className=\"cls-1\" d=\"M94.4,73.8H6.3A6.3,6.3,0,0,0,0,80.1V98.9a6.3,6.3,0,0,0,6.3,6.3H94.4a6.3,6.3,0,0,0,6.3-6.3V80.1A6.3,6.3,0,0,0,94.4,73.8Zm3.1,25.1a3.1,3.1,0,0,1-3.1,3.2H6.3a3.2,3.2,0,0,1-3.2-3.2V80.1a3.2,3.2,0,0,1,3.2-3.2H94.4a3.1,3.1,0,0,1,3.1,3.2Z\"/></g>\n                        <line className=\"cls-1\" x1=\"99.5\" y1=\"57.2\" x2=\"451.5\" y2=\"57.2\"/>\n                        <line className=\"cls-2\" x1=\"99.5\" y1=\"57.2\" x2=\"104.5\" y2=\"57.2\"/>\n                        <line className=\"cls-3\" x1=\"114.2\" y1=\"57.2\" x2=\"441.6\" y2=\"57.2\"/>\n                        <line className=\"cls-2\" x1=\"446.5\" y1=\"57.2\" x2=\"451.5\" y2=\"57.2\"/>\n                        <path className=\"cls-1\" d=\"M545.8,49.2V29.3a8.3,8.3,0,0,0-8.3-8.3h-2.8l.6-2.2a6.6,6.6,0,0,0-4.5-8.2L511.9,5.2a1.6,1.6,0,0,0-2.1,1.1A1.8,1.8,0,0,0,511,8.4l11.8,3.4a10.3,10.3,0,0,0,0,9.2H488V7.9a1.7,1.7,0,0,0-1.6-1.7,1.8,1.8,0,0,0-1.7,1.7V21h-5.6V7.9a1.7,1.7,0,0,0-1.7-1.7,1.7,1.7,0,0,0-1.6,1.7V21h-7.3V6.7a3.4,3.4,0,0,1,3.3-3.4h28.1a3.4,3.4,0,0,1,3.3,3.4v9.1a1.8,1.8,0,0,0,1.7,1.7,1.7,1.7,0,0,0,1.6-1.7V6.7A6.6,6.6,0,0,0,499.9,0H471.8a6.7,6.7,0,0,0-6.6,6.7V21H460a8.3,8.3,0,0,0-8.3,8.3v62a8.3,8.3,0,0,0,8.3,8.3h77.5a8.3,8.3,0,0,0,8.3-8.3V79.1a1.6,1.6,0,0,0-1.6-1.6,1.7,1.7,0,0,0-1.7,1.6V91.3a5,5,0,0,1-5,5H460a5,5,0,0,1-5-5v-62a5,5,0,0,1,5-5h77.5a5,5,0,0,1,5,5V49.1H528.8a6.7,6.7,0,0,0-6.7,6.6v9.2a6.7,6.7,0,0,0,6.7,6.6h16a6.6,6.6,0,0,0,6.7-6.6V55.7A6.7,6.7,0,0,0,545.8,49.2ZM526.1,12.7l3.8,1.1a3.3,3.3,0,0,1,2.2,4.1l-.9,3.1h-4.4A6.9,6.9,0,0,1,526.1,12.7Zm22,52.2a3.3,3.3,0,0,1-3.3,3.3h-16a3.3,3.3,0,0,1-3.3-3.3V55.7a3.3,3.3,0,0,1,3.3-3.3h16a3.3,3.3,0,0,1,3.3,3.3ZM535,60.3a1.7,1.7,0,0,1-1.6,1.7h-2.5a1.7,1.7,0,1,1,0-3.4h2.5A1.7,1.7,0,0,1,535,60.3Z\"/>\n                        <path className=\"cls-4\" d=\"M302.3,20.5a18.2,18.2,0,0,0-25.7,0L269.1,28a18.7,18.7,0,0,0-5.3,11A18.5,18.5,0,0,0,266,49.6l-3.1,3a18.3,18.3,0,0,0-10.5-2.1,18.1,18.1,0,0,0-11,5.2l-7.5,7.5a18.2,18.2,0,0,0,0,25.7,17.8,17.8,0,0,0,12.8,5.3,18.2,18.2,0,0,0,6.5-1.2,1.4,1.4,0,0,0,.9-1.9,1.6,1.6,0,0,0-2-.9,15.1,15.1,0,0,1-16-24.8l7.5-7.5a15.3,15.3,0,0,1,17.1-3l-2.8,2.8a11.3,11.3,0,0,0-11.8,2.7l-7.5,7.5a11.5,11.5,0,0,0-3.4,8.2,11.3,11.3,0,0,0,3.4,8.1,11.1,11.1,0,0,0,8.1,3.4,11.5,11.5,0,0,0,8.2-3.4l7.5-7.5a11.5,11.5,0,0,0,2.7-11.8l2.8-2.7a15.2,15.2,0,0,1-3,17l-2.6,2.6a1.6,1.6,0,0,0,0,2.2,1.5,1.5,0,0,0,2.2,0l2.6-2.6a18.2,18.2,0,0,0,3.1-21.5l3-3.1a17.9,17.9,0,0,0,8.7,2.2h1.9a17.5,17.5,0,0,0,10.9-5.2l7.6-7.5a18.4,18.4,0,0,0,0-25.7ZM275.9,34.9l7.6-7.5a8.4,8.4,0,0,1,14.3,6,8.2,8.2,0,0,1-2.4,5.9l-7.5,7.5a8.2,8.2,0,0,1-7.1,2.4h0a5.1,5.1,0,0,0,0-7.2,4.8,4.8,0,0,0-3.6-1.5,4.9,4.9,0,0,0-3.6,1.5h0a8.3,8.3,0,0,1,2.3-7.1Zm-.1,9.3a2,2,0,0,1,1.4-.6,1.8,1.8,0,0,1,1.4.6,1.9,1.9,0,0,1,0,2.8l-6.7,6.8h0l-1.7,1.7-1.9-3.8ZM260.4,65.3a2.1,2.1,0,0,1-2.9,0,2,2,0,0,1-.6-1.4,2,2,0,0,1,.6-1.5L266,54l1.9,3.8Zm-.2,9.2L252.7,82a8.4,8.4,0,0,1-6,2.5,8.2,8.2,0,0,1-5.9-2.5,8.3,8.3,0,0,1,0-11.9l7.5-7.5a8.4,8.4,0,0,1,7.1-2.4h-.1a5.2,5.2,0,0,0,0,7.3A5.1,5.1,0,0,0,259,69a5.1,5.1,0,0,0,3.6-1.5h0a8.4,8.4,0,0,1-2.4,7ZM300.1,44l-7.5,7.5a15.1,15.1,0,0,1-17.1,3l2.7-2.7a11.9,11.9,0,0,0,3.7.6A11.4,11.4,0,0,0,290,49l7.6-7.5a11.7,11.7,0,0,0,0-16.3,11.8,11.8,0,0,0-8.2-3.3,11.6,11.6,0,0,0-8.1,3.3l-7.5,7.5A11.5,11.5,0,0,0,271,44.6l-2.7,2.7a15.1,15.1,0,0,1,2.9-17.1l7.6-7.5A15.1,15.1,0,1,1,300.1,44Z\"/>\n                        <path className=\"cls-4\" d=\"M293.5,73.8a1.5,1.5,0,0,0-1.2-1,1.5,1.5,0,0,0-1.4.4l-2.6,2.6-2-5.5a1.5,1.5,0,0,0-1.9-1,1.6,1.6,0,0,0-1,2l2.8,7.9a1.8,1.8,0,0,0,1.1,1,1.6,1.6,0,0,0,1.4-.5l2.7-2.6,1.9,5.6a1.5,1.5,0,0,0,1.4,1h.6a1.6,1.6,0,0,0,.9-2Z\"/>\n                        <path className=\"cls-4\" d=\"M296,61.6h-6.2a1.5,1.5,0,0,0,0,3H296a1.5,1.5,0,1,0,0-3Z\"/>\n                        <path className=\"cls-4\" d=\"M276.4,74.9a1.6,1.6,0,0,0-1.5,1.6v6.2a1.5,1.5,0,0,0,1.5,1.5,1.6,1.6,0,0,0,1.6-1.5V76.5A1.6,1.6,0,0,0,276.4,74.9Z\"/>\n                        <path className=\"cls-4\" d=\"M240.2,29.5l5.5,2-2.6,2.6a1.3,1.3,0,0,0-.4,1.4,1.4,1.4,0,0,0,1,1.1l7.8,2.8h.5a1.6,1.6,0,0,0,1.5-1.1,1.5,1.5,0,0,0-1-1.9l-5.5-2,2.6-2.6a1.5,1.5,0,0,0,.4-1.4,1.4,1.4,0,0,0-1-1.1l-7.8-2.8a1.6,1.6,0,0,0-2,1,1.5,1.5,0,0,0,1,1.9Z\"/>\n                        <path className=\"cls-4\" d=\"M259.7,34.5a1.5,1.5,0,0,0,1.6-1.5V26.8a1.6,1.6,0,0,0-1.6-1.5,1.5,1.5,0,0,0-1.5,1.5V33A1.5,1.5,0,0,0,259.7,34.5Z\"/>\n                        <path className=\"cls-4\" d=\"M240.2,47.9h6.1a1.6,1.6,0,0,0,1.6-1.5,1.6,1.6,0,0,0-1.6-1.6h-6.1a1.6,1.6,0,0,0-1.6,1.6A1.6,1.6,0,0,0,240.2,47.9Z\"/>\n                        <path className=\"cls-4\" d=\"M258.5,86.3a1.5,1.5,0,0,0-1.1.4,1.6,1.6,0,0,0,1.1,2.7,1.2,1.2,0,0,0,1-.5,1.5,1.5,0,0,0,0-2.2A1.2,1.2,0,0,0,258.5,86.3Z\"/>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nexport default IconNotAuthenticated;","import React from 'react';\nimport DisclaimerModal from './disclaimer';\nimport IconNotAuthenticated from './icons/not-authenticated';\nimport useDarkMode from '../util/use-dark-mode';\n\nfunction Error404(props: any) {\n\n    const directUser = () => {\n        props.history.replace(\"/\");\n    };\n\n    // need this to set the correct theme\n    // eslint-disable-next-line\n    const darkMode = useDarkMode(true);\n\n    return (\n        <div className=\"cover\">\n            <div className=\"container-fluid\">\n                <div className=\"row align-items-center\">\n                    <div className=\"cover-content col-12\">\n                        <div id=\"unauthenticated-section\" className=\"text-center mx-auto\">\n                            <IconNotAuthenticated className=\"home-icon\" width=\"400px\" />\n                            <h3>Error</h3>\n                            <p>Sorry, something seems to be broken.<br/>Please re-connect to your wallet again.</p>\n                            <button type=\"button\" className=\"btn btn-user-action mx-2\" onClick={directUser}>Log In</button>\n                        </div>\n                    </div>\n                    <footer id=\"disclaimer\" className=\"align-items-start\">\n                        <div className=\"p-2\">\n                        <span className=\"ml-4 mx-3\">&copy; 2023 Zilliqa</span> \n                        <button type=\"button\" className=\"btn\" data-toggle=\"modal\" data-target=\"#disclaimer-modal\" data-keyboard=\"false\" data-backdrop=\"static\">Disclaimer</button>\n                        </div>\n                    </footer>\n                    <DisclaimerModal />\n                </div>\n            </div>\n        </div>\n\n    );\n}\n\nexport default Error404;","import React, { useMemo } from 'react';\nimport { useTable, useSortBy } from 'react-table';\nimport { DelegStakingPortfolioStats } from '../util/interface';\nimport { getAddressLink, convertQaToCommaStr, convertQaToZilFull } from '../util/utils';\nimport ReactTooltip from 'react-tooltip';\nimport Spinner from './spinner';\nimport { PromiseArea } from '../util/enum';\nimport { useAppSelector } from '../store/hooks';\n\n\nfunction Table({ columns, data }: any) {\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns,\n            data,\n            initialState : {\n                pageIndex: 0,\n                sortBy: [\n                    {\n                        id: 'delegAmt',\n                        desc: true\n                    }\n                ]\n            }\n        }, useSortBy);\n    \n    return (\n        <table className=\"table table-responsive-lg\" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map(column => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>{column.render('Header')}</th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                            })}\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction ExplorerStakingPortfolio(props: any) {\n    const data: DelegStakingPortfolioStats[] = props.data;\n    const networkURL = useAppSelector(state => state.blockchain.blockchain);\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'name',\n                accessor: 'ssnName',\n            },\n            {\n                Header: 'address',\n                accessor: 'ssnAddress',\n                Cell: ({ row }: any) => <a href={getAddressLink(row.original.ssnAddress, networkURL)} target=\"_blank\" rel=\"noopener noreferrer\">{row.original.ssnAddress}</a>\n            },\n            {\n                Header: 'deposit (ZIL)',\n                accessor: 'delegAmt',\n                Cell: ({ row }: any) => <span>{convertQaToCommaStr(row.original.delegAmt)}</span>\n            },\n            {\n                Header: 'rewards (ZIL)',\n                accessor: 'rewards',\n                Cell: ({ row }: any) => \n                    <>\n                    <span data-for=\"rewards-tip\" data-tip={convertQaToZilFull(row.original.rewards)}>{convertQaToCommaStr(row.original.rewards)}</span>\n                    <ReactTooltip id=\"rewards-tip\" place=\"bottom\" type=\"dark\" effect=\"solid\" />\n                    </>\n            },\n        ], [networkURL]\n    );\n\n    return (\n        <>\n        <Spinner class=\"spinner-border dashboard-spinner mb-4\" area={PromiseArea.PROMISE_GET_EXPLORER_STATS} />\n        { data.length === 0 && <div className=\"d-block text-left\"><em>No information found.</em></div> }\n        { data.length > 0 && <Table columns={columns} data={data} /> }\n        </>\n    );\n}\n\nexport default ExplorerStakingPortfolio;","import React, {useMemo } from 'react';\nimport { useTable, useSortBy } from 'react-table';\n\nimport Spinner from './spinner';\nimport { PromiseArea } from '../util/enum';\nimport { convertQaToCommaStr } from '../util/utils';\nimport IconQuestionCircle from './icons/question-circle';\nimport ReactTooltip from 'react-tooltip';\n\n\nfunction Table({ columns, data, tableId }: any) {\n    const {\n        getTableProps,\n        getTableBodyProps,\n        headerGroups,\n        rows,\n        prepareRow,\n    } = useTable(\n        {\n            columns, \n            data,\n            initialState : {\n                sortBy: [\n                    {\n                        id: \"blkNumCountdown\",\n                        desc: false\n                    }\n                ]\n            }\n        }, useSortBy);\n\n    return (\n        <table id={tableId} className=\"table table-responsive-lg\" {...getTableProps()}>\n            <thead>\n                {headerGroups.map(headerGroup => (\n                    <tr {...headerGroup.getHeaderGroupProps()}>\n                        {headerGroup.headers.map(column => (\n                            <th scope=\"col\" {...column.getHeaderProps()}>{column.render('Header')}</th>\n                        ))}\n                    </tr>\n                ))}\n            </thead>\n            <tbody {...getTableBodyProps()}>\n                {rows.map((row, i) => {\n                    prepareRow(row)\n                    return (\n                        <tr {...row.getRowProps()}>\n                            {row.cells.map(cell => {\n                                return <td {...cell.getCellProps()}>{cell.render('Cell')}</td>\n                            })}\n                        </tr>\n                    )\n                })}\n            </tbody>\n        </table>\n    );\n}\n\nfunction ExplorerPendingWithdrawalTable(props: any) {\n    const data = props.data;\n    const totalWithdrawAmt = props.totalWithdrawAmt;\n\n    const columns = useMemo(\n        () => [\n            {\n                Header: 'pending blocks till claim',\n                accessor: 'blkNumCountdown'\n            },\n            {\n                Header: 'progress',\n                accessor: 'progress',\n                Cell: ({ row }: any) => <span>{row.original.progress}%</span>\n            },\n            {\n                Header: 'amount (ZIL)',\n                accessor: 'amount',\n                Cell: ({ row }: any) => <span>{convertQaToCommaStr(row.original.amount)}</span>\n            }\n        ], []\n    );\n\n    return (\n        <div id=\"delegator-complete-withdraw-details\" className=\"container px-1 py-3 mb-4\">\n            <div id=\"complete-withdraw-explorer-accordion\">\n                <div className=\"card text-center\">\n                    <h6 className=\"text-left px-4 pt-4\">Pending Stake Withdrawals&nbsp;\n                        <span data-tip data-for=\"withdraw-question\">\n                            <IconQuestionCircle width=\"16\" height=\"16\" className=\"section-icon\" />\n                        </span>\n                    </h6>\n                    <div className=\"text-center\">\n                        <Spinner class=\"spinner-border dashboard-spinner mb-4\" area={PromiseArea.PROMISE_GET_EXPLORER_PENDING_WITHDRAWAL} />\n                    </div>\n                    <div className=\"card-header d-flex justify-content-between\" id=\"complete-withdraw-accordion-header\">\n                        <div>\n                            <span>You can now withdraw <strong>{convertQaToCommaStr(totalWithdrawAmt)}</strong> ZIL</span>\n                        </div>\n                    </div>\n\n                    <div id=\"complete-withdraw-details\" className={ data.length > 0 ? 'collapse show' : 'collapse' } aria-labelledby=\"complete-withdraw-accordion-header\" data-parent=\"#complete-withdraw-explorer-accordion\">\n                        <div className=\"card-body\">\n                            { data.length === 0 && <em>You have no ZILs ready for withdrawal yet.</em> }\n                            <Table columns={columns} data={data} />\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n            <ReactTooltip id=\"withdraw-question\" place=\"bottom\" type=\"dark\" effect=\"solid\">\n                <span>When you initiate a stake withdrawal, the amount is not withdrawn immediately.</span>\n                <br/>\n                <span>The amount is processed at a certain block number and only available to withdraw<br/>once the required block number is reached.</span>\n            </ReactTooltip>\n        </div>\n    );\n}\n\nexport default ExplorerPendingWithdrawalTable;","import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { trackPromise } from 'react-promise-tracker';\nimport DisclaimerModal from './disclaimer';\nimport Footer from './footer';\n\nimport { Environment, Network, PromiseArea, ContractState, OperationStatus } from '../util/enum';\nimport { DelegStats, DelegStakingPortfolioStats, initialDelegStats, PendingWithdrawStats } from '../util/interface';\n\nimport { fromBech32Address, toBech32Address } from '@zilliqa-js/crypto';\nimport { validation } from \"@zilliqa-js/util\";\nimport { computeDelegRewards } from '../util/reward-calculator';\nimport { convertQaToCommaStr, isRespOk } from '../util/utils';\nimport Spinner from './spinner';\nimport useDarkMode from '../util/use-dark-mode';\n\nimport ZillionLogo from '../static/zillion.svg';\nimport ZillionLightLogo from '../static/light/zillion.svg';\nimport IconSun from './icons/sun';\nimport IconMoon from './icons/moon';\nimport IconSearch from './icons/search';\nimport ExplorerStakingPortfolio from './explorer-staking-portfolio';\nimport WarningBanner from './warning-banner';\nimport ExplorerPendingWithdrawalTable from './explorer-pending-withdrawal-table';\nimport RewardCountdownTable from './reward-countdown-table';\nimport { getEnvironment } from '../util/config-json-helper';\nimport { useAppSelector } from '../store/hooks';\nimport { ZilSdk } from '../zilliqa-api';\nimport { BigNumber } from 'bignumber.js';\n\nfunction Explorer(props: any) {\n    const address = props.match.params.address; // bech32 wallet address;\n    const [walletBase16Address, setWalletBase16Address] = useState('');\n    const [explorerSearchAddress, setExplorerSearchAddress] = useState('');\n    const [delegStats, setDelegStats] = useState<DelegStats>(initialDelegStats);\n    const [stakedNodeList, setStakedNodeList] = useState([] as DelegStakingPortfolioStats[]);\n\n    const [pendingWithdrawalList, setPendingWithdrawlList] = useState([] as PendingWithdrawStats[]);\n    const [totalWithdrawAmt, setTotalWithdrawAmt] = useState('0');\n\n    // config.js from public folder\n    const impl = useAppSelector(state => state.blockchain.impl);\n    const env = getEnvironment();\n    const network = env === Environment.PROD ? Network.MAINNET : Network.TESTNET;\n\n    const mountedRef = useRef(true);\n\n    // need this to set the correct theme\n    // eslint-disable-next-line\n    const darkMode = useDarkMode(true);\n\n    const getWalletAddress = useCallback(() => {\n        let wallet = '';\n\n        if (validation.isBech32(address)) {\n            // bech32\n            try {\n                wallet = fromBech32Address(address).toLowerCase();\n            } catch (err) {\n                // input address maybe of bech32 format but cannot be decoded\n                console.error(\"No such address: %o\", address);\n                wallet = '';\n            }\n        } else if (validation.isAddress(address)) {\n            // base16\n            wallet = address.toLowerCase();\n        } else {\n            // invalid address\n            wallet = '';\n        }\n\n        return wallet;\n    }, [address]);\n    \n    useEffect(() => {\n        let totalDeposits = new BigNumber(0);\n        let totalRewards = new BigNumber(0);\n        let wallet = getWalletAddress();\n        let stakedNodesList: DelegStakingPortfolioStats[] = [];\n\n        if (mountedRef.current) {\n            setWalletBase16Address(wallet);\n        }\n\n        trackPromise(ZilSdk.getSmartContractSubState(impl, 'deposit_amt_deleg', [wallet])\n            .then(async (contractState) => {\n                if (contractState === undefined || contractState === null || contractState === OperationStatus.ERROR) {\n                    return null;\n                }\n\n                const depositDelegList = contractState['deposit_amt_deleg'][wallet];\n\n                // fetch the ssn information for each deposit\n                const ssnContractState = await ZilSdk.getSmartContractSubState(impl, 'ssnlist');\n\n                for (const ssnAddress in depositDelegList) {\n                    if (!depositDelegList.hasOwnProperty(ssnAddress)) {\n                        continue;\n                    }\n\n                    // compute total deposits\n                    const delegAmtQaBN = new BigNumber(depositDelegList[ssnAddress]);\n                    totalDeposits = totalDeposits.plus(delegAmtQaBN);\n\n                    // compute zil rewards\n                    const delegRewards = new BigNumber(await computeDelegRewards(impl, ssnAddress, wallet)).toString();\n                    totalRewards = totalRewards.plus(delegRewards);\n\n                    // append data to list of staked nodes\n                    const data: DelegStakingPortfolioStats = {\n                        ssnName: ssnContractState[\"ssnlist\"][ssnAddress][\"arguments\"][3],\n                        ssnAddress: toBech32Address(ssnAddress),\n                        delegAmt: `${delegAmtQaBN}`,\n                        rewards: `${delegRewards}`\n                    }\n                    stakedNodesList.push(data);\n                }\n            })\n            .catch((err) => {\n                console.error(err);\n                return null;\n            })\n            .finally(() => {\n                if (mountedRef.current) {\n                    const data : DelegStats = {\n                        ...initialDelegStats,\n                        zilRewards: `${totalRewards}`,\n                        gzilRewards: `${totalRewards}`,\n                        totalDeposits: `${totalDeposits}`,\n                    }\n                    setDelegStats(data);\n                    setStakedNodeList([...stakedNodesList]);\n                }\n            }), PromiseArea.PROMISE_GET_EXPLORER_STATS);\n\n    }, [impl, address, getWalletAddress]);\n\n\n    // compute pending withdrawal progress\n    useEffect(() => {\n        let wallet = getWalletAddress();\n        let pendingWithdrawList: PendingWithdrawStats[] = [];\n        let totalWithdrawAmt = new BigNumber(0);\n        let progress = '0';\n\n        trackPromise(ZilSdk.getSmartContractSubState(impl, 'withdrawal_pending', [wallet])\n            .then(async (contractState) => {\n                if (contractState === undefined || contractState === null || contractState === OperationStatus.ERROR) {\n                    return null;\n                }\n    \n                const blkNumPendingWithdrawal = contractState['withdrawal_pending'][wallet];\n\n                // get min bnum req\n                const blkNumReqState = await ZilSdk.getSmartContractSubState(impl, 'bnum_req');\n                const blkNumReq = blkNumReqState['bnum_req'];\n                const numTxBlk = await ZilSdk.getNumTxBlocks();\n                const currBlkNum = isRespOk(numTxBlk) === true ? new BigNumber(numTxBlk!).minus(1) : new BigNumber(0);\n\n                // compute each of the pending withdrawal progress\n                for (const blkNum in blkNumPendingWithdrawal) {\n                    if (!blkNumPendingWithdrawal.hasOwnProperty(blkNum)) {\n                        continue;\n                    }\n        \n                    // compute each pending stake withdrawal progress\n                    let pendingAmt = new BigNumber(blkNumPendingWithdrawal[blkNum]);\n                    let blkNumCheck = new BigNumber(blkNum).plus(blkNumReq);\n                    let blkNumCountdown = blkNumCheck.minus(currBlkNum); // may be negative\n                    let completed = new BigNumber(0);\n        \n                    // compute progress using blk num countdown ratio\n                    if (blkNumCountdown.isLessThanOrEqualTo(0)) {\n                        // can withdraw\n                        totalWithdrawAmt = totalWithdrawAmt.plus(pendingAmt);\n                        blkNumCountdown = new BigNumber(0);\n                        completed = new BigNumber(1);\n                    } else {\n                        // still have pending blks\n                        // 1 - (countdown/blk_req)\n                        const processed = blkNumCountdown.dividedBy(blkNumReq);\n                        completed = new BigNumber(1).minus(processed);\n                    }\n        \n                    // convert progress to percentage\n                    progress = completed.times(100).toFixed(2);\n        \n                    // record the stake withdrawal progress\n                    pendingWithdrawList.push({\n                        amount: `${pendingAmt}`,\n                        blkNumCountdown: `${blkNumCountdown}`,\n                        blkNumCheck: `${blkNumCheck}`,\n                        progress: `${progress}`\n                    } as PendingWithdrawStats)\n                }\n            })\n            .catch((err) => {\n                console.error(err);\n                return null;\n            })\n            .finally(() => {\n                if (mountedRef.current) {\n                    setPendingWithdrawlList([...pendingWithdrawList]);\n                    setTotalWithdrawAmt(`${totalWithdrawAmt}`)\n                }\n            }), PromiseArea.PROMISE_GET_EXPLORER_PENDING_WITHDRAWAL);\n    }, [impl, getWalletAddress]);\n\n    const redirectToMain = () => {\n        props.history.push(\"/\");\n    };\n\n    const toggleTheme = () => {\n        if (darkMode.value === true) {\n          darkMode.disable();\n        } else {\n          darkMode.enable();\n        }\n    };\n\n    const toggleZillionLogo = () => {\n        if (darkMode.value === true) {\n          return <img src={ZillionLogo} alt=\"zillion\" width=\"480px\" className=\"mt-2 mb-4 zillion-logo\" />;\n        } else {\n          return <img src={ZillionLightLogo} alt=\"zillion\" width=\"480px\" className=\"mt-2 mb-4 zillion-logo\" />;\n        }\n    };\n\n    const handleExplorerSearchAddress = (e: any) => {\n        setExplorerSearchAddress(e.target.value);\n    }\n    \n    const explorerCheckRewards = () => {\n        const zillionExplorerUrl = \"/address/\" + explorerSearchAddress\n        props.history.push(zillionExplorerUrl);\n    };\n\n    const handleKeyPress = (e: any) => {\n        if (e.keyCode === 13) {\n            // Enter key\n            // proceed to search\n            explorerCheckRewards();\n        }\n    }\n\n    return (\n        <div className=\"cover explorer\">\n            <div className=\"container-fluid\">\n                <div className=\"row align-items-center\">\n                    <div className=\"cover-content col-12 text-center\">\n\n                        <WarningBanner />\n\n                        <div \n                            id=\"explorer-mini-navbar\" \n                            className={\n                                ContractState.IS_PAUSED.toString() === \"true\" ? \n                                'explorer-mini-navbar-disabled d-flex align-items-end mr-4' : \n                                'explorer-mini-navbar-enabled d-flex align-items-end mr-4'}>\n\n                        <div>\n                            <button type=\"button\" className=\"btn btn-theme shadow-none mr-3\" onClick={toggleTheme}>\n                            { \n                                darkMode.value === true ? \n                                <IconSun width=\"20\" height=\"20\"/> : \n                                <IconMoon width=\"20\" height=\"20\"/>\n                            }\n                            </button>\n                        </div>\n\n                        { \n                            ( env === Environment.STAGE || env === Environment.PROD ) && \n                            <span className=\"mr-2\">{network}</span>\n                        }\n\n                        </div>\n\n                        <div className=\"heading\">\n                            <>{toggleZillionLogo()}</>\n                            <p className=\"tagline\">Staking with Zilliqa. Simplified!</p>\n                        </div>\n\n                        <div className=\"wallet-access\">\n                            <h2 className=\"mb-0\">Zillion Explorer</h2>\n                      \n                            <div className=\"d-flex justify-content-center h-100\">\n                                <div className=\"explorer-search mb-4\">\n                                    <input type=\"text\" className=\"explorer-search-input\" value={explorerSearchAddress} onKeyDown={handleKeyPress} onChange={handleExplorerSearchAddress} placeholder=\"Enter wallet address to check rewards\" maxLength={42}/>\n                                    <button type=\"button\" className=\"btn explorer-search-icon shadow-none\" onClick={() => explorerCheckRewards()}><IconSearch width=\"18\" height=\"18\" /></button>\n                                </div>\n                            </div>\n                           \n                            <h6 className=\"explorer-wallet mt-4\">{walletBase16Address && address}</h6>\n                        </div>\n                        \n                        { !walletBase16Address && <p className=\"mb-4\">No such address.</p> }\n\n                        {/* delegator rewards */}\n                        {\n                            walletBase16Address &&\n\n                            <>\n\n                            <RewardCountdownTable />\n\n                            <div id=\"delegator-stats-details\" className=\"p-4 dashboard-card container\">\n                                <div className=\"row\">\n                                    <div className=\"col text-left\">\n                                        <h5 className=\"card-title mb-4\">Overview</h5>\n                                    </div>\n                                    <div className=\"col-12 text-center\">\n                                        <Spinner class=\"spinner-border dashboard-spinner mb-4\" area={PromiseArea.PROMISE_GET_EXPLORER_STATS} />\n                                        <div className=\"row px-2 pb-3 align-items-center justify-content-center\">\n                                            <div className=\"d-block deleg-stats-card\">\n                                                <h3>Total Deposits</h3>\n                                                <span>{convertQaToCommaStr(delegStats.totalDeposits)}</span>\n                                            </div>\n                                            <div className=\"d-block deleg-stats-card\">\n                                                <h3>Unclaimed ZIL Rewards</h3>\n                                                <span>{convertQaToCommaStr(delegStats.zilRewards)}</span>\n                                            </div>\n                                            <div className=\"d-block deleg-stats-card\">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            </>\n                        }\n\n                        {/* each ssn staked */}\n\n                        {\n                            walletBase16Address &&\n\n                            <>\n                            <div id=\"staking-portfolio-details\" className=\"p-4 dashboard-card mb-4 container\">\n                                <div className=\"row\">\n                                    <div className=\"col\">\n                                        <h5 className=\"card-title mb-4 text-left\">Nodes Staked</h5>\n                                    </div>\n                                    <div className=\"col-12\">\n                                        <ExplorerStakingPortfolio data={stakedNodeList} />\n                                    </div>\n                                </div>\n                            </div>\n\n                            <ExplorerPendingWithdrawalTable\n                                data={pendingWithdrawalList}\n                                totalWithdrawAmt={totalWithdrawAmt} />\n                            </>\n                        }\n\n                        <button type=\"button\" className=\"btn btn-user-action-cancel mt-2 mx-2\" onClick={redirectToMain}>Back to Main</button>\n\n                    </div>\n                    <Footer />\n                    <DisclaimerModal />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Explorer;","import React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport Home from './components/home';\nimport Dashboard from './components/dashboard';\nimport Error404 from './components/error404';\nimport Explorer from './components/explorer';\n\n\nfunction App() {\n  return (\n    <Switch>\n      <Route exact path=\"/\" render={(props) => <Home {...props} />} />\n      <Route exact path=\"/address/:address\" render={(props) => < Explorer {...props} />} />\n      <Route exact path=\"/dashboard\" render={(props) => <Dashboard {...props}/>} />\n      <Route exact path=\"/oops\" render={(props) => <Error404 {...props}/>} />\n      <Route>\n        {/* No route match - redirect to home page */}\n        <Redirect to=\"/\" />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './app.css';\nimport './media-queries.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store/store'\nimport { CONFIG_LOADED, UPDATE_API_MAX_ATTEMPT, UPDATE_BLOCKCHAIN_EXPLORER, UPDATE_CHAIN_INFO, UPDATE_REFRESH_RATE } from './store/blockchainSlice';\nimport { getApiMaxRetry, getBlockchainExplorer, getNetworkConfigByEnv, getRefreshRate } from './util/config-json-helper';\n\n\nconst network_config = getNetworkConfigByEnv()\n// store the config file info to redux\n// to allow other components to read the contract\nstore.dispatch(UPDATE_CHAIN_INFO({\n  proxy: network_config.proxy,\n  impl: network_config.impl,\n  blockchain: network_config.blockchain,\n  staking_viewer: network_config.node_status,\n  api_list: network_config.api_list,\n}));\n\nstore.dispatch(UPDATE_REFRESH_RATE({ refresh_rate: getRefreshRate() }));\nstore.dispatch(UPDATE_API_MAX_ATTEMPT({ api_max_attempt: getApiMaxRetry() }));\nstore.dispatch(UPDATE_BLOCKCHAIN_EXPLORER({ blockchain_explorer: getBlockchainExplorer() }));\nstore.dispatch(CONFIG_LOADED()); // informs saga to start polling data\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App/>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import type Transport from \"@ledgerhq/hw-transport\";\nimport TransportU2F from \"@ledgerhq/hw-transport-u2f\";\nimport TransportWebHID from \"@ledgerhq/hw-transport-webhid\";\nimport TransportWebUSB from \"@ledgerhq/hw-transport-webusb\";\nimport { Constants } from \"./util/enum\";\n\nconst { BN, Long } = require(\"@zilliqa-js/util\");\nconst { encodeTransactionProto } = require(\"@zilliqa-js/zilliqa\");\n\nconst CLA = 0xe0;\nconst INS = {\n    getVersion: 0x01,\n    getPublicKey: 0x02,\n    getPublicAddress: 0x02,\n    signTxn: 0x04,\n};\n\nconst PubKeyByteLen = 33;\nconst SigByteLen = 64;\nconst Bech32AddrLen = \"zil\".length + 1 + 32 + 6;\n\nexport class LedgerZilliqa {\n    transport: Transport<any>;\n\n    // helper to create the transport object\n    // which is later used to init the constructor\n    static async getTransport() {\n        const isWebHIDSupported = await TransportWebHID.isSupported().catch(\n            () => false\n        );\n        const isWebUSBSupported = await TransportWebUSB.isSupported().catch(\n            () => false\n        );\n\n        if (isWebHIDSupported) {\n            console.log(\"ledger webhid supported\");\n            const list = await TransportWebHID.list();\n            if (\n                list.length > 0 &&\n                list[0].opened &&\n                list[0].vendorId === Constants.LEDGER_VENDOR_ID\n            ) {\n                return new TransportWebHID(list[0]);\n            }\n            const existing = await TransportWebHID.openConnected().catch(\n                () => null\n            );\n            return existing ?? TransportWebHID.request();\n        }\n\n        if (isWebUSBSupported) {\n            console.log(\"ledger webusb supported\");\n            const existing = await TransportWebUSB.openConnected().catch(\n                () => null\n            );\n            if (existing === null) {\n                return TransportWebUSB.create();\n            }\n            return existing;\n        }\n\n        console.log(\"ledger u2f fallback\");\n        return TransportU2F.create();\n    }\n\n    constructor(transport: Transport<any>, scrambleKey: string = \"w0w\") {\n        this.transport = transport;\n        transport.decorateAppAPIMethods(\n            this,\n            [\"getVersion\", \"getPublicKey\", \"getPublicAddress\", \"signTxn\"],\n            scrambleKey\n        );\n    }\n\n    getVersion() {\n        const P1 = 0x00;\n        const P2 = 0x00;\n\n        return this.transport\n            .send(CLA, INS.getVersion, P1, P2)\n            .then((response) => {\n                let version = \"v\";\n                for (let i = 0; i < 3; ++i) {\n                    version += parseInt(\"0x\" + response[i]);\n                    if (i !== 2) {\n                        version += \".\";\n                    }\n                }\n                return { version };\n            });\n    }\n\n    // index: index indicate by ledger, default: 0\n    getPublicKey(index: number) {\n        const P1 = 0x00;\n        const P2 = 0x00;\n\n        let payload = Buffer.alloc(4);\n        payload.writeInt32LE(index, 0);\n\n        return this.transport\n            .send(CLA, INS.getPublicKey, P1, P2, payload)\n            .then((response) => {\n                // The first PubKeyByteLen bytes are the public address\n                const publicKey = response\n                    .toString(\"hex\")\n                    .slice(0, PubKeyByteLen * 2);\n                return { publicKey };\n            });\n    }\n\n    // index: index indicate by ledger, default: 0\n    getPublicAddress(index: number) {\n        const P1 = 0x00;\n        const P2 = 0x01;\n\n        let payload = Buffer.alloc(4);\n        payload.writeInt32LE(index, 0);\n\n        return this.transport\n            .send(CLA, INS.getPublicAddress, P1, P2, payload)\n            .then((response) => {\n                // After the first PubKeyByteLen bytes, the remaining is the bech32 address string.\n                const pubAddr = response\n                    .slice(PubKeyByteLen, PubKeyByteLen + Bech32AddrLen)\n                    .toString(\"utf-8\");\n                const pubKey = response\n                    .toString(\"hex\")\n                    .slice(0, PubKeyByteLen * 2);\n                return { pubAddr, pubKey };\n            });\n    }\n\n    signTxn(keyIndex: number, txnParams: any) {\n        // https://github.com/Zilliqa/Zilliqa-JavaScript-Library/tree/dev/packages/zilliqa-js-account#interfaces\n        const P1 = 0x00;\n        const P2 = 0x00;\n\n        let indexBytes = Buffer.alloc(4);\n        indexBytes.writeInt32LE(keyIndex, 0);\n\n        // convert to zilliqa types\n        if (!(txnParams.amount instanceof BN)) {\n            txnParams.amount = new BN(txnParams.amount);\n        }\n\n        if (!(txnParams.gasPrice instanceof BN)) {\n            txnParams.gasPrice = new BN(txnParams.gasPrice);\n        }\n\n        if (!(txnParams.gasLimit instanceof BN)) {\n            txnParams.gasLimit = Long.fromNumber(txnParams.gasLimit);\n        }\n\n        var txnBytes = encodeTransactionProto(txnParams);\n\n        const STREAM_LEN = 128; // Stream in batches of STREAM_LEN bytes each.\n        var txn1Bytes;\n        if (txnBytes.length > STREAM_LEN) {\n            txn1Bytes = txnBytes.slice(0, STREAM_LEN);\n            txnBytes = txnBytes.slice(STREAM_LEN, undefined);\n        } else {\n            txn1Bytes = txnBytes;\n            txnBytes = Buffer.alloc(0);\n        }\n\n        var txn1SizeBytes = Buffer.alloc(4);\n        txn1SizeBytes.writeInt32LE(txn1Bytes.length, 0);\n        var hostBytesLeftBytes = Buffer.alloc(4);\n        hostBytesLeftBytes.writeInt32LE(txnBytes.length, 0);\n        // See signTxn.c:handleSignTxn() for sequence details of payload.\n        // 1. 4 bytes for indexBytes.\n        // 2. 4 bytes for hostBytesLeftBytes.\n        // 3. 4 bytes for txn1SizeBytes (number of bytes being sent now).\n        // 4. txn1Bytes of actual data.\n        const payload = Buffer.concat([\n            indexBytes,\n            hostBytesLeftBytes,\n            txn1SizeBytes,\n            txn1Bytes,\n        ]);\n\n        let transport = this.transport;\n        return transport\n            .send(CLA, INS.signTxn, P1, P2, payload)\n            .then(function cb(response): any {\n                // Keep streaming data into the device till we run out of it.\n                // See signTxn.c:istream_callback() for how this is used.\n                // Each time the bytes sent consists of:\n                //  1. 4-bytes of hostBytesLeftBytes.\n                //  2. 4-bytes of txnNSizeBytes (number of bytes being sent now).\n                //  3. txnNBytes of actual data.\n                if (txnBytes.length > 0) {\n                    var txnNBytes;\n                    if (txnBytes.length > STREAM_LEN) {\n                        txnNBytes = txnBytes.slice(0, STREAM_LEN);\n                        txnBytes = txnBytes.slice(STREAM_LEN, undefined);\n                    } else {\n                        txnNBytes = txnBytes;\n                        txnBytes = Buffer.alloc(0);\n                    }\n\n                    var txnNSizeBytes = Buffer.alloc(4);\n                    txnNSizeBytes.writeInt32LE(txnNBytes.length, 0);\n                    hostBytesLeftBytes.writeInt32LE(txnBytes.length, 0);\n                    const payload = Buffer.concat([\n                        hostBytesLeftBytes,\n                        txnNSizeBytes,\n                        txnNBytes,\n                    ]);\n                    return transport\n                        .send(CLA, INS.signTxn, P1, P2, payload)\n                        .then(cb);\n                }\n                return response;\n            })\n            .then((result) => {\n                return result.toString(\"hex\").slice(0, SigByteLen * 2);\n            });\n    }\n}\n","module.exports = __webpack_public_path__ + \"static/media/zillion.a66116bf.svg\";","module.exports = __webpack_public_path__ + \"static/media/zillion.a0d14c67.svg\";"],"sourceRoot":""}